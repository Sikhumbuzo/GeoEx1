(function(){(function(){if(!this.ovi||!this.ovi.win){var d={},k=k||this.oviConfig||{},k={win:k.win||this,doc:k.doc||this.document,modulePaths:k.modulePaths||{},version:"1.0.0.$REPOSITORY_REVISION$",buildNS:function(c){var e;for(var c=c.split("."),b=0,g=ovi.win,a;a=c[b++];)e=g[a]=g[a]||{isNs:!0},g=e;return g},provide:function(c){d[c]=1;return ovi.buildNS(c)},isLoaded:function(c){return d[c]},require:function(c,b){if(d[c])return this;var g=ovi.getLoadPath(c);try{ovi.Bs(g)}catch(a){throw Error("Could not load "+
c+", reason: "+a.message);}if(!d[c]){if(b!==!1)throw Error("Namespace "+c+" was not provided by "+g);d[c]=1}return this},Rj:function(){return ovi.win.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest},$xhr:function(){return this.Rj()},Ji:function(c){c=c.status;try{return!c&&location.protocol==="file:"||c>=200&&c<300||c===304||c===1223||c===0}catch(b){}return!1},$isXHRSuccess:function(c){return this.Ji(c)},Bs:function(c){var b=ovi.Rj();b.open("GET",c,!1);b.send(null);if(!ovi.Ji(b))throw Error("Unable to load "+
c+" status: "+b.status);return ovi.win.eval(b.responseText+"\n//@ sourceURL="+c+"\n")},getLoadPath:function(c,b){var g=ovi.modulePaths[c];if(!g)for(var a=c.split("."),e=a.pop(),l=[];a.length;){g=a.join(".");if(g=ovi.modulePaths[g]){g+=l.join("/");g+=g.charAt(g.length-1)!=="/"?"/"+e:e;break}l.splice(0,0,a.pop())}g+="."+(b||"js");return g}};if(this.ovi)for(var h in k)k.hasOwnProperty(h)&&(this.ovi[h]=k[h]);else this.ovi=ovi=k;ovi.modulePaths.ovi=ovi.modulePaths.ovi||function(){for(var c=document.getElementsByTagName("script"),
b=0,g=/(^|\/|\\)ovi[\.\w]*?\.js$/i,a="",e,l,f;e=c[b++];)if(e=e.ie8_src||e.src||"",l=e.match(g)){if(e.indexOf("://")===-1){a=ovi.win.location.href;f=a.indexOf("#");var p=a.indexOf("?");f=f>p&&p>-1?p:f;a=f>-1?a.substring(0,f):a;a=a.substring(0,a.lastIndexOf("/")+1)}f=a+e.substring(0,l.index);f=f.charAt(f.length-1)==="/"?f:f+"/"}return f}();ovi.basePath=""}}).call(this);ovi.provide("ovi.browser");var La=ovi,Ta=navigator,tb=Ta.userAgent.toLowerCase(),ub=Ta.appVersion;
La.platform={windows:/Windows/.test(ub),mac:/MacIntel/.test(Ta.platform),linux:/X11/.test(ub)&&!/tablet/.test(tb)&&!/armv7/.test(tb),maemo:/apple/.test(tb)&&/linux/.test(tb)&&/armv7/.test(Ta.platform),s60_v3:/Series60\/3/.test(ub),s60_v5_touch:/Nokia5800|NokiaN97/.test(ub)||/browserng/.test(tb)};var vb=La.platform;
La.browser={version:(tb.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],chrome:/chrome/.test(tb),safari:/Apple/.test(navigator.vendor)&&!/browserng/.test(tb),opera:/opera/.test(tb),mozilla:/firefox/.test(tb)&&!/Apple/.test(navigator.vendor),s60:/series60/.test(tb),cp:/browserng/.test(tb),s60_v3:vb.s60_v3,snc:vb.s60_v3||vb.s60_v5_snc,touch:vb.maemo||vb.s60_v5_touch,web:!(vb.s60_v3||vb.s60_v5_snc||vb.maemo||vb.s60_v5_touch),language:Ta.language||Ta.userLanguage};ovi.browser.msie=eval("/*@cc_on!@*/!1");
ovi.provide("ovi.lang");
(function(d){d.bind=function(f,a){if(arguments.length>2){var e=[].slice.call(arguments,2);return function(){return a.apply(f,e.concat(d.splat(arguments)))}}else return function(){return a.apply(f,arguments)}};d.each=function(f,a){if(f){var e=0,r=f.length,q;if(typeof r!=="number"||Object.prototype.toString.call(f)==="[object Object]"&&!(r-1 in f))for(q in f){if(f.hasOwnProperty(q)&&a.call(f,f[q],q,f)===!1)break}else for(q=f[0];e<r&&a.call(f,q,e,f)!==!1;q=f[++e]);}};d.extend=function(){var f="constructor toString valueOf toLocaleString isPrototypeOf propertyIsEnumerable hasOwnProperty unique".split(" "),
a,e={constructor:function(){}},r;for(a in e)r=null;r===void 0&&(r=function(a,e){for(var m=f.length,p;m--;)if(e.hasOwnProperty(p=f[m]))a[p]=e[p]});d.extend=function(f,a){for(var e=Array.prototype.slice.call(arguments,1),m=0,p=e.length;m<p;m++){var a=e[m],l;for(l in a)a.hasOwnProperty(l)&&(f[l]=a[l]);r&&a&&r(f,a,1)}return f};return d.extend.apply(null,arguments)};d.splat=function(f){var a=d.type(f);return a==="undefined"?[]:a==="arguments"?Array.prototype.slice.call(f):a==="array"?f:[f]};for(var k=
Object.prototype.toString,h={},c={1:"element",3:"textnode",9:"document",11:"fragment"},b="Arguments Array Boolean Date Document Element Error Fragment Function NodeList Null Number Object RegExp String TextNode Undefined Window".split(" "),g=0,a,e;a=b[g++];)if(e=d.win[a])try{h[k.call(new e)]=a.toLowerCase()}catch(l){}d.type=function(f){return f===null&&"null"||f===void 0&&"undefined"||f.nodeType&&c[f.nodeType]||f.length!==void 0&&(typeof f.length=="number"||f.length.tagName)&&(f.callee&&"arguments"||
f.alert&&"window"||f.item&&"nodelist")||h[k.call(f)]}})(ovi);ovi.provide("ovi.Class");
(function(d){function k(b){function g(){var a=this.Jj;this.Jj=g;var e;try{e=this instanceof g?new b(arguments):b.apply(this,arguments)}finally{this.Jj=a}return e}return g}function h(){var b=this.Jj;delete this.Jj;return b.Qm.apply(this,arguments)}function c(){}d.Class=function(b){function g(){this.zi&&this.zi();return this.initialize?this.initialize.apply(this,arguments):this}b=b||{};if(!(this instanceof d.Class))return new d.Class(b);var a;if(b.Mixins){var e=[].concat(b.Mixins),l=[],f=0,p;for(delete b.Mixins;p=
e[f++];)for(a in p=p.prototype||p)typeof p[a]==="function"&&(a!=="initialize"?b[a]||(b[a]=p[a]):l.push(p.initialize));if(l.length>0)b.zi=function(){m.zi.Qm&&m.zi.Qm.call(this);for(var f=0,a;a=l[f++];)a.call(this)}}e=b.Extends;delete b.Extends;f=b.Statics;delete b.Statics;var m;if(typeof e==="function"){c.prototype=e.prototype;m=new c;for(a in b)if(b.hasOwnProperty(a)){if(typeof m[a]==="function"&&typeof b[a]==="function")b[a]=k(b[a]),b[a].Qm=m[a];m[a]=b[a]}m._super=h;m.Iv=e}else m=b;if(b.Name)m.className=
b.Name,g.Name=m.className;delete m.Name;g.constructor=d.Class;g.prototype=m;g.prototype.constructor=g;f&&d.extend(g,f);return g}})(ovi);ovi.provide("ovi.Array");
(function(d){var k="forEach indexOf lastIndexOf map filter every some reduce reduceRight".split(" "),h=/^\s*function\s+\w+\s*\(\s*\)\s*\{\s*\[\s*native\s+code\s*\]\s*\}\s*$/,c={forEach:function(a,l,f){for(var p=a.length>>>0,m=0;m<p;m++)m in a&&l.call(f,a[m],m,a)},map:function(a,l,f){var p,m,r,q;if(a==null)throw new TypeError(" array is null or not defined");m=Object(a);r=m.length>>>0;if({}.toString.call(l)!="[object Function]")throw new TypeError(l+" is not a function");a=Array(r);for(p=0;p<r;)p in
m&&(q=m[p],q=l.call(f,q,p,m),a[p]=q),p++;return a},lastIndexOf:function(a,l,f){return this.Bo(a,l,f,-1)},Bo:function(a,l,f,p){var p=p||1,m=a.length>>>0;isNaN(f)?f=p>0?0:m-1:(f=Math[f<0?"ceil":"floor"](f),f<0?f+=m:p<0&&f>=m&&(f=m-1));for(;f>-1&&f<m;f+=p)if(f in a&&a[f]===l)return f;return-1}},b={isOviArray:1},g=k.length;for(c.indexOf=c.Bo;g--;){var a=k[g];typeof k[a]==="function"&&h.test(k[a])&&(!k[a].toString||h.test(k[a].toString))?(k.splice(g,1),c[a]=Array[a]||new Function("var ap = Array.prototype; return ap."+
a+".apply(arguments[0], ap.slice.call(arguments, 1));")):b[a]=new Function("return ovi.Array."+a+".apply(ovi.Array, [this].concat(ovi.splat(arguments)));")}d.Array=k.length?function(a){return(a=arguments.length?a:[]).isOviArray?a:d.extend(a,b)}:function(a){return arguments.length?a:[]};d.extend(d.Array,c)})(ovi);ovi.provide("nokia.maps.clustering._packaging.base");ovi.provide("nokia.maps.heatmap._packaging.base");ovi.provide("nokia.maps.util.ResourceLoader");
(function(d){var k=nokia.maps.util.c,h={css:function(c){/###RESOURCE_START###/im.test(c)&&(c=c.replace(/[\s\S]*###RESOURCE_START###\*\//im,""),c=c.replace(/\/\*###RESOURCE_END###[\s\S]*/im,""));return c},html:function(c){/###RESOURCE_START###/im.test(c)&&(c=c.replace(/[\s\S]*###RESOURCE_START###--\>/im,""),c=c.replace(/<\!--###RESOURCE_END###[\s\S]*/im,""));return c}};d.requireString=function(c){var b=c.split("."),c=b.pop(),g=b.join("."),a=ovi.getLoadPath(g,c),b=ovi.Rj();b.open("GET",a,!1);b.send(null);
ovi.Ji(b)?(g=ovi.provide(""+g),b=b.responseText,b.replace(/\n/g,""),h[c]&&(b=h[c](b)),g[c]=b):k("Unable to load "+this.Ls+" status: "+b.status)};d.requireI18n=function(c){for(var b=d.config.packages.language,g=b.length,a=c||"nokia.maps";g--;)c=b[g].split("-"),d.requireString(a+".resources.ui.i18n."+(c.length===2?c[0]+"."+c[1]:c[0])+".translation.json")}})(nokia.maps);ovi.provide("nokia.maps.util");
(function(d){function k(a){return function(e){return f.call(e)===a}}function h(f){this.message=f;this.name="ParserError"}var c={},b=Math,g=b.min,a=b.max,b=document,e=b.createElement("p"),l=e.appendChild(b.createTextNode("")),f={}.toString,b="Array Boolean Date Error Function Number Object RegExp String".split(" "),p=b.length;for(d.isArguments=k(f.call(arguments));p--;)d["is"+b[p]]=k(f.call(new this[b[p]]));ovi.extend(d,{Ib:function(f,a){var e;arguments.length>1&&a!==c?(e=Error(f+": "+a),e.type=f):
e=Error(f);throw e;},c:function(f){d.Ib("IllegalArgument",arguments.length?f:c)},hf:function(f){d.Ib("IllegalState",arguments.length?f:c)},Vm:function(f){d.Ib("UnsupportedOperation",arguments.length?f:c)},Ku:function(f){d.Ib("InternalError",arguments.length?f:c)},requestAnimationFrame:function(){var f=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(f)return function(a){return f.call(window,a)};return function(f){return setTimeout(f,
25)}}(),cancelAnimationFrame:function(){var f=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;if(f)return function(a){return f.call(window,a)};return function(f){return clearTimeout(f)}}(),pm:function(f,a){var f=(""+f).split("."),e=f.length,p=0;for(arguments.length<2&&(a=window);p<e&&a!==void 0&&a!==null;p++)a=a[f[p]];return a},now:Date.now||function(){return+new Date},flatMerge:function(f,a,e,p){var l,b;for(l in a)if(b=
a[l],a.hasOwnProperty(l)&&(e||!f.hasOwnProperty(l))&&(!p||p(l,b)))f[l]=b;return f},getRootNameSpace:function(f){return ovi.win[f.split(".")[0]]},J:function(){},Zq:function(){d.Ib("Unimplemented abstract method.",c)},Ne:function(f,a){return(f%a+a)%a},da:function(f,e,p){return g(a(+f,+e),+p)},Uj:function(f){return function(a){return f&&f[a]||null}},hs:self.XPathResult?function(f,a,e){f=(f.ownerDocument||f).evaluate(a,f,new nokia.maps.util.Uj(e),XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);for(a=[];e=
f.iterateNext();)a.push(e);return a||[]}:function(f,a,e){var p=f.ownerDocument||f,l=p.getProperty("SelectionLanguage"),b=p.getProperty("SelectionNamespaces"),g,c="";for(g in e)e.hasOwnProperty(g)&&(c+="xmlns:"+g+'="'+e[g]+'" ');p.setProperty("SelectionLanguage","XPath");p.setProperty("SelectionNamespaces",c);f=f.selectNodes(a);p.setProperty("SelectionLanguage",l);p.setProperty("SelectionNamespaces",b);return f},Xe:function(f){var a,e;if(window.ActiveXObject)a=new ActiveXObject("Microsoft.XMLDOM"),
a.async=!1,a.resolveExternals=!1,a.validateOnParse=!1,a.loadXML(f),a.parseError.errorCode&&(e="error on line ".concat(a.parseError.line,": ",a.parseError.reason));else if(self.DOMParser&&(a=new DOMParser,a=a.parseFromString(f,"text/xml"),ovi.Array.indexOf([a.documentElement.nodeName,(a.documentElement.firstChild||{}).nodeName],"parsererror")>=0))f=a.getElementsByTagName("parsererror")[0],e=(f.childNodes[0].nodeType===3?f.childNodes[0].nodeValue+"\n":"")+f.childNodes[1].firstChild.nodeValue;if(e)throw new h(e);
return a||null},getConstructor:function(f){try{return!f.isNs?f:null}catch(a){return null}},sanitizeText:function(f){l.nodeValue=f;return e.innerHTML},vr:function(){var f=document.createElement("div"),a="";f.innerHTML="<svg></svg>";if(!f.firstChild)return!0;a=f.firstChild.toString();return this.qk||(this.qk=!(!window.SVGSVGElement||!(a==="[object HTMLElement]"||a==="[object SVGSVGElement]")))},uc:function(f,a){for(var e=(f=f.split(" ")).length,p={};e--;)p[f[e]]=a;return p},isWebGl:function(){var f=
null,a=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=document.createElement("canvas"),p=a.length,l;try{for(l=0;l<p&&window.WebGLRenderingContext&&!(f=e.getContext(a[l]));l++);}catch(b){return!1}return f!==null}})})(nokia.maps.util);ovi.provide("nokia.maps.util.services");
(function(d){function k(f){this.an=f||1/0;for(var f=[],a=36,e;a--;)e=Math.floor(Math.random()*16),f[a]="0123456789ABCDEF"[a===14?4:a===19?e&3|8:e];f[8]=f[13]=f[18]=f[23]="-";this.id=f.join("");this.init()}var d=nokia.maps,h=d.config,c=d.util,d=c.services,b=c.now,g=encodeURIComponent,a,e=c.getRootNameSpace("nokia.maps").Settings,l;k.prototype={isAlive:function(){return b()<this.fl+this.an},init:function(){this.fl=b()}};k.getSessionId=function(){if(!a||!a.isAlive())a=new k(h.sessionTTL);a.init();return a.id};
l="&xnlp=CL_JSMv"+g("2.5.1");ovi.extend(d,{getBaseURL:function(f,a,e,l){var b=f.get("secureConnection"),g=h&&h.isChina,c=null,d=null,k=l&&g?".china":"",v=f.get(a+"."+e+k+".baseUrl")||f.get(a+k+".baseUrl"),k=f.get(a+"."+e+k+".secure.baseUrl")||f.get(a+k+".secure.baseUrl"),x=f.get(a+"."+e+".secure.interface")||z,z=f.get(a+"."+e+".interface")||f.get(a+".interface");if(b=="force")return k&&(c=k,d=x||z,c+=d?d+"?":""),c;b=="prefer"&&(c=k,d=x);c||(c=v);d||(d=z||"");d!=""&&(d+="?");c+=d;l&&!g&&(c+="int=true&");
return c},addNlpParams:function(f,a){return f.concat(/[?&]$/.test(f)?"":/[?&]/g.test(f)?"&":"?","app_id=",g(e.app_id),a?"&token=":"&app_code=",g(e.app_code),l,e.noSID?"":",SID_"+g(k.getSessionId()))}});c.Session=k})();ovi.provide("nokia.maps.util.animation.easeFunctions");
(function(d){d.animation.easeFunctions={LINEAR:function(d){return d},EASE_IN_QUAD:function(d){return d*d},EASE_OUT_QUAD:function(d){return-d*(d-2)},EASE_IN_OUT_QUINT:function(d){d*=2;if(d<1)return d*d*d*d*d/2;d-=2;return d*d*d*d*d/2+1},EASE_OUT_CIRC:function(d){return Math.sqrt(2*d-d*d)}}})(nokia.maps.util);ovi&&ovi.provide("nokia.maps.Detector");nokia.maps=nokia.maps||{};
(function(d){function k(d,c){for(var b=c.length,g=null;b--;)if(c[b][0]===d){g=c[b];break}return g}d.Detector=function(d,c){this.definitions=d;this.omitted=c};d.Detector.prototype={detect:function(d){switch(d){case void 0:return this.detect(this.omitted);case "auto":return this.autoDetect();case "none":return null;default:return k(d,this.definitions)===null?null:d}},autoDetect:function(){for(var d=this.definitions,c=d.length,b=0;b<c;b++)if(this.isCapable(d[b][0]))return d[b][0]},isCapable:function(d){return(d=
k(d,this.definitions))&&d[1]()}}})(nokia.maps);ovi.provide("nokia.maps.util.LinkedList");
(function(d){var k=nokia.maps.util.c,h=!h,c=!h,k=nokia.maps.util.c,b=d.LinkedList=Function(),g=d.LinkedList.Element=function(a){this.data=a};ovi.extend(b.prototype,{j:null,l:null,length:0,first:function(){return this.j},last:function(){return this.l},elementOf:function(a,e){for(var l=e||this.j;l&&l.data!==a;)l=l.next;return l||null},lastElementOf:function(a,e){for(var l=e||this.l;l&&l.data!==a;)l=l.prev;return l||null},toArray:function(a){for(var e=this.j,l=[];e;)a?l.push(e):l.push(e.data),e=e.next;
return l},indexOf:function(a){var e=a instanceof g,l=0,f=this.j;if(this.length>0)for(;f;){if(e){if(f===a)return l}else if(f.data===a)return l;l++;f=f.next}return-1},lastIndexOf:function(a){var e=a instanceof g,l=this.length-1,f=this.l;if(this.length>0)for(;f;){if(e){if(f===a)return l}else if(f.data===a)return l;l--;f=f.prev}return-1},get:function(a){var e=this.j;if(a instanceof g)return a;if((a=+a)<0)for(e=this.l;e&&++a;)e=e.prev;else for(;e&&a--;)e=e.next;return e},set:function(a,e){var l=this.j;
if(a instanceof g)l=a,l.list!==this&&k("Invalid index!");else if((a=+a)<0){for(l=this.l;l&&++a;)l=l.prev;if(!l)return this.unshift(e)}else if(a!==a)k("Invalid index!");else{for(;l&&a--;)l=l.next;if(!l)return this.push(e)}if(e instanceof g)return this.splice(a,1,e)&&this;l.data=e;return this},remove:function(a){var e,l;a instanceof g||(a=this.elementOf(a));if(!a||a.list!==this)return c;if(--this.length===0)this.j=this.l=null;else if(this.j===a){if(this.j=a.next)this.j.prev=null}else if(this.l===a){if(this.l=
a.prev)this.l.next=null}else e=a.prev,l=a.next,e.next=l,l.prev=e;a.list=a.prev=a.next=null;return h},sort:function(a,e){var l=this.j,f;if(!l)return this;this.j=this.l=null;for(this.length=0;l;)f=l.next,l.list=l.prev=l.next=null,this.addSorted(a,e,l),l=f;return this},addSorted:function(a,e){for(var l=arguments,f=l.length,e=e||this,p=1,m,b,q;++p<f;)if(b=l[p],b instanceof g?b.list&&b.list.remove(b):b=new g(b),b.list=this,q=this.j,++this.length===1)this.j=this.l=b;else{for(;q;){m=a.call(e,b.data,q.data,
b,q);if(m<=0){b.next=q;q===this.j?this.j=q.prev=b:(b.prev=q.prev,b.prev.next=b,q.prev=b);break}q=q.next}if(m>0)b.prev=this.l,this.l=this.l.next=b}return this},shift:function(){var a;if(this.length<=0)return null;this.length--;a=this.j;if(this.j.next){if(this.j=this.j.next)this.j.prev=null}else this.j=this.l=null;a.list=a.prev=a.next=null;return a},unshift:function(){for(var a=arguments,e=a.length,l,f=-1;++f<e;)l=a[f],l instanceof g?l.list&&l.list.remove(l):l=new g(l),l.list=this,++this.length===1?
this.j=this.l=l:(this.j.prev=l,l.next=this.j,this.j=l);return this.length},next:function(a){a!==void 0&&a!==null&&!(a instanceof g)&&(a=this.elementOf(a));if(!a)return this.j;return a.next},prev:function(a){a!==void 0&&a!==null&&!(a instanceof g)&&(a=this.elementOf(a));if(!a)return this.l;return a.prev},push:function(){for(var a=arguments,e=a.length,l,f=-1;++f<e;)l=a[f],l instanceof g?l.list&&l.list.remove(l):l=new g(l),l.list=this,++this.length===1?this.j=this.l=l:(this.l.next=l,l.prev=this.l,this.l=
l);return this.length},pop:function(){var a=this.l;if(!a)return null;--this.length===0?this.j=this.l=null:(this.l=this.l.prev,this.l.next=null);a.list=a.prev=a.list=null;return a},splice:function(a,e){var l=arguments,f=l.length,p=1,m=this.j,b,q=[],c;if(ovi.type(a)!=="number")a instanceof g?(m=a,!m.list===this&&k("Invalid index given to LinkedList.splice!")):(m=this.elementOf(a))||k("Invalid index given to LinkedList.splice!");else if(a>=0)for(;--a>=0&&m;)m=m.next;else{for(m=this.l;++a<0&&m;)m=m.prev;
if(!m)m=this.j}if(m)for(;--e>=0&&m;){b=m.next;q[q.length]=m;if(--this.length===0)this.j=this.l=m.list=null;else if(m===this.j){if(this.j=m.next)this.j.prev=null;m.next=m.list=null}else m===this.l?(this.l=m.prev,this.l.next=m.prev=m.list=null):(c=m.prev,c.next=m.next,c.next.prev=c,m.prev=m.next=m.list=null);m=b}else m=this.l;if(!m)m=this.l;for(;++p<f;)(c=l[p])instanceof g?c.list&&c.list.remove(c):c=new g(c),++this.length===1?m=this.j=this.l=c:m===this.l?(m.next=c,c.prev=m,m=this.l=c):(c.next=m.next,
c.next.prev=c,c.prev=m,m=m.next=c);return q}});ovi.extend(g.prototype,{list:null,next:null,prev:null})})(nokia.maps.util);ovi.provide("nokia.maps.util.OList");
(function(d){var k=d.c;d.OList=new ovi.Class({initialize:function(d){this.X=ovi.Array(d||[])},I:function(h,c,b){this.X.splice(c,0,h);if(h=this.oa("add",h,c,b))return b&&d.hf(),this.Bb(c,h),h},add:function(d,c){if(arguments.length<2)c=this.X.length;c!==+c&&k();this.I(d,c);return this},addAll:function(d,c){var b=d.length,g=this.X.length,a=0,e=Math;arguments.length<2&&(c=g);c!==+c&&k();for(g=c<0?e.max(0,g+c):e.min(g,c);a<b;a++)this.I(d[a],g+a);return this},remove:function(d){d=this.indexOf(d);return d<
0?null:this.removeAt(d)},removeAll:function(d){for(var c=d.length,b=0;b<c;b++)this.remove(d[b]);return this},Bb:function(h,c){var b=this.X.splice(h,1)[0],g;if(g=this.oa("remove",b,h,c))return c&&d.hf(),this.I(b,h,g),g},removeAt:function(d){var c=this.get(d);return this.Bb(d)?null:c},clear:function(){for(var d=this.X.length;d--;)this.Bb(d)},set:function(d,c){var b;b=this.get(c);if(!this.Bb(c))if(this.I(d,c))this.I(b,c);else return b},indexOf:function(d){return this.X.indexOf(d)},get:function(d){var c=
this.X;(d!==+d>>>0||d>=c.length)&&k();return c[d]},getLength:function(){return this.X.length},asArray:function(){return[].concat(this.X)},oa:function(d,c,b,g){var a=this.ga,e,l;g||(g=1/0);if(a)for(l=0;l in a&&l<g;)if(a[l++].call(a[l++],this,d,c,b)){e=l;break}return e},addObserver:function(h,c){!d.isFunction(h)&&k("callback");var b=this.ga||(this.ga=[]),g=b.length;b[g++]=h;c&&(b[g]=c);b.length=++g},removeObserver:function(d,c){var b,g=0,a;if(b=this.ga)for(a=b.length;g<a;)b[g]===d&&b[g+1]===c&&(b.splice(g,
2),a===2&&delete this.ga),g+=2;return this}})})(nokia.maps.util);ovi.provide("nokia.maps.util.OObject");
(function(d){var k={},h=0;d.OObject=new ovi.Class({initialize:function(c){for(var b in c)this.set(b,c[b])},set:function(c,b,g){var a;if(b===void 0&&g===void 0&&typeof c!=="string")for(a in c)this.cf(a,c[a]);else this.cf(c,b,g);return this},cf:function(c,b,g){if(c!="__proto__"){var a=this[c],e=this[k[c]||++h&&(k[c]=c+"Setter")];h>5E3&&(k={},h=0);if(g||b!==a)e&&(b=e.call(this,b)),a!==b&&this.Fc(c,this[c]=b,a)}},get:function(c){return this[c]},remove:function(c){var b=this[c];this.hasOwnProperty(c)&&
(delete this[c],b!==this[c]&&this.Fc(c,this[c],b))},Fc:function(c,b,g){var a=this.Md,e,l,f=1,p;if(a){p=a["*"];do if(p){p=p.slice(0);e=p.length;for(l=0;l<e;)if(p[l++].call(p[l++],this,c,b,g),this[c]!==b)return}while(f--&&(p=a[c]))}},addObserver:function(c,b,g){var a=this.Md||(this.Md={});(a[c]||(a[c]=[])).push(b,g);return this},removeObserver:function(c,b,g){var a=this.Md,e,l,f=0;if(a&&(e=a[c]))for(l=e.length;f<l;)e[f]===b&&e[f+1]===g&&(e.splice(f,2),l===2&&delete a[c]),f+=2;return this},observersSetter:function(c){for(var b in c)this.addObserver(b,
c[b])}})})(nokia.maps.util);ovi.provide("nokia.maps.util.Point");
(function(d){function k(f,a,e,m){m||(m=0);return a-m<=f&&e+m>=f||a+m>=f&&e-m<=f}var h=Math,c=h.abs,b=h.sqrt,g=h.pow,a=h.round,e=h.floor,l=h.ceil,f=h.min,p=h.max,m=d.c,r=d.Point=function(f,a){this.x=+f;this.y=+a};ovi.extend(r.prototype,{validate:function(){return this.x===+this.x&&this.y===+this.y},equals:function(f){return f?this===f||this.x===f.x&&this.y===f.y:!1},clone:function(){return new r(this.x,this.y)},toString:function(){return this.x+", "+this.y},add:function(f){return new r(this.x+f.x,
this.y+f.y)},sub:function(f){return new r(this.x-f.x,this.y-f.y)},multiply:function(f){return new r(this.x*f,this.y*f)},divide:function(f){f===0&&m("divisor can not be Zero");return new r(this.x/f,this.y/f)},modulo:function(f){f===0&&m("divisor can not be Zero");return new r(this.x%f,this.y%f)},round:function(){return new r(a(this.x),a(this.y))},floor:function(){return new r(e(this.x),e(this.y))},ceil:function(){return new r(l(this.x),l(this.y))},len:function(){return b(this.x*this.x+this.y*this.y)},
min:function(a){return new r(f(this.x,a.x),f(this.y,a.y))},max:function(f){return new r(p(this.x,f.x),p(this.y,f.y))},span:function(f){return new r(c(this.x-f.x),c(this.y-f.y))},distance:function(f){return b(g(this.x-f.x,2)+g(this.y-f.y,2))},getNearest:function(f,a){var e=a.x-f.x,m=a.y-f.y,p;p=f;if(e||m)p=((this.x-f.x)*e+(this.y-f.y)*m)/(e*e+m*m),p=p<=0?f:p>=1?a:new r(f.x+p*e,f.y+p*m);return p},isCoveredBy:function(f,a,e){return r.isCoveredBy(this.x,this.y,f,a,e)}});r.fromObject=function(f){var a,
e;return f instanceof r?f:f&&("x"in f&&"y"in f&&(a=f.x,e=f.y,1)||f.length===2&&(a=f[0],e=f[1],1))?new r(a,e):null};r.isCoveredBy=function(f,a,e,m,p){for(var l=e.length,r=l,c,d,h,D=e[0],E,G=0,N=0,Q=m/2||0,X=p?1:3;E!="V"&&r>X;){c=e[--r];m=e[--r];h=e[r?r-1:(l+(r-1))%l];d=e[r?r-2:(l+(r-2))%l];if(m>=f-Q&&m<=f+Q&&c>=a-Q&&c<=a+Q||d>=f-Q&&d<=f+Q&&h>=a-Q&&h<=a+Q)E="V";else if(!E&&m===f)d===f&&(c<a&&h>a||c>a&&h<a)||(D<=f&&d>f||D>=f&&d<f)&&(c>=a?++G:++N),E=k(a,c,h,Q)&&b(g((f-d)*(c-h)-(a-h)*(m-d),2)/(g(m-d,2)+
g(c-h,2)))<=Q&&"E";else if(!E&&k(f,m,d,Q)){if(m<f&&d>f||m>f&&d<f)D=c+(h-c)*((f-m)/(d-m)),G+=D>a,N+=D<a;E=k(a,c,h,Q)&&b(g((f-d)*(c-h)-(a-h)*(m-d),2)/(g(m-d,2)+g(c-h,2)))<=Q&&"E"}D=m}return p&&E==="S"&&E||E||p&&N&&G%2&&"S"||!1};r.prototype.toString=function(){return this.x+", "+this.y}})(nokia.maps.util);ovi.provide("nokia.maps.util.Rectangle");
(function(d){var k=Math.max,h=d.Point,c=d.Rectangle=function(b){for(var g=b.length,a=this.topLeft=b[0].clone(),e=this.bottomRight=a.clone(),l,f;--g>=0;){f=(l=b[g]).x;l=l.y;if(f<a.x)a.x=f;else if(f>e.x)e.x=f;if(l<a.y)a.y=l;else if(l>e.y)e.y=l}return this};ovi.extend(c.prototype,{equals:function(b){var g,a,e,l;return!!b&&(g=this.topLeft).x===(e=b.topLeft).x&&g.y===e.y&&(a=this.bottomRight).x===(l=b.bottomRight).x&&a.y===l.y},addPoint:function(b){return new c([this.topLeft,this.bottomRight,b])},addPoints:function(b){return b.length?
new c(b.concat(this.topLeft,this.bottomRight)):this},getCenter:function(){var b=this.topLeft,g=this.bottomRight;return new h((b.x+g.x)/2,(b.y+g.y)/2)},centerTo:function(b){var g=this.bottomRight,a=b.span(this.topLeft),e=b.span(g),g=k(a.x,e.x),a=k(a.y,e.y);return new c([new h(b.x-g,b.y-a),new h(b.x+g,b.y+a)])},intersection:function(b){var g,a;return b&&(g=this.topLeft.max(b.topLeft||b)).x<=(a=this.bottomRight.min(b.bottomRight||b)).x&&g.y<=a.y?new c([g,a]):null},merge:function(b){return b?new c([this.topLeft.min(b.topLeft||
b),this.bottomRight.max(b.bottomRight||b)]):this.clone()},pad:function(b){return b?new c([this.topLeft.sub(new h(b,b)),this.bottomRight.add(new h(b,b))]):this.clone()},getWidth:function(){return this.bottomRight.x-this.topLeft.x},getHeight:function(){return this.bottomRight.y-this.topLeft.y},toString:function(){return"{ "+this.topLeft+", "+this.bottomRight+" }"},contains:function(b){if(b)var g=this.topLeft,a=this.bottomRight,e=e=b.topLeft||b,l=b.bottomRight||b;return!!b&&g.x<=e.x&&g.y<=e.y&&a.x>=
l.x&&a.y>=l.y},clone:function(){return new c([this.topLeft,this.bottomRight])},initialize:c});c.prototype.toString=function(){return"{ "+this.topLeft+", "+this.bottomRight+" }"}})(nokia.maps.util);ovi.provide("nokia.maps.util.RTreeNode");
(function(d){var k=Math.max,h=Math.min;d.RTreeNode=new ovi.Class({initialize:function(c,b){this.Leaf=c;this.ParentNode=b||null;this.Entries=[]},Leaf:null,Root:null,ParentNode:null,ParentEntry:null,Entries:null,X1:0,X2:0,Y1:0,Y2:0,Volume:null,addChild:function(c){this.Entries.push(c);this.Leaf=!1;c.ParentNode=this;c.ParentEntry=this.Entries.length-1;this.updateBoundingBox(c.X1,c.X2,c.Y1,c.Y2)},removeChild:function(c,b){for(var g=this.Entries,a=g.splice(c,1)[0],e=c,l=g.length;e<l;e++)g[e].ParentEntry--;
b&&this.calculateBoundingBox();return a},calculateBoundingBox:function(){var c=this.Entries,b=c.length;this.X1=Infinity;this.X2=-Infinity;this.Y1=Infinity;for(this.Y2=-Infinity;entry=c[--b];){if(entry.X1<this.X1)this.X1=entry.X1;if(entry.Y1<this.Y1)this.Y1=entry.Y1;if(entry.X2>this.X2)this.X2=entry.X2;if(entry.Y2>this.Y2)this.Y2=entry.Y2}this.Volume=(this.X2-this.X1)*(this.Y2-this.Y1)},updateBoundingBox:function(c,b,g,a){this.Volume===null?(this.X1=c,this.X2=b,this.Y1=g,this.Y2=a):(this.X1=h(c,this.X1),
this.X2=k(b,this.X2),this.Y1=h(g,this.Y1),this.Y2=k(a,this.Y2));this.Volume=(this.X2-this.X1)*(this.Y2-this.Y1)},getEnlargement:function(c,b,g,a){return(k(this.X2,b)-h(this.X1,c))*(k(this.Y2,a)-h(this.Y1,g))-this.Volume},overlaps:function(c,b,g,a){return c<this.X2&&b>this.X1&&g<this.Y2&&a>this.Y1}})})(nokia.maps.util);ovi.provide("nokia.maps.util.RTreeRecord");
(function(d){var k=Math.max,h=Math.min;d.RTreeRecord=new ovi.Class({initialize:function(c,b,g,a){var e;c>g&&(e=c,c=g,g=e);b>a&&(e=b,b=a,a=e);this.X1=c||0;this.Y1=b||0;this.X2=g||0;this.Y2=a||0;this.Leaf=!0},Id:null,X1:0,X2:0,Y1:0,Y2:0,Volume:null,Priority:32,getEnlargement:function(c,b,g,a){return(k(this.X2,b)-h(this.X1,c))*(k(this.Y2,a)-h(this.Y1,g))-this.Volume},overlaps:function(c,b,g,a){return c<this.X2&&b>this.X1&&g<this.Y2&&a>this.Y1}})})(nokia.maps.util);ovi.provide("ovi.Logger");
(function(d){function k(b,g){for(var a=c.length-1;a>-1;--a)try{c[a][b].apply(c[a],g)}catch(e){}}var h=!0,c=[];d.Logger={addLogger:function(b){if(b===null||typeof b!=="object"||typeof b.debug!=="function"||typeof b.info!=="function"||typeof b.warn!=="function"||typeof b.error!=="function")throw new TypeError("Illegal logger object");for(var g=c.length-1;g>-1;--g)if(c[g]===b)return k("warn",["The logger is already attached"]),!1;typeof b.initLogger==="function"&&b.initLogger();c.push(b);return!0},removeLogger:function(b){for(var g=
c.length-1;g>-1;--g)if(c[g]===b)return c.splice(g,1),typeof b.cleanupLogger==="function"&&b.cleanupLogger(),!0;k("warn",["The passed logger wasn't attached"]);return!1},removeAllLoggers:function(){var b=c;c=[];for(var g=b.length-1;g>-1;--g)if(typeof b[g].cleanupLogger==="function")try{b[g].cleanupLogger()}catch(a){}},isEnabled:function(){return h},enable:function(){h=!0},disable:function(){h=!1},debug:function(){h&&k("debug",arguments)},info:function(){h&&k("info",arguments)},warn:function(){h&&k("warn",
arguments)},error:function(){h&&k("error",arguments)}};d.debug=function(){d.Logger.debug.apply(this,arguments)};d.info=function(){d.Logger.info.apply(this,arguments)};d.warn=function(){d.Logger.warn.apply(this,arguments)};d.error=function(){d.Logger.error.apply(this,arguments)}})(ovi);ovi.provide("nokia.maps.util.Vector3D");
(function(d){var k=Math,h=d.c,c=k.sqrt,b=k.acos,g=180/Math.PI,a;d.Vector3D=a=function(a,l,f){this.x=+a;this.y=+l;this.z=+f};ovi.extend(a.prototype,{add:function(e){return new a(this.x+e.x,this.y+e.y,this.z+e.z)},subtract:function(e){return new a(this.x-e.x,this.y-e.y,this.z-e.z)},multiply:function(e){e instanceof a||h("Parameter should be an instanceof nokia.maps.util.Vector3D");return new a(this.x*e.x,this.y*e.y,this.z*e.z)},divide:function(e){(e.x===0||e.y===0||e.z===0)&&h("Vectors should not be divided by zero");
return new a(this.x/e.x,this.y/e.y,this.z/e.z)},angle:function(a,l,f,p){a=+a||0;f=f?a-this.x:this.x-a;a=p?a-this.y:this.y-(+l||0);a=!f&&!a?0:b(a/c(f*f+a*a))*g;f<0&&(a=360-a);return a},dot:function(a){a=this.multiply(a);return a.x+a.y+a.z},magnitude:function(){return c(this.dot(this))},normal:function(e){var l=this.x,f=this.y,p=this.z,m=e.x,b=e.y,e=e.z;return new a(f*e-p*b,-(l*e-p*m),l*b-f*m)},normalize:function(){var e=this.magnitude();return new a(this.x/e,this.y/e,this.z/e)}})})(nokia.maps.util);
ovi.provide("nokia.maps.util.Matrix3D");
(function(d){var k=Math,h=k.sqrt,c=k.sin,b=k.cos,g=k.tan,a=d.Point,e=d.Vector3D,l=d.Matrix3D=function(f){this.rows=f||[[1,0,0,0],[0,1,0,0],[0,0,1,0]]};ovi.extend(l.prototype,{ja:function(f){for(var a=this.rows,e=[[],[],[]],b=f[0],q=f[1],f=f[2],g,c,d,h,k,x=3;x--;)g=e[x],c=a[x],d=c[0],h=c[1],k=c[2],g[0]=d*b[0]+h*q[0]+k*f[0],g[1]=d*b[1]+h*q[1]+k*f[1],g[2]=d*b[2]+h*q[2]+k*f[2],g[3]=d*b[3]+h*q[3]+k*f[3]+c[3];return new l(e)},concat:function(f){return this.ja(f.rows)},scale:function(f,a,e){return this.ja([[f,
0,0,0],[0,a,0,0],[0,0,e,0]])},getScale:function(){var f=this.rows[0],a=this.rows[1],m=this.rows[2];return new e(h(f[0]*f[0]+f[1]*f[1]+f[2]*f[2]),h(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),h(m[0]*m[0]+m[1]*m[1]+m[2]*m[2]))},translate:function(f,a,e){return this.ja([[1,0,0,f],[0,1,0,a],[0,0,1,e]])},getTranslate:function(){return new e(this.rows[0][3],this.rows[1][3],this.rows[2][3])},rotateX:function(f){var a=c(f),f=b(f);return this.ja([[1,0,0,0],[0,f,a,0],[0,-a,f,0]])},rotateY:function(f){var a=c(f),f=b(f);
return this.ja([[f,0,-a,0],[0,1,0,0],[a,0,f,0]])},rotateZ:function(f){var a=c(f),f=b(f);return this.ja([[f,a,0,0],[-a,f,0,0],[0,0,1,0]])},skewX:function(f){return this.ja([[1,g(f),0,0],[0,1,0,0],[0,0,1,0]])},skewY:function(f){return this.ja([[1,0,0,0],[g(f),1,0,0],[0,0,1,0]])},transformVector:function(f){var a=this.rows,m=a[0],b=a[1],a=a[2],l=f.x,g=f.y,f=f.z;return new e(m[0]*l+m[1]*g+m[2]*f+m[3],b[0]*l+b[1]*g+b[2]*f+b[3],a[0]*l+a[1]*g+a[2]*f+a[3])},transformPoint:function(f){var e=this.rows,m=e[0],
e=e[1],b=f.x,f=f.y;return new a(m[0]*b+m[1]*f+m[3],e[0]*b+e[1]*f+e[3])},transformVectors:function(f,a){var e=this.rows,b=e[0],l=e[1],e=e[2],g,c,d,h,k=f.length;for(h=0;h<k;)g=+f[h++],c=+f[h++],d=+f[h++],a.splice.apply(a,[a.length,0,b[0]*g+b[1]*c+b[2]*d+b[3],l[0]*g+l[1]*c+l[2]*d+l[3],e[0]*g+e[1]*c+e[2]*d+e[3]])},transformPoints:function(f,a){var e=this.rows,b=e[0],e=e[1],l,g,c,d=f.length;for(c=0;c<d;)l=+f[c++],g=+f[c++],a.splice.apply(a,[a.length,0,b[0]*l+b[1]*g+b[3],e[0]*l+e[1]*g+e[3]])},clone:function(){for(var f=
this.rows,a=[],e=-1;++e<3;)a.push([].concat(f[e]));return ovi.extend(new l(a),this)},inverse:function(){var f=this.rows,a=f[0][0],e=f[0][1],b=f[0][2],q=f[1][0],g=f[1][1],c=f[1][2],d=f[2][0],h=f[2][1],k=f[2][2],x=a*(g*k-c*h)-e*(k*q-c*d)+b*(q*h-g*d);if(x===0)return null;return new l([[(g*k-c*h)/x,(b*h-e*k)/x,(e*c-b*g)/x,-f[0][3]],[(c*d-q*k)/x,(a*k-b*d)/x,(b*q-a*c)/x,-f[1][3]],[(q*h-g*d)/x,(d*e-a*h)/x,(a*g-e*q)/x,-f[2][3]]])}})})(nokia.maps.util);ovi.provide("nokia.maps.util.math.clipping");
(function(d){function k(f){for(var a,e,b=0,l=f.length;b<l;b++){a=m(f[b].x,f[b].y,e,null,0,0);if(a.next=e)e.prev=a;e=a}return e}function h(f,a,e){for(;a!=e&&a.alpha<f.alpha;)a=a.next;f.next=a;f.prev=a.prev;f.next.prev=f;f.prev.next=f}function c(f,a){var e,l,p=0,r;m(0,f.y,null,null,0,0);l=m(-2147483648,f.y,null,null,0,0);for(e=a;e.next;e=e.next)(r=b(l,f,e,e.next,{}))&&p++;return p%2}function b(f,a,e,m,b){var l,p;p=(a.x-f.x)*(m.y-e.y)-(a.y-f.y)*(m.x-e.x);var r;if(!p&&(f.origx=f.x,f.origy=f.y,f.x+=(y()-
0.5)/1E4,f.y+=(y()-0.5)/1E4,p=(a.x-f.x)*(m.y-e.y)-(a.y-f.y)*(m.x-e.x),!p))return 0;l=((e.x-f.x)*(m.y-e.y)-(e.y-f.y)*(m.x-e.x))/p;p=((a.y-f.y)*(e.x-f.x)-(a.x-f.x)*(e.y-f.y))/p;if(l<0||l>1||p<0||p>1)return 0;g(f,a,e,m,b,l);if(b.alpha_p===0&&(r=b.alpha_q)>=0&&r<=1){if(!f.origx)f.origx=f.x,f.origy=f.y;f.x+=(y()-0.5)/1E4;f.y+=(y()-0.5)/1E4;g(f,a,e,m,b,l)}return 1}function g(f,e,m,b,l,p){var r=f.x+p*(e.x-f.x),p=f.y+p*(e.y-f.y);l.alpha_p=a(f.x,f.y,r,p)/a(f.x,f.y,e.x,e.y);l.alpha_q=a(m.x,m.y,r,p)/a(m.x,m.y,
b.x,b.y);l.xi=1*r;l.yi=1*p}function a(f,a,e,m){return q((f-e)*(f-e)+(a-m)*(a-m))}function e(a){var e=f(a);e.prev.next=a;a.prev=e.prev}function l(f){var a=f;if(a){do a=a.next;while(a!=f&&(!a.intersect||a.intersect&&a.visited))}return a}function f(f){if(f)for(;f.next;)f=f.next;return f}function p(f){for(;f&&f.intersect;)f=f.next;return f}function m(f,a,e,m,b,l){var p={};p.x=f;p.y=a;p.next=e;if(p.prev=m)p.prev.next=p;if(e)p.next.prev=p;p.nextPoly=null;p.neighbor=null;p.intersect=b;p.entry=0;p.visited=
0;p.alpha=l;return p}var d=d.util,r=d.Point,q=Math.sqrt,y=Math.random,s;d.math.clipping={Ar:s=function(f,a,e,m,b,l){var p=f.x,f=-f.y,q=a.x,a=-a.y,g,c,d,e=-e,l=-l;if(p>q){if(q>b||p<m)return;d=p;c=f;p=q;f=a;q=d;a=c;d=1}else if(p>b||q<m)return;if(f>a){if(a>e||f<l)return;g=1;f=-f;a=-a;c=l;l=-e;e=-c}else if(f>e||a<l)return;if(p<m){if((f+=(m-p)*(a-f)/(q-p))>e)return;p=m}if(f<l){if((p+=(l-f)*(q-p)/(a-f))>b)return;f=l}q>b&&(a=f+(b-p)*(a-f)/(q-p),q=b);a>e&&(q=p+(e-f)*(q-p)/(a-f),a=e);g&&(f=-f,a=-a);return d?
[new r(q,-a),new r(p,-f)]:[new r(p,-f),new r(q,-a)]},clipStrips:function(f,a,e,m,b){var l,p,r=f.length,q,g,c,d,h,k,y;if(r){for(l=[];r--;){k=f[r];d=k.length;h=0;for(q=1;q<d;q++)if(y=s(k[q-1],k[q],a,e,m,b))g=y[0],c=y[1],h&&h.equals(g)?p.push(c):l.push(p=y),h=c}d=l.length;d>1&&l[0][0].equals(l[d-1][l[d-1].length-1])&&l[0].splice.apply(l[0],[0,1].concat(l.splice(d-1,1)[0]))}else l=f;return l},INTERSECTION:0,UNION:1,COMPONENT_SHAPE:2,COMPONENT_WINDOW:3,clip:function(a,r,q){var a=k(a),r=k(r),g,d,s,y,D,
E,G;E={};d=g=1;switch(~~(1*q)){case 1:d=g=0;break;case 2:g=0;d=1;break;case 3:g=1,d=0}g={pS:g,pC:d};var q=g.pS,N=g.pC,Q,X,J;if(r&&a){g=f(r);m(r.x,r.y,null,g,0,0);d=f(a);m(a.x,a.y,null,d,0,0);for(g=r;g.next;g=g.next)if(!g.intersect)for(d=a;d.next;d=d.next)if(!d.intersect&&(Q=p(g.next),X=p(d.next),s=b(g,Q,d,X,E)))s=E.alpha_p,G=E.alpha_q,y=E.xi,D=E.yi,s=m(y,D,null,null,1,s),y=m(y,D,null,null,1,G),s.neighbor=y,y.neighbor=s,h(s,g,Q),h(y,d,X);E=c(r,a);q&&(E=1-E);for(g=r;g.next;g=g.next)if(g.intersect)g.entry=
E,E=1-E;E=c(a,r);N&&(E=1-E);for(d=a;d.next;d=d.next)if(d.intersect)d.entry=E,E=1-E;e(r);for(e(a);(a=l(r))!=r;){for(q=null;!a.visited;a=a.neighbor)for(E=a.entry;;)if(q=m(a.x,a.y,q,null,0,0),a.visited=1,a=E?a.next:a.prev,a.intersect){a.visited=1;break}q.nextPoly=J;J=q}return J}}}})(nokia.maps);ovi.provide("nokia.maps.util.IBox");ovi.provide("nokia.maps.gfx.Color");
(function(){var d=Math,k=d.round,h=d.min,c=d.max,b=ovi.type,g=RegExp("^\\s*(maroon|red|orange|yellow|olive|purple|fuchsia|white|lime|green|navy|blue|aqua|teal|black|silver|gray|grey|pink)\\s*$|^\\s*[#]?([0-9a-f]{8,8})\\s*$|^\\s*[#]?([0-9a-f]{6,6})\\s*$|^\\s*[#]?([0-9a-f]{4,4})\\s*$|^\\s*[#]?([0-9a-f]{3,3})\\s*$|^\\s*(rgb[a]?)\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,?\\s*(\\d*[.]{0,1}\\d*)?\\s*\\)\\s*$","i"),a={maroon:"800000",red:"ff0000",orange:"ffa500",yellow:"ffff00",olive:"808000",purple:"800080",
fuchsia:"ff00ff",white:"ffffff",lime:"00ff00",green:"008000",navy:"000080",blue:"0000ff",aqua:"00ffff",teal:"008080",black:"000000",silver:"c0c0c0",gray:"808080",grey:"808080",pink:"FFC0CB"},e=nokia.maps.gfx.Color=new ovi.Class({Statics:{byteOf:function(a){return k(+a*255)&255},percentOf:function(a){a=+a*0.003921569;return a>1?1:a<0?0:a},compress:function(a,f,e,m){return(+a&255)<<24|(+f&255)<<16|(+e&255)<<8|+m&255},red:function(a){return+a>>>24},green:function(a){return+a>>>16&255},blue:function(a){return+a>>>
8&255},alpha:function(a){return+a&255},parseCss:function(l,f){var p=b(f)==="number"?k(f*255)&255:255,m=p.toString(16).toLowerCase(),r,q,d,s=g.exec(l);if(!s||s.length<2)return null;m.length<2&&(m="0"+m);if(s[1])q=a[s[1]]+m;else if(s[2])q=s[2];else if(s[3])q=s[3]+m;else if((r=s[4])||(r=s[5]))q=r.charAt(0)+r.charAt(0)+r.charAt(1)+r.charAt(1)+r.charAt(2)+r.charAt(2)+(r.length===4?r.charAt(3)+r.charAt(3):m);else if(s[6])return m=+s[7]&255,r=+s[8]&255,q=+s[9]&255,d=isNaN(d=h(1,c(0,s[10])))?p:e.byteOf(d)&
255,e.compress(m,r,q,d);if(q&&q.length===8)return parseInt("0x"+q,16)&4294967295;return null},getCssRGBA:function(a){return e.getCssRGB(a,!0)},getCssRGB:function(a,f){return"rgb"+(f=f===!0?"a":"")+"("+e.red(a)+", "+e.green(a)+", "+e.blue(a)+(f?", "+k(e.percentOf(e.alpha(a))*1E10)/1E10:"")+")"},getCssHex:function(a,f,e){a=+a;(f=b(f)==="boolean"?f:!1)||(a>>>=8);a<0&&(a=4294967296+a);e=e||"#";a=a.toString(16);for(f=f?8:6;a.length<f;)a="0"+a;return e+a}}})})();ovi.provide("nokia.maps.util.Brush");
(function(d){var k=nokia.maps.gfx.Color;d.Brush=new ovi.Class({color:"#05A6",fill:"solid",initialize:function(h,c){var b,g,a=d.c;h&&("color"in h&&(b=k.parseCss(h.color),b===null&&a("Invalid color set!")),"fill"in h&&h.fill!=="solid"&&h.fill!=="none"&&a("Invalid fill set!"));if(c instanceof nokia.maps.util.Brush)for(g in c)this[g]=c[g];for(g in h)this[g]=h[g]}})})(nokia.maps.util);ovi.provide("ovi.dom.common");
ovi.dom.addEvent=function(d,k,h,c){d.addEventListener?d.addEventListener(k,h,c!==void 0?c:!1):d.attachEvent&&d.attachEvent("on"+k,h)};ovi.dom.removeEvent=function(d,k,h,c){d.removeEventListener?d.removeEventListener(k,h,c!==void 0?c:!1):d.detachEvent&&d.detachEvent("on"+k,h)};ovi.dom.addClass=function(d){for(var k=Array.prototype.slice.call(arguments,1),h=d.className,c=" "+h+" ",b=0,g;g=k[b++];)c.indexOf(" "+g+" ")===-1&&(h+=(h?" ":"")+g);return d.className=h};
ovi.dom.removeClass=function(d){for(var k=Array.prototype.slice.call(arguments,1),h=d.className.split(" "),c=0,b=0,g=h.length,a;a=k[c++];)for(b=g;b--;)a===h[b]&&h.splice(b,1);return d.className=h.join(" ")};ovi.dom.hasClass=function(d){for(var k=Array.prototype.slice.call(arguments,1),h=" "+d.className+" ",c=k.length,b=0,g;c&&(g=k[b++]);)c=h.indexOf(" "+g+" ")>-1;return c};
ovi.dom.toggleClass=function(d){for(var k=Array.prototype.slice.call(arguments,1),h=" "+d.className+" ",c,b=0,g=k.length;b<g;b++)c=k[b],(h.indexOf(" "+c+" ")>-1?ovi.dom.removeClass:ovi.dom.addClass)(d,c)};ovi.dom.offset=function(d,k){var h=d.getBoundingClientRect(),c=d.ownerDocument,b=c.documentElement,g=c.body,c=h.top+(b.scrollTop||g.scrollTop)-b.clientTop,h=h.left+(b.scrollLeft||g.scrollLeft)-b.clientLeft;k&&(b=ovi.dom.offset(k),c-=b.top,h-=b.left);return{top:c,left:h}};
ovi.dom.dimensions=function(d){if("scrollTo"in d&&d.document)return d=d.document.documentElement,{width:d.clientWidth,height:d.clientHeight};return{width:d.offsetWidth,height:d.offsetHeight}};
ovi.dom.getStyle=function(){if(window.getComputedStyle){var d=["moz","ms","webkit"];ovi.dom.getStyle=function(c,b){var g=c.ownerDocument.defaultView;if(!g)return null;var g=g.getComputedStyle(c,null),a=g.getPropertyValue(b);if(a)return a;for(var e=0,l=d.length;e<l;e++)if(a=g.getPropertyValue("-"+d[e]+"-"+b))return a;return null}}else{var k=/-([a-z])/ig,h=function(c,b){return b.toUpperCase()};ovi.dom.getStyle=function(c,b){b=b==="float"?"styleFloat":b.replace(k,h);return c.currentStyle[b]||c.currentStyle["Ms"+
b.charAt(0).toUpperCase()+b.slice(1)]||null}}return ovi.dom.getStyle.apply(null,arguments)};ovi.provide("nokia.maps.map.component.Component");
(function(d){var k=nokia.maps.util.c,h={"2d":"MAP_2D","3d":"GLOBE",panorama:"PANORAMA"},c=d.Component=new ovi.Class({Extends:nokia.maps.util.OObject,getId:function(){if(window)return this.d},getVersion:function(){return this.n},queryReference:function(){this.lh++;return this},releaseReference:function(){return--this.lh},attach:function(b){this.mapDisplay&&k("Error: A component can only be attached to one display!");this.mapDisplay=b},detach:function(){delete this.mapDisplay},destroy:nokia.maps.util.J,
isCompatible:function(b){return this.q&this[h[b]]},MAP_2D:1,PANORAMA:2,GLOBE:4,lh:1,q:0});ovi.Array("Overview TypeSelector DistanceMeasurement InfoBubbles ScaleBar ViewControl ZoomBar ZoomRectangle OverlaysSelector ContextMenu Traffic TrafficIncidents Panorama PublicTransport FooBar".split(" ")).forEach(function(b){d[b]=function(){ovi.warn("There is no UI defined for the display. Are you missing the UI package?");return new c({d:b+"Dummy",n:"0"})}})})(nokia.maps.map.component);ovi.provide("nokia.maps.positioning._packaging.base");
ovi.provide("ovi.json");
(function(){function d(d,c){if(typeof c==="string"){var b=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?Z$/.exec(c);if(b)return new Date(Date.UTC(+b[1],+b[2]-1,+b[3],+b[4],+b[5],+b[6],+b[8]||0))}return c}var k=window.JSON||{};window.JSON||function(){function d(f){return f<10?"0"+f:f}function c(e){a.lastIndex=0;return a.test(e)?'"'+e.replace(a,function(a){var e=f[a];return typeof e==="string"?e:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function b(f,a){var g,
s,k,w,v=e,x,z=a[f];z&&typeof z==="object"&&(g=Object.prototype.toString.apply(z),g==="[object Date]"?z=z.getUTCFullYear()+"-"+d(z.getUTCMonth()+1)+"-"+d(z.getUTCDate())+"T"+d(z.getUTCHours())+":"+d(z.getUTCMinutes())+":"+d(z.getUTCSeconds())+"Z":m.test(g)&&(z=z.valueOf()));typeof p==="function"&&(z=p.call(a,f,z));switch(typeof z){case "string":return c(z);case "number":return isFinite(z)?String(z):"null";case "boolean":case "null":return String(z);case "object":if(!z)return"null";e+=l;x=[];if(Object.prototype.toString.apply(z)===
"[object Array]"){w=z.length;for(g=0;g<w;g+=1)x[g]=b(g,z)||"null";k=x.length===0?"[]":e?"[\n"+e+x.join(",\n"+e)+"\n"+v+"]":"["+x.join(",")+"]";e=v;return k}if(p&&typeof p==="object"){w=p.length;for(g=0;g<w;g+=1)s=p[g],typeof s==="string"&&(k=b(s,z))&&x.push(c(s)+(e?": ":":")+k)}else for(s in z)Object.hasOwnProperty.call(z,s)&&(k=b(s,z))&&x.push(c(s)+(e?": ":":")+k);k=x.length===0?"{}":e?"{\n"+e+x.join(",\n"+e)+"\n"+v+"}":"{"+x.join(",")+"}";e=v;return k}}var g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,f={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p,m=/\[object (String|Number|Boolean)\]/;if(typeof k.stringify!=="function")k.stringify=function(f,a,m){var g;l=e="";if(typeof m==="number")for(g=0;g<m;g+=1)l+=" ";else typeof m==="string"&&(l=m);if((p=a)&&typeof a!=="function"&&(typeof a!=="object"||typeof a.length!=="number"))throw Error("JSON.stringify");
return b("",{"":f})};if(typeof k.parse!=="function")k.parse=function(f,a){function e(f,m){var b,p,l=f[m];if(l&&typeof l==="object")for(b in l)Object.hasOwnProperty.call(l,b)&&(p=e(l,b),p!==void 0?l[b]=p:delete l[b]);return a.call(f,m,l)}var m;g.lastIndex=0;g.test(f)&&(f=f.replace(g,function(f){return"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(f.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return m=eval("("+f+")"),typeof a==="function"?e({"":m},""):m;throw new SyntaxError("JSON.parse");}}();ovi.json={parse:function(h,c){return k.parse(h,c===void 0?d:c)},stringify:k.stringify}})();ovi.provide("nokia.maps.net.IResult");ovi.provide("nokia.maps.behavior._packaging.base");ovi.provide("nokia.maps.map._packaging.base");ovi.provide("nokia.maps.dom.Touch");ovi.provide("nokia.maps.dom");
(function(d){function k(b,a){var e=a.width,l=a.height,f=b.getContext&&b.getContext("2d");if(f)f.globalCompositeOperation="copy",f.drawImage(a,0,0,e,l,0,0,e,l);b.$n$opacity=a.$n$opacity;b.$n$width=a.$n$width;b.$n$height=a.$n$height}var h=null,c=function(){var b=document.createElement("script");b.text="//";return!b.cloneNode(!0).text}(),b=ovi.browser.msie;ovi.extend(d,{contains:b?function(b,a){var e=ovi.type(b),l=ovi.type(a);return(e=="document"||e=="element")&&(l=="element"||l=="textnode")?b.contains(a):
!1}:function(b,a){for(;a;){if(a===b)return!0;a=a.parentNode}return!1},cloneNode:c?function(b,a){for(var e=b.cloneNode(!!a),l=b.getElementsByTagName("script"),f=e.getElementsByTagName("script"),p=l.length;p--;)f[p].text=l[p].text;if(b.nodeName==="SCRIPT")e.text=b.text;a&&k(e,b);return e}:function(b,a){var e=b.cloneNode(!!a);a&&k(e,b);return e},importNode:document.importNode&&document.importNode.toString().indexOf("[native code]")>0&&!b?function(b,a,e){b=b.importNode(a,!!e);e&&k(b,a);return b}:function(b,
a,e){var l,f,p,m,r;if(b!==a.ownerDocument){p=a.attributes;l=b.createElement(a.nodeName);for(f=p.length;f--;)if((m=p[f]).specified)(r=m.name)==="style"?l.style.cssText=a.style.cssText:r==="class"?l.className=a.className:l.setAttribute(r,m.value);if(e)for(f=a.firstChild;f;)l.appendChild(d.importNode(b,f,e)),f=f.nextSibling}else l=a.cloneNode(!!e);e&&k(l,a);return l},isQuirksMode:function(b){ovi.type(b)!=="document"&&(b=document);if(!b||typeof b.compatMode!=="string")return!0;return b.compatMode==="BackCompat"||
b.compatMode==="QuirksMode"},getWindowSize:function(b){if(ovi.type(b)!=="window"&&(b=window,ovi.type(b)!=="window"))return null;var a=document.images&&document.compatMode&&document.compatMode.indexOf("CSS1")>=0,e=b.document;if(b.innerWidth)return{width:b.innerWidth,height:b.innerHeight};if(a)return b=e.body.parentElement,{width:b.clientWidth,height:b.clientHeight};if(e.body&&e.body.clientWidth)return{width:e.body.clientWidth,height:e.body.clientHeight};return null},setStyle:function(b,a){var e={constructor:!0,
prototype:!0};if(a&&b&&b.style)for(var l in a)!e[l]&&l in b.style&&(b.style[l]=a[l]);return b},getStyle:function(b,a){if(document.defaultView&&document.defaultView.getComputedStyle){var e=b.ownerDocument.defaultView.getComputedStyle(b,"");if(!e)return!1;return e[a]}else return b.currentStyle[a]},ownerWindow:function(b){var a=ovi.type(b),e=null;if(!b)return null;if(a==="window")return b;if(a==="document")e=b;else if(b.ownerDocument)e=b.ownerDocument;else return null;return e.parentWindow||e.defaultView},
getScrollBarSize:function(){if(h)return h;var b=document,a=0,e=0,l=0,f=0,p=0,m=0,r=b.createElement("P"),q=b.createElement("P"),c,d;try{c=r.style;d=q.style;c.height="200px";c.width="200px";d.position="absolute";d.top=0;d.left=0;d.visibility="hidden";d.width="100px";d.height="100px";d.overflow="hidden";q.appendChild(r);b.body.appendChild(q);e=q.offsetWidth;p=q.offsetHeight;d.overflow="scroll";l=q.offsetWidth;m=q.offsetHeight;if(e===l)l=q.clientWidth;if(p===m)m=q.clientHeight;b.body.removeChild(q);a=
e-l;f=p-m}catch(k){f=a=0}return f!==f||a!==a||f<=0||a<=0?h={width:17,height:17}:h={width:a,height:f}},Qa:function(b,a,e,l){a=b.ownerDocument.createElement(a);if(e)a.className=e;if(l)a.style.cssText=l;b.appendChild(a);return a},Yj:function(b,a){var e=b.styleSheets,l=e.length,f,p,m=b.createElement("style");m.setAttribute("type","text/css");b.getElementsByTagName("head")[0].appendChild(m);f=e[e.length-1];e.length>l?a(f):p=setInterval(function(){for(var f=e.length,b;f--;)b=e[f],b.ownerNode===m&&(a(b),
d.Yf.push(b),clearInterval(p))},50)},Yf:[],mo:function(c,a){for(var e=d.Yf,l=e.length;l--;)if(b&&e[l].owningElement.ownerDocument===c||e[l].ownerNode.ownerDocument===c)break;l<0?d.Yj(c,a):a(e[l])},xn:b?function(b,a,e){return b.rules[b.addRule(a,e)]}:function(b,a,e){a=b.insertRule(a.concat("{",e,"}"),b.cssRules.length);return b.cssRules[a]},Pp:b?function(b,a){for(var e=b.rules,l=e.length;l--;)if(e[l]===a){b.removeRule(l);break}}:function(b,a){for(var e=b.cssRules,l=e.length;l--;)if(e[l]===a){b.deleteRule(l);
break}},fd:b&&document.createElement("p").style.opacity===void 0?function(b,a){var e=b.style,l=Math.round(a*100);e.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+l+')"';e.filter="alpha(opacity="+l+")"}:function(b,a){b.style.opacity=a},Ns:b?function(b){var a=this.Xk(b),e=a.getPropertyValue("background-image"),l,f,p,m=b.ownerDocument,r;if(e.toLowerCase().indexOf(".png")!=-1)l=a.getPropertyValue("background-position-x"),a=a.getPropertyValue("background-position-y"),r=m.createElement("img"),
p=m.createElement("div"),p.style.position="absolute",p.style.left=l,p.style.top=a,f=m.createElement("div"),p.appendChild(f),f.style.position="absolute",b.style.overflow="hidden",r.onload=function(){f.style.filter=["progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src='",e,"', sizingMethod='scale')"].join("");f.style.width=this.width+"px";f.style.height=this.height+"px";p.style.width=this.width+"px";p.style.height=this.height+"px"},e=e.substr(5,e.length-7),r.src=e,b.insertBefore(p,
b.firstChild),b.style.background="",b.opacityWrapper=p}:function(){},Xk:b&&!window.getComputedStyle?function(b){return new function(a){this.el=a;this.getPropertyValue=function(a){var b=/(\-([a-z]){1})/g;a=="float"&&(a="styleFloat");b.test(a)&&(a=a.replace(b,function(f,a,e){return e.toUpperCase()}));return this.el.currentStyle[a]?this.el.currentStyle[a]:null}}(b)}:window.getComputedStyle,findElement:function(b,a){if(a.querySelectorAll){var e=a.querySelectorAll("."+b);return e.length?e[e.length-1]:
null}for(var l=RegExp("(^|\\s)"+b+"($|\\s)"),e=a.getElementsByTagName("*"),f=e.length;f--;)if(l.test(e[f].className))return e[f];return null}})})(nokia.maps.dom);ovi.provide("nokia.maps.dom.TouchList");
window.navigator.msPointerEnabled&&function(d){function k(d){ovi.extend(d,{kg:function(c){for(var b=this.length,g=-1;b--;)if(this[b].pointerId===c.pointerId){g=b;break}return g},Wj:function(c){for(var b=0,g=c.length;b<g;b++)this.I(c[b])},I:function(c){var b=this.kg(c);if(b===-1)b=this.length;c.type="MSPointerMove";c.identifier=c.pointerId;c.force=c.pressure;c.radiusX=c.radiusY=1;c.rotationAngle=0;this[b]=c},fb:function(c){c=this.kg(c);c>=0&&this.splice(c,1)},identifiedTouch:function(c){for(var b=
this.length;b--;)if(this[b].identifier===c)return this[b];return null},item:function(c){return this[c]}})}d.TouchList=function(){function d(){var c=Object.create(Array.prototype),c=Array.apply(c,arguments)||c;k(c);return c}ovi.extend(d,{fromArray:function(c){return d.apply(null,c)},isArray:function(c){return Object.prototype.toString.call(c).toLowerCase()==="[object array]"}});return d}()}(nokia.maps.dom);ovi.provide("nokia.maps.gfx.Image");
(function(){var d=nokia.maps.gfx.Image=new ovi.Class({Statics:{d:0,fromObjectListener:[],fromObject:function(k,h){for(var c=d.fromObjectListener,b,g=c.length,a=-1;++a<g;)if(b=c[a](k,h||document))break;return b}}})})();ovi.provide("nokia.maps.gfx.Painter");nokia.maps.gfx.Painter=new ovi.Class({Statics:{defaultPainter:null,Yh:function(d){return(d=+d)!==d||d<0||d>1?1:d}}});ovi.provide("nokia.maps.util.FontHelper");
(function(d){function k(b,c){return b=b.replace(RegExp("(?:((?:x*-)?small(?:er)?(?![-])|medium|(?:x*-)?large(?:r)?|[0-9]*\\.?[0-9]+(?:px|pt|em|ex|%)))(?:/((?:[0-9]*\\.?[0-9]+(?:px|pt|em|ex|%)|normal)))?","gi"),function(a,e,b){if(e&&e!=="")c.size=e;if(b&&b!=="")c.lineHeight=b;return""})}function h(b,c){var a=[],b=b.replace(RegExp("(?:(italic|oblique)|(small-caps)|(bold(?:er)?|lighter|[1-9]00)|(inherit|normal))+","gi"),function(e,b,f,p,m){b&&b!==""?c.style=b:f&&f!==""?c.variant=f:p&&p!==""?c.weight=
p:m&&m!==""&&a.push(m);return""});!c.style&&a.length&&(c.style=a.shift());!c.variant&&a.length&&(c.variant=a.shift());!c.weight&&a.length&&(c.weight=a.shift());return b}var c=d.c;d.FontHelper={parse:function(b){var c={},a=0,e=[],l,b=b.replace(RegExp("'.*'|\".*\"","gi"),function(f){l="_s_"+a;e[a]=f;a++;return l}),b=k(b,c),b=h(b,c),b=b.replace(/_s_([\d]+)/,function(f,a){return e[a]}),b=b.replace(/^[\s]+/,"");if(b!=="")c.family=b;if(typeof c.size==="string")c.size=d.FontHelper.Mg(c.size);return c},Mg:function(b){var g=
/([0-9]*(\.[0-9]*){0,1}(e[\+\-]{1}[0-9]*){0,1})\s*([a-zA-Z]+)/g,a=g.exec(b);g.exec("");if(a){b=parseFloat(a[1]);switch(a=a[4].toLowerCase()){case "pt":b=b*96/72;break;case "pc":b=b*96/72*12;break;case "mm":b=b*96/25.4;break;case "cm":b=b*96/25.4*10;break;case "in":b*=96;break;case "px":break;case "em":case "ex":c("Unsupported font size unit: "+a);break;default:c("Unknown font size unit: "+a)}return b+"px"}return parseFloat(b)+"px"},toString:function(b){var c=[];b.style&&c.push(b.style);b.variant&&
c.push(b.variant);b.weight&&c.push(b.weight);b.size&&(b.lineHeight?c.push(b.size+"/"+b.lineHeight):c.push(b.size));b.family&&c.push(b.family);return c.join(" ")}}})(nokia.maps.util);ovi.provide("nokia.maps.geo.Coordinate");
(function(d){var k=d.util,h=Math,c=h.abs,b=h.floor,g=h.round,a=h.min,e=h.log,l=h.tan,f=h.sqrt,p=h.pow,m=h.sin,r=h.cos,q=h.asin,y=h.atan2,s=h.PI,u=s/180,w=s/4,v=s/2,x=s*2,z=s*3,A=180/s,B=k.Vector3D,D=d.geo.Coordinate=function(f,a,e,b,m){b||D.isValid(f,a,e,m)||k.c("Coordinate: lat:"+f+", lng:"+a+(e?", alt:"+e:"")+(m?", altMode:"+m:""));this.longitude=+a;this.latitude=+f;e!==void 0&&(this.altitude=+e);if(m!==void 0)this.altMode=m};ovi.extend(D.prototype,{altitude:void 0,distance:function(e,b){if(b)return this.Ik(e);
var l=this.latitude*u,c=e.latitude*u;return 12742E3*q(a(1,f(p(m((l-c)/2),2)+r(l)*r(c)*p(m((this.longitude*u-e.longitude*u)/2),2))))},Ih:function(){var f=(this.latitude+90)*u,a=this.longitude*u,e=6371E3+(this.altitude||0),b=m(f);return new B(e*b*r(a),e*b*m(a),e*r(f))},Ik:function(a){var e=this.Ih(),a=a.Ih();return f(p(e.x-a.x,2)+p(e.y-a.y,2)+p(e.z-a.z,2))},nn:function(f,a){if(a/=6371E3){f*=u;var e=u*this.latitude,b=m(e),p=m(a),l=r(a),c=u*this.longitude,g=r(e),e=q(g*r(f)*p+b*l),b=y(m(f)*g*p,l-b*m(e)),
c=((c+b+s)%(2*s)-s)*A}return a?new D(e*A,(c+540)%360-180):this},walk:function(f,a,b){var p,q,g,d,h;if(b)return this.nn(f,a);f=(f%360+360)%360;if(!((f+90)%180))return f=this.longitude+a/(x*r(this.latitude*u)*6371E3)*(f===270?-360:360),new D(this.latitude,(f+540)%360-180);if(a/=6371E3)f*=u,p=this.latitude*u,q=this.longitude*u,g=p+a*r(f),d=g-p,b=e(l(g/2+w)/l(p/2+w)),b=!isNaN(d/b)?d/b:r(p),h=a*m(f)/b,c(g)>v&&(g=g>0?s-g:-(s-g));return a?new D(g*A,((q+h+z+(c(p+d)>v?s:0))%x-s)*A):this},equals:function(f){return f&&
this.latitude===f.latitude&&this.longitude===f.longitude||!1}});ovi.extend(D,{isValid:function(f,a,e,b){return f!=null&&f===+f&&f>=-90&&f<=90&&a!=null&&a===+a&&a>=-180&&a<=180&&(e===void 0||e===+e&&c(e)!==Infinity)&&(b===void 0||D.altModes.indexOf(b)>-1)},altModes:ovi.Array(["GL","OL","SL","SB","WE","WG"]),fromObject:function(){var f,a,e,b,m;f=arguments;var p=f[0];m=f.length;if(p instanceof D)return p;if(m>1)p=f;else if(p)m=p.length;else return null;f=p[0];a=p[1];e=p[2];b=p[3];if(m===2&&f===+f&&a===
+a)return new D(f,a);if(m===3&&f===+f&&a===+a&&e===+e)return new D(f,a,e);if(m===4&&f===+f&&a===+a&&e===+e&&(b===void 0||D.altModes.indexOf(b)>-1))return new D(f,a,e,!1,b);m=p.lat;f=p.lng;if(m!==void 0&&f!==void 0){if(m===+m&&f===+f)return new D(+m,+f);return null}m=p.latitude;f=p.longitude;if(m!==void 0&&f!==void 0&&m===+m&&f===+f)return new D(+m,+f);return null},Cf:function(f,a,e){var m=g(c(f)*3600)/3600,p=b(m),m=(m-p)*3600,l=b(m/60);return p+"\u00b0 "+l+"' "+g(m-l*60)+'" '+(f<0?e:a)},asString:function(f){return D.Cf(f.latitude,
"N","S")+", "+D.Cf(f.longitude,"E","W")}});D.prototype.toString=function(){return D.asString(this)}})(nokia.maps);ovi.provide("nokia.maps.util.QuadTree");
(function(d){function k(a,b){for(var f,p,m,r,q,c,g,d=0,h,v,x=4,z;x--;){z=x+4;q=[];f=+!(x%3);c=b[x];for(h=(p=a[x]).length;h--;){m=p[h];if(r=m.H)for(v=r.length;v--;)if(((g=r[v][z])>c)-f)c=g;for(v=4;v--;)if(r=m[v])f?r[z]<c&&q.push(r):r[z]>c&&q.push(r)}d+=q.length;b[x]=c;a[x]=q}d&&(b=k(a,b));return b}function h(){d.c("Entry out of tree bounds")}var c=1,b=d.QuadTree=new ovi.Class({initialize:function(a,b,f,p,m){this.bg=a||10;this.jh=b||1;this.kh=f||1;this.Jf=p||0;this.Kf=m||0;this.flush()},Statics:{MIN_X:"7",
MIN_Y:"4",MAX_X:"5",MAX_Y:"6",MID_X:"8",MID_Y:"9",TL:"0",TR:"1",BL:"2",BR:"3"},getExtremes:function(){var a,b;if(!(b=this.lb))if(a=this.ic,a.H||a["0"]||a["1"]||a["2"]||a["3"])b=[a],a=k([b,b,b,b],[a["6"],a["7"],a["4"],a["5"]]),this.lb=b={},b["4"]=a[0],b["5"]=a[1],b["6"]=a[2],b["7"]=a[3];return b||void 0},flush:function(){this.ic=this.Eb=new g(0,0,this.Jf-this.jh,this.Kf-this.kh,this.Jf+this.jh,this.Kf+this.kh);this.lb=0},remove:function(a){a.aa.fb(a,this);this.lb=0},insert:function(a,b,f,p){var m,
r=this.Eb;a<f?m=a:(m=f,f=a);b<p?(a=b,b=p):a=p;(m<r["7"]||a<r["4"]||f>r["5"]||b>r["6"])&&h();this.lb=0;return this.Ad(this.Eb,m,a,f,b,this.bg)},insertSorted:function(a,b,f,p){var m=this.Eb;(a<m["7"]||b<m["4"]||f>m["5"]||p>m["6"])&&h();this.lb=0;return this.Ad(this.Eb,a,b,f,p,this.bg)},Ad:function(a,b,f,p,m,r){var q=a["8"],c=a["9"];return r&&(p<q||p<a["5"]&&b>=q)&&(m<c||m<a["6"]&&f>=c)?this.Ad(a.Mk((f>=c?2:0)|b>=q),b,f,p,m,r-1):a.I(b,f,p,m)},intersect:function(a,b,f,p,m){var r=[];this.pb(this.ic,r,
a,b,f,p,m);return r},pb:function(a,b,f,p,m,r,q){var c,g,d=a.H;g=a["7"];var h=a["8"],k=a["5"],x=a["4"],z=a["9"],A=a["6"],B;if(d)if(c=d.length,f>g||m<k||p>x||r<A)for(;c--;)g=d[c],k=g["7"],x=g["4"],A=g["5"],B=g["6"],k>m||A<f||x>r||B<p||(q||k>=f&&A<=m&&x<=r&&B>=p)&&b.push(g);else for(;c--;)b.push(d[c]);m>=h&&(p<=z&&a["1"]&&this.pb(a["1"],b,f,p,m,r,q),r>=z&&a["3"]&&this.pb(a["3"],b,f,p,m,r,q));f<=h&&(p<=z&&a["0"]&&this.pb(a["0"],b,f,p,m,r,q),r>=z&&a["2"]&&this.pb(a["2"],b,f,p,m,r,q))}}),g=b.Quad=function(a,
b,f,p,m,r){if(a)this.aa=a,this.d=b,b&1?(f=a["8"],m=a["5"]):(f=a["7"],m=a["8"]),b&2?(p=a["9"],r=a["6"]):(p=a["4"],r=a["9"]);this["7"]=f;this["4"]=p;this["5"]=m;this["6"]=r;this["8"]=(f+m)/2;this["9"]=(p+r)/2},a=b.Entry=function(a,b,f,p,m){this.id=c++;this.aa=a;this["7"]=b;this["4"]=f;this["5"]=p;this["6"]=m};ovi.extend(g.prototype,{d:"",aa:null,Mk:function(a){return this[a]||(this[a]=new g(this,a))},I:function(e,b,f,p){e=new a(this,e,b,f,p);(this.H||(this.H=[])).push(e);return e},fb:function(a,b){var f=
this.H,p;if(f){for(p=f.length;p--;)if(f[p]===a){f.splice(p,1);delete a.aa;break}f.length||(delete this.H,this.Mf(b))}},Mf:function(a){if(this.aa&&!this.H&&!this[0]&&!this[1]&&!this[2]&&!this[3]){delete this.aa[this.d];if(this===a.ic)a.ic=this.aa;this.aa.Mf(a)}}})})(nokia.maps.util);ovi.provide("nokia.maps.util.Strip");
(function(){var d=nokia.maps.util.Strip=function(d,h){var c=(this.names=d||[]).length,b=this.offsets={};for(this.data=h||[];c--;)b[d[c]]=c};ovi.extend(d,{stencil:function(k,h){var c=new d(1,h);c.offsets=k.offsets;c.names=k.names;return c},X_Y:new d(["x","y"]),LAT_LNG:new d(["latitude","longitude"])})})();ovi.provide("nokia.maps.util.Uint32Array");
(function(){var d=typeof Uint32Array!=="undefined",k=ovi.browser.msie?function(d){for(var c=Array(d);d--;)c[d]=0;return c}:d?function(d){return new Uint32Array(d)}:function(d){for(var c=[];c.length<d;)c.push(0);return c};nokia.maps.util.Uint32Array=function(h){var c;if(ovi.type(h)==="array")if(d){c=new Uint32Array(h.length);length=h.length;for(i=0;i<length;i++)c[i]=h[i]}else c=h;else c=d&&typeof h==="object"?new Uint32Array(h):k(arguments.length?+h:0);return c}})();ovi.provide("nokia.maps.geo");
(function(d){function k(b,a,e,l,f,p){var m=0;b<e?m|=1:b>f&&(m|=2);a<l?m|=4:a>p&&(m|=8);return m}var h=0,c=Number.POSITIVE_INFINITY,b;ovi.extend(d.geo,{newProjectionId:function(){return h++},clipLineVsRect:function(b,a,e,l,f,p,m,r,q){q?q.length=0:q=[];for(var c=!1,d,h=k(b,a,f,p,m,r),w=k(e,l,f,p,m,r),c=!1,v,x;;)if(h|w)if(h&w)break;else d=h?h:w,d&8?(v=b+(e-b)*(r-a)/(l-a),x=r):d&4?(v=b+(e-b)*(p-a)/(l-a),x=p):d&2?(x=a+(l-a)*(f-b)/(e-b),v=f):d&1&&(x=a+(l-a)*(m-b)/(e-b),v=m),d==h?(b=v,a=x,h=k(b,a,f,p,m,
r)):(e=v,l=x,w=k(e,l,f,p,m,r));else{c=!0;break}c&&q.push(b,a,e,l);return q},intersectLine:b=function(b,a,e,l){if(!a||a.length<4||!b||b.length<4){if(e)e.length=0;return 0}var l=!l,f=0,p=0,m=0,r=b.length,q,d,s,h,k,v=a[0],x=a[1],z=a[2],A=a[3],B=b[p++],D=b[p++];z<v&&(v^=z,z^=v,v^=z);A<x&&(x^=A,A^=x,x^=A);for(;p<r;){var E=b[p++],G=b[p++],N=(G-D)*(z-v)-(E-B)*(A-x),Q=(E-B)*(x-D)-(G-D)*(v-B),X=(G-D)*(z-v)-(E-B)*(A-x),J=Q/N,C=X/N,a=v+J*(z-v);q=x+J*(A-x);C=C>=0&&C<=1;l&&(B<E?(d=B,k=E):(d=E,k=B),D<G&&(s=D,h=
G));N===0&&Q===0&&X===0?(a=q=c,C=l?(B>=v&&B<=z||E>=v&&E<=z)&&(D>=x&&D<=A||G>=x&&G<=A):!0):C&&l&&(C=J>=0&&J<=1&&a>=d&&a<=k&&q>=s&&q<=h);C?(f++,e&&(e[m++]=a,e[m++]=q)):e&&(e[m++]=e[m++]=NaN);B=E;D=G}if(e)e.length=m;return f},clipPolygonVsRect:function(g,a,e,l,f,p){if(!g||g.length<=4)return p&&((p.length=0)||p)||[];for(var p=p||[],m=p.length=0,r=-1,q,d=g.length,s=0,h,k,v=!1,x,z,A=!1,B=[],D=[],E=!1,G,N;++r<4;){h=g[d-2];k=g[d-1];r===0?(v=k>=e,q=[a,e,l,e]):r===1?(v=h<=l,q=[l,e,l,f]):r===2?(v=k<=f,q=[a,
f,l,f]):r===3&&(v=h>=a,q=[a,e,a,f]);for(;s<d;)x=g[s++],z=g[s++],r===0?A=z>=e:r===1?A=x<=l:r===2?A=z<=f:r===3&&(A=x>=a),A?(v||(B[0]=h,B[1]=k,B[2]=x,B[3]=z,b(q,B,D,!0),h=D[0],k=D[1],h===c&&(r===0?(h=x,k=e):r===1?(h=l,k=z):r===2?(h=x,k=f):r===3&&(h=a,k=z)),s!==2?(p[m++]=h,p[m++]=k):(E=!0,G=h,N=k)),p[m++]=x,p[m++]=z):v&&(B[0]=h,B[1]=k,B[2]=x,B[3]=z,b(q,B,D,!0),h=D[0],k=D[1],h===c&&(r===0?(h=x,k=e):r===1?(h=l,k=z):r===2?(h=x,k=f):r===3&&(h=a,k=z)),p[m++]=h,p[m++]=k),h=x,k=z,v=A;E&&(p[m++]=G,p[m++]=N);
E=!1;g=p;p.length=d=m;m=s=0}return p}})})(nokia.maps);ovi.provide("nokia.maps.geo.Corridor");ovi.provide("nokia.maps.geo.IProjection");ovi.provide("nokia.maps.geo.Proximity");ovi.provide("nokia.maps.kml._packaging.base");ovi.provide("ovi._kernel");ovi.provide("nokia.maps.language._packaging.base");ovi.provide("nokia.maps.Config");
(function(d){function k(a,e){c(e)!=="string"&&(e="");return e+(e&&e.substr(-1)!=="."?".":"")+a}var h={},c=ovi.type,b=d.util.getRootNameSpace("nokia.maps").Settings,g=d.Config=new ovi.Class({initialize:function(){this.ra={}},Statics:{setDefault:function(a,e,b){if(!b||!h[a])e===void 0||e===null?delete h[a]:h[a]=e},setDefaultNS:function(a,e,b,f){g.setDefault(k(e,a),b,f)},setDefaults:function(a,e){var b,f;for(b in a)if(!e||!h[b])f=a[b],f===void 0||f===null?delete h[b]:h[b]=f},setDefaultsNS:function(a,
e,b){var f,p,m;for(f in e)if(m=k(f,a),!b||!h[m])p=e[f],p===void 0||p===null?delete h[m]:h[m]=p},getDefault:function(a){return h[a]},getDefaultNS:function(a,e){return h[k(e,a)]}},get:function(a){return a in this.ra?this.ra[a]:h[a]},getNS:function(a,e){e=k(e,a);return e in this.ra?this.ra[e]:h[e]},set:function(a,e){this.ra[a]=e;return this},setNS:function(a,e,b){this.ra[k(e,a)]=b;return this},reset:function(a){delete this.ra[a];return this},resetNS:function(a,e){e=k(e,a);delete this.ra[e];return this}});
b&&(b.secureConnection&&g.setDefault("secureConnection",b.secureConnection),b.addObserver("secureConnection",function(){g.setDefault("secureConnection",b.secureConnection)}))})(nokia.maps);ovi.provide("nokia.maps.util.RTree");
(function(d){var k=Math,h=k.abs,c=k.min,b=k.max,g=k.sqrt,a=d.RTreeRecord,e=d.c,l=d.RTree=new ovi.Class({initialize:function(f,a,b){(typeof a!="number"||a<2)&&e("The given parameter 'max' is not a number, or less than 2! max is "+a);(typeof b!="number"||b>a/2)&&e("The given parameter 'min' is not a number, or is not at least 2 times smaller than max! min is "+b);this.MaxEntriesPerNode=a;this.MinEntriesPerNode=b;switch(f){case d.RTree.QUADRATIC_PARTITIONING:this.splitNode=this.Nm;break;case d.RTree.LINEAR_PARTITIONING:this.splitNode=
this.Lm;break;case d.RTree.LINEAR_MOD_PARTITIONING:this.splitNode=this.Mm;break;case d.RTree.DUMMY_PARTITIONING:this.splitNode=this.Km;break;default:e("The given parameter 'partitioningAlgorithm' is not a valid option!")}this.Root=new d.RTreeNode(!0)},Statics:{QUADRATIC_PARTITIONING:0,LINEAR_PARTITIONING:1,LINEAR_MOD_PARTITIONING:2,DUMMY_PARTITIONING:3,kd:Infinity},MaxEntriesPerNode:null,MinEntriesPerNode:null,Root:null,ib:1,add:function(f){var a=this.Root,e=1,l=0,q=null,h=null,s=Infinity,k,w;for(f.Volume=
(f.X2-f.X1)*(f.Y2-f.Y1);e<this.ib;){h=q=null;s=Infinity;l=a.Entries;for(l=l.length;k=a.Entries[--l];)if(w=f.X2==f.X1&&f.Y2==f.Y1?g((k.X1-f.X1)*(k.X1-f.X1)+(k.Y1-f.Y1)*(k.Y1-f.Y1)):(b(k.X2,f.X2)-c(k.X1,f.X1))*(b(k.Y2,f.Y2)-c(k.Y1,f.Y1))-k.Volume,w<s||w==s&&k.BoundingBox<h)q=l,s=w,h=k.Volume;a=a.Entries[q];e++}a.addChild(f,e==1);for(f=a.Entries.length>this.MaxEntriesPerNode?this.splitNode(a):[];a.ParentNode;)e=a.ParentNode,f.length!=2?e.updateBoundingBox(a.X1,a.X2,a.Y1,a.Y2):(e.removeChild(a.ParentEntry),
e.addChild(f[0],!1),e.addChild(f[1],!1),f=e.Entries.length>this.MaxEntriesPerNode?this.splitNode(e):[]),a=a.ParentNode;if(f.length==2)this.Root=new d.RTreeNode(!1),this.Root.addChild(f[0],!0),this.Root.addChild(f[1],!0),this.ib++},remove:function(f){var b,m=[],l,q=this.MinEntriesPerNode;this.Root||e("Can't remove anything fro already empty tree");(!f||!(f instanceof a)||!f.Leaf||!f.ParentNode)&&e("Invalid node");l=f.ParentNode.Entries;b=l.indexOf(f);if(b!=-1){l.splice(b,1);l.length<q&&(m=l);do f=
f.ParentNode,f.Entries.length<q&&f.ParentNode&&f.ParentNode.removeChild(f.ParentEntry),f.ParentNode&&f.ParentNode.calculateBoundingBox();while(f.ParentNode);for(b=m.length;b--;)this.hl(m[b]);if(this.Root.Entries.length==1&&!(this.Root.Entries[0]instanceof a))this.ib--,this.Root=this.Root.Entries[0],this.Root.ParentNode=null;return!0}},removeAll:function(){this.Root=new d.RTreeNode(!0);this.ib=1},searchByPriority:function(f,a,e,b){var l,c={},g=[[null,null]],d=this.Root,h=0;l=0;var k;f>a&&(l=f,f=a,
a=l);e>b&&(l=e,e=b,b=l);for(;d!=null;){if(d.Leaf)for(l=0;l<d.Entries.length;l++)d.Entries[l].overlaps(f,a,e,b)&&(typeof c[d.Entries[l].Priority]=="undefined"&&(c[d.Entries[l].Priority]=[]),c[d.Entries[l].Priority][c[d.Entries[l].Priority].length++]=d.Entries[l]);else{if(d.Entries.length>h+1)for(l=h+1;l<d.Entries.length;l++)if(d.Entries[l].overlaps(f,a,e,b)){g[g.length++]=[d,l];break}for(l=k=0;l<d.Entries[h].Entries.length;l++)if(d.Entries[h].Entries[l].overlaps(f,a,e,b)){d=d.Entries[h];h=l;k=1;break}if(k)continue}d=
g[g.length-1][0];h=g[g.length-1][1];g.length--}return c},search:function(f,a,e,b,l){var c=[],l=l||this.Root,g,d=0,h,k=[l];f>a&&(t=f,f=a,a=t);e>b&&(t=e,e=b,b=t);if(!l.overlaps(f,a,e,b))return c;for(;d<k.length;){curNode=k[d];g=curNode.Entries;for(h=g.length;l=g[--h];)l.overlaps(f,a,e,b)&&(l.Leaf?c.push(l):k.push(l));d++}return c},hl:function(a,e){var m=this.Root,l=0,q=1,g,s,h,k;if(a){for(;q<e;){s=g=null;h=Infinity;for(l=0;l<m.Entries.length;l++)if(k=m.Entries[l],k=(b(k.X2,a.X2)-c(k.X1,a.X1))*(b(k.Y2,
a.Y2)-c(k.Y1,a.Y1))-k.Volume,k<h||k==h&&m.Entries[l].BoundingBox<s)g=l,h=k,s=m.Entries[l].Volume;m=m.Entries[g];q++}m.addChild(a);for(l=m.Entries.length>this.MaxEntriesPerNode?this.splitNode(m):[];m.ParentNode!=null;)l.length!=2?m.ParentNode.updateBoundingBox(m.X1,m.X2,m.Y1,m.Y2):(m.ParentNode.removeChild(m.ParentEntry),m.ParentNode.addChild(l[0],!1),m.ParentNode.addChild(l[1],!1),l=m.ParentNode.Entries.length>this.MaxEntriesPerNode?this.splitNode(m.ParentNode):[]),m=m.ParentNode;if(l.length==2)this.Root=
new d.RTreeNode(!1),this.Root.addChild(l[0]),this.Root.addChild(l[1]),this.ib++}},splitNode:null,Nm:function(a){var e=new d.RTreeNode(a.Leaf,a.ParentNode),m=new d.RTreeNode(a.Leaf,a.ParentNode),r=null,q=null,g=-1*l.kd,s=null,k=null,w,v=a.Entries,x=v.length,z=w=0;for(w=0;w<x;w++){s=v[w];for(z=w+1;z<x;z++)k=v[z],k=(b(s.X2,k.X2)-c(s.X1,k.X1))*(b(s.Y2,k.Y2)-c(s.Y1,k.Y1))-s.Volume-k.Volume,k>g&&(r=w,q=z,g=k)}e.addChild(v.splice(r,1)[0]);for(m.addChild(v.splice(q-1,1)[0]);v.length>0;){x=v.length;if(this.MinEntriesPerNode-
e.Entries.length==x){for(;entry=v[--x];)e.addChild(entry);a.Entries=[];break}else if(this.MinEntriesPerNode-m.Entries.length==x){for(;entry=v[--x];)m.addChild(entry);a.Entries=[];break}r=null;q=-1;for(w=0;w<a.Entries.length;w++)g=a.Entries[w],g=h((b(e.X2,g.X2)-c(e.X1,g.X1))*(b(e.Y2,g.Y2)-c(e.Y1,g.Y1))*e.Volume-(b(m.X2,g.X2)-c(m.X1,g.X1))*(b(m.Y2,g.Y2)-c(m.Y1,g.Y1))*m.Volume),g>q&&(r=w,q=g);w=a.Entries[r];e.getEnlargement(w.X1,w.X2,w.Y1,w.Y2)<m.getEnlargement(w.X1,w.X2,w.Y1,w.Y2)?e.addChild(a.Entries.splice(r,
1)[0]):m.addChild(a.Entries.splice(r,1)[0])}return[e,m]},Lm:function(a){for(var e=new d.RTreeNode(a.Leaf,a.ParentNode),m=new d.RTreeNode(a.Leaf,a.ParentNode),c=null,q=null,g=-1*l.kd,s=0,k=0,w=null,v=null,x=a.Entries.length;s<x;s++){w=a.Entries[s];for(k=s+1;k<x;k++)v=a.Entries[k],v=b(b(h(w.X1-v.X1),h(w.X2-v.X2)),b(b(h(w.Y1-v.Y1),h(w.Y2-v.Y2)))),v>g&&(c=s,q=k,g=v)}e.addChild(a.Entries.splice(c,1)[0]);for(m.addChild(a.Entries.splice(q-1,1)[0]);a.Entries.length>0;){if(this.MinEntriesPerNode-e.Entries.length==
a.Entries.length){for(;a.Entries.length>0;)e.addChild(a.Entries.splice(0,1)[0]);break}else if(this.MinEntriesPerNode-m.Entries.length==a.Entries.length){for(;a.Entries.length>0;)m.addChild(a.Entries.splice(0,1)[0]);break}c=a.Entries[0];e.getEnlargement(c.X1,c.X2,c.Y1,c.Y2)-m.getEnlargement(c.X1,c.X2,c.Y1,c.Y2)<0?e.addChild(a.Entries.splice(0,1)[0]):m.addChild(a.Entries.splice(0,1)[0])}return[e,m]},Mm:function(a){for(var e=new d.RTreeNode(a.Leaf,a.ParentNode),b=new d.RTreeNode(a.Leaf,a.ParentNode),
c=null,q=null,h=-1*l.kd,s=0,k=0,w=null,v=null,x=a.Entries.length;s<x;s++){w=a.Entries[s];for(k=s+1;k<x;k++)v=a.Entries[k],v=g((w.X1-v.X1)*(w.X1-v.X1)+(w.Y1-v.Y1)*(w.Y1-v.Y1)),v>h&&(c=s,q=k,h=v)}e.addChild(a.Entries.splice(c,1)[0]);for(b.addChild(a.Entries.splice(q-1,1)[0]);a.Entries.length>0;){if(this.MinEntriesPerNode-e.Entries.length==a.Entries.length){for(;a.Entries.length>0;)e.addChild(a.Entries.splice(0,1)[0]);break}else if(this.MinEntriesPerNode-b.Entries.length==a.Entries.length){for(;a.Entries.length>
0;)b.addChild(a.Entries.splice(0,1)[0]);break}c=a.Entries[0];e.getEnlargement(c.X1,c.X2,c.Y1,c.Y2)-b.getEnlargement(c.X1,c.X2,c.Y1,c.Y2)<0?e.addChild(a.Entries.splice(0,1)[0]):b.addChild(a.Entries.splice(0,1)[0])}return[e,b]},Km:function(a){for(var e=new d.RTreeNode(a.Leaf,a.ParentNode),b=new d.RTreeNode(a.Leaf,a.ParentNode),l=a.Entries.length/2,c=0,c=0;c<=l;c++)e.addChild(a.Entries.splice(0,1)[0],!0);for(;a.Entries.length>0;)b.addChild(a.Entries.splice(0,1)[0],!0);return[e,b]}})})(nokia.maps.util);
ovi.provide("ovi.ConsoleLogger");
(function(){try{typeof window.loadFirebugConsole==="function"&&window.loadFirebugConsole()}catch(d){}var k=null;ovi.ConsoleLogger=function(){if(k!==null)return k;if(window&&window.console&&/function/.test(window.console.log+""))for(var d=function(a){a=/function/.test(window.console[a]+"")?a:"log";return typeof window.console[a]==="function"?function(){window.console[a].apply(window.console,arguments)}:function(e,b,f,p,m,c,q,g,d,h,k){window.console[a](e||"",b||"",f||"",p||"",m||"",c||"",q||"",g||"",
d||"",h||"",k?"...":"")}},c=["info","debug","warn","error"],b=0,g;g=c[b];b++)this[g]=d(g);else this.debug=this.info=this.warn=this.error=function(){};return k=this};ovi.Logger&&window&&window.console&&/function/.test(window.console.log+"")&&ovi.Logger.addLogger(new ovi.ConsoleLogger)})(ovi);ovi.provide("nokia.maps.util.Pen");
(function(d){var k=nokia.maps.gfx.Color.parseCss;d.Pen=new ovi.Class({strokeColor:"#05A",lineWidth:1,lineCap:"round",lineJoin:"miter",miterLimit:10,stroke:"solid",initialize:function(h,c){var b,g,a=d.c;if(h){if("lineWidth"in h)!d.isNumber(h.lineWidth)&&a("width must be in range [0..100]"),h.lineWidth=d.da(h.lineWidth,0,100);"stroke"in h&&h.stroke!=="solid"&&a("cannot set anything else than stroke=solid");"strokeColor"in h&&(g=k(h.strokeColor),g===null&&a("Invalid color set!"));if("lineJoin"in h)g=
h.lineJoin,g!=="miter"&&g!=="round"&&g!=="bevel"&&a("Invalid lineJoin set!");if("lineCap"in h)g=h.lineCap,g!=="butt"&&g!=="round"&&g!=="square"&&a("Invalid lineCap set!");"miterLimit"in h&&!d.isNumber(h.miterLimit)&&a("miterLimit must be a number")}if(c instanceof nokia.maps.util.Pen)for(b in c)this[b]=c[b];for(b in h)this[b]=h[b]}})})(nokia.maps.util);ovi.provide("ovi.dom");ovi.provide("nokia.maps.routing._packaging.base");ovi.provide("nokia.maps.net.Request");
(function(d){if(!d.util.getConstructor(d.net.Request))var k=d.net,h=d.util,c=h.c,b=h.J,g=h.isArray,a=h.isObject,e=h.isString,l=0,f=function(){return window.ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:window.XMLHttpRequest}(),p="withCredentials"in new f?f:typeof XDomainRequest!="undefined"?XDomainRequest:null,m=function(a){a.parentNode&&a.parentNode.removeChild(a)},r=k.Request=new ovi.Class({Extends:d.util.OObject,initialize:function(a,f){var e=this;e.u={};e.Qh={};e.Ed=
++l;r.managerCounter++;e.s=a===r.JSONP||a===r.XHR?a:r.JSONP;e.Hh=3E4;e.nd=!1;e.od="jsoncallback";e.ha=!1;e.d=null;f&&f.timeout&&(e.Hh=f.timeout);f&&f.callbackKey&&(e.od=f.callbackKey);f&&f.standardJSONP&&(e.ha=f.standardJSONP);f&&f.autoSkip&&(e.nd=f.autoSkip);a==r.XHR&&f&&f.xDomain&&(e.rn=f.xDomain);e.s==r.JSONP&&e.ha==!1&&(k.Request.callbacks[e.Ed]=function(a,f){e.If(a,f)});if(e.s==r.XHR&&(e.Mb={},e.Sh=f||{},window.execScript&&window.ActiveXObject)){var b="BinaryToArray"+(new Date).getTime();window.execScript("Function "+
b+"(Binary)\nDim i\nReDim byteArray(LenB(Binary))\nFor i = 1 To LenB(Binary)\n  byteArray(i-1) = ChrW(AscB(MidB(Binary, i, 1)))\nNext\n"+b+" = byteArray\nEnd Function\n","vbscript")}},Statics:{JSONP:1,XHR:2,requestCounter:1,managerCounter:0,callbacks:{},requestParams:{},timeoutCallbacks:{},canceledRequests:{}},destroy:function(){this.cancelAll();this.ha==!1&&(k.Request.callbacks[that.Ed]=b)},send:function(a,f,e){this.d=++l;r.requestCounter++;this.u[this.d]=e!=void 0?e:this.d;this.Qh[this.u[this.d]]=
this.d;this.s==r.JSONP?this.tm(a,f,this.d):this.vm(a,f,this.d);return e!=void 0?e:this.d},cancel:function(a){a=a==void 0?this.d:this.Qh[a];r.canceledRequests[a]=!0;this.s==r.JSONP?this.Nh(a):this.Zd(a);this.Cb(a)},cancelAll:function(){for(var a in this.u)this.cancel(this.u[a])},$j:function(a){var f=this;k.Request.callbacks[a]=function(){f.If(a,arguments)}},tm:function(a,f,e){var b=document.createElement("script"),m=document.getElementsByTagName("head")[0];this.ha&&this.$j(e);r.requestParams[e]=[a,
f];this.Em(b,a,f,e);m.insertBefore(b,m.firstChild);this.Ah(a,f,e)},vm:function(a,f,e){var b=this.Sh.method||"GET",m,l=this.Sh;l.uri=a;this.ak(a,f,e);this.Ah(a,f,e);try{if(this.Mb[e]=m=this.zk(e,l),m.open(b,this.kn(b,l,this.Ic),!l.sync,l.username,l.password),this.um(m,b,l,this.Ic),l.sync&&ovi.browser.mozilla&&parseFloat(ovi.browser.version)<2)this.onreadystatechange()}catch(p){if(e in this.u)this.Ic.error=!0,delete this.u[e],r.callbacks[e](this.Ic)}},If:function(a,f){if(!r.canceledRequests[a]){var e=
r.requestParams[a],b=e[1];if(!this.nd||a==this.d)b({response:f.length<=1?f[0]:f,status:200,id:this.u[a],url:e[0],error:!1,timeout:!1});delete this.u[a];delete r.requestParams[a];this.ha&&delete k.Request.callbacks[a]}},ak:function(a,f,e){var b=this;k.Request.callbacks[e]=function(a){b.Cb(e);(!b.nd||e==b.d)&&f(a);b.Zd(e)}},Zd:function(a){this.Mb[a]&&(this.Mb[a].abort(),this.Mb[a]=null,delete this.Mb[a],delete k.Request.callbacks[a])},Em:function(a,f,e,b){var l=this,p=f.indexOf("?")<0?"?":"&";f+=l.ha?
p+l.od+"=nokia.maps.net.Request.callbacks["+b+"]":p+l.od+encodeURI("=(function(){nokia.maps.net.Request.callbacks["+l.Ed+"]("+b+",arguments);})");a.setAttribute("src",f);a.setAttribute("charset","UTF-8");a.setAttribute("defer","defer");a.id=b;a.onload=a.onreadystatechange=function(){if(!this.readyState||this.readyState==="complete"||this.readyState==="loaded")l.Cb(b),delete r.requestParams[b],l.ha&&delete k.Request.callbacks[b],m(this)};a.onerror=function(){r.canceledRequests[b]||(l.Cb(b),r.requestParams[b]&&
(e=r.requestParams[b][1],e({id:l.u[b],url:r.requestParams[b][0],error:!0,timeout:!1})),delete l.u[b],delete r.requestParams[b],l.ha&&delete k.Request.callbacks[b],m(this))}},Ah:function(a,f,e){r.timeoutCallbacks[e]=setTimeout(this.yk(a,f,e),this.Hh)},yk:function(a,f,e){var b=this;return function(){r.canceledRequests[e]=!0;b.s==r.JSONP?(f=r.requestParams[e][1],a=r.requestParams[e][0],b.Nh(e)):b.Zd(e);f({status:408,id:b.u[e],url:a,error:!1,timeout:!0});delete b.u[e];b.Cb(e)}},Nh:function(a){var f=document.getElementById(a);
if(f)f.onload=f.onreadystatechange=b,f.onerror=b,f.src="",m(f);delete r.requestParams[a];this.ha&&(k.Request.callbacks[a]=b)},Cb:function(a){clearTimeout(r.timeoutCallbacks[a]);delete r.timeoutCallbacks[a]},um:function(a,f,e){var b="text/plain",m="",l;if(f!=="GET"&&f!=="DELETE")e.json?(b="application/json",m=ovi.json.stringify(e.json)):e.xml?(b="text/xml",XMLSerializer?m=(new XMLSerializer).serializeToString(e.xml):e.xml.xml?m=e.xml.xml:c("error")):e.content&&f!=="GET"?(b="application/x-www-form-urlencoded",
m=this.$g(e.content)):m=e.body||"";b=e.mimeType||b;e.charset&&(b+="; charset="+e.charset);b={"content-type":b};f=e.headers||{};for(l in f)f.hasOwnProperty(l)&&(b[l.toString().toLowerCase()]=f[l]);if(e.preventCache==="headers"||e.preventCache==="both")b.pragma=b["cache-control"]="no-cache";for(l in b)b.hasOwnProperty(l)&&(l!=="content-type"||e.handleAs==="arraybuffer")&&a.setRequestHeader(l,b[l]);e.handleAs==="binary"&&a.overrideMimeType&&(a.overrideMimeType(b["content-type"]="text/text; charset=x-user-defined"),
m="",delete b["content-length"]);if(e.handleAs==="arraybuffer")a.responseType="arraybuffer";a.send(m)},kn:function(a,f,e){a=f.uri;f.preventCache&&f.preventCache!=="headers"&&(a+=(a.indexOf("?")===-1?"?":"&")+"preventCache="+(new Date).getTime());(f=f.uriParameters)&&(a+=(a.indexOf("?")===-1?"?":"&")+this.$g(f));return e.url=a},$g:function(f,e){var b=[],m,l;if(a(f)){for(m in f)l=e?e+"."+m:m,b.push(this.params(f[m],l));return b.join("&")}else if(g(f)){for(m=0;m<f.length;m++)f[m]=this.params(f[m],e);
return f.join("&")}else if(!f)return"";return e?this.uh(e)+"="+this.uh(f):""+f},uh:function(a){return encodeURIComponent(a).replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},qm:function(a,f){function e(a){this.message=a;this.name="ParserError"}var b=f.handleAs||"text";b==="autodetect"&&(b=a.getResponseHeader("content-type")||"",b=b.match(/[+\/]json/)?"json":b.match(/[+\/]xml/)?"xml":"text");switch(b){case "json":b=ovi.json.parse(a.responseText);
break;case "xml":if(a.responseXML)if((b=a.responseXML.getElementsByTagName("parsererror"))&&b.length>0)throw new e(b.item(0).textContent);else b=a.responseXML;else b=h.Xe(a.responseText);break;case "arraybuffer":b=a.response;break;default:b=a.responseText}return b},zk:function(a,b){var m=this,l,c,g={status:417};m.Ic=g;b=e(b)?{uri:b}:b;l=b.window||window;try{c=b.xhr||m.rn?new p:new f,m.onreadystatechange=c.onreadystatechange=function(){g.id=m.u[a];g.timeout=!1;g.error=!1;if(!r.canceledRequests[a]&&
c.readyState===4)if(ovi.browser.msie&&(c.status===2||c.status===3))g.status=401;else{g.status=c.status>=300&&c.status!==1223||c.status===0&&!(c.responseType==="arraybuffer"||c.responseType==="blob"?c.response:c.responseText)&&("file:"===l.location.protocol||"widget:"===l.location.protocol)?c.status||404:c.status||200;try{g.response=m.qm(c,b)}catch(f){if(a in m.u)g.error=!0,delete m.u[a],r.callbacks[a](g)}ovi.browser.msie&&(c=null);if(!(g.status>=200&&g.status<300&&!g.error))g.error=!0;delete m.u[a];
r.callbacks[a](g)}},l.location.protocol==="file:"&&l.netscape&&l.netscape.security&&l.netscape.security.PrivilegeManager&&l.netscape.security.PrivilegeManager.enablePrivilege&&l.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead")}catch(d){if(a in m.u)g.error=!0,delete m.u[a],r.callbacks[a](g)}return c}})})(nokia.maps);ovi.provide("nokia.maps.dom.EventTarget");
(function(d){if(!nokia.maps.util.getConstructor(nokia.maps.dom.EventTarget)){var k=!k,h=!k,c=k,b=d.EventTarget=function(a){var a=a||this,e;if(!a.isEventTarget){for(e in g)e in a||(a[e]=g[e]);a.draggable?a.enableDrag():a.disableDrag();if(window.navigator.msPointerEnabled&&ovi.type(a)==="element")a.style.msTouchAction="none"}return a},g={isEventTarget:k,draggable:h,enableUserSelect:function(){var a=this.style;if(ovi.type(this)==="element")a.KhtmlUserSelect="auto",a.MozUserSelect="auto",a.OUserSelect=
"auto",a.WebkitUserSelect="auto",a.WebkitTouchCallout="auto";return this},disableUserSelect:function(){var a=this.style;if(ovi.type(this)==="element")a.KhtmlUserSelect="none",a.MozUserSelect="none",a.OUserSelect="none",a.WebkitUserSelect="none",a.WebkitTouchCallout="none";return this},enableDrag:function(){var a=this.style;this.disableUserSelect();if(ovi.type(this)==="element")a.WebkitUserDrag="element",a.KhtmlUserDrag="element";this.draggable=k;return this},disableDrag:function(){var a=this.style;
if(this.draggable&&ovi.type(this)==="element")a.KhtmlUserDrag="auto",a.WebkitUserDrag="auto";this.draggable=h;return this},insertListener:function(a,e,b){return this.addListenerNS(null,a,e,b,k)},addListener:function(a,e,b){return this.addListenerNS(null,a,e,b)},addListeners:function(a){for(var e in a)a.hasOwnProperty(e)&&this.addListenerNS(null,e,a[e][0],a[e][1])},insertListenerNS:function(a,e,b,f){return this.addListenerNS(a,e,b,f,k)},addListenerNS:function(a,e,b,f,p){var m=this.eventListener||(this.eventListener=
{}),m=m[e]||(m[e]=[]),f=f||!1,c,g;if(e==="beforeunload")(g=d.Page.Df)[g.length]=b;else if(e==="resize")if((g=d.Page.ae)[g.length]=c={node:this},(e=ovi.type(this))==="window")c.layoutWidth=(e=d.Page(this)).layoutWidth,c.layoutHeight=e.layoutHeight;else if(e==="element")c.offsetWidth=this.offsetWidth,c.offsetHeight=this.offsetHeight;p?m.unshift(b,f,a):m.push(b,f,a);return this},removeListener:function(a,e,b){return this.removeListenerNS(null,a,e,b)},removeListenerNS:function(a,e,b,f){var p=this.eventListener,
m,c,g,f=f||!1;if(e==="beforeunload"){g=(m=d.Page.Df).length;for(c=-1;++c<g;)if(m[c]===b){m.splice(c,1);break}}else if(e==="resize"){g=(m=d.Page.ae).length;for(c=-1;++c<g;)if(m[c].node===this){m.splice(c,1);break}}if(p&&p[e]){m=p[e];g=m.length;for(c=0;c<g;c+=3)if(m[c]===b&&m[c+1]===f&&m[c+2]===a){m.splice(c,3);break}m.length===0&&delete p[e]}return this},removeAllListeners:function(){var a,e,b;if(a=this.eventListener)for(e in a)for(;a[e]&&a[e][LENGTH]>0;)b=a[e],this.removeListenerNS(b[2],e,b[0],b[1])},
dispatch:function(a){return b.dispatchEvent(this,a)},hitTest:function(a,e){var b;if(this.parentNode&&this.ownerDocument&&(b=d.Page(this.ownerDocument).getClientRect(this))&&a>=b.left&&a<=b.right&&e>=b.top&&e<=b.bottom)return k;return h}};ovi.extend(b.prototype,g);b.getDispatchPath=function(a,e,b){for(var f,p=[],m=b&&b.s==="display";a;)e?(f=a.eventListener)&&(f=f[e])&&f.length&&p.push(a):p.push(a),a=m&&a.s&&a.getParent?a.f:e&&a.parentNodes&&b&&a.parentNodes[b]?a.parentNodes[b]:a.parentNode;return p};
b.catchException=function(a){c=a===k};b.dispatchEvent=function(a,e,l){var e=e instanceof d.Event?e:d.Page.parseEvent(e),f=e.type,p=e.namespaceURI,l=l||b.getDispatchPath(a,f,e.display||p),m=l.length,g,q,h,s;if(!f||m===0)return k;e.target=e.target||a;e.eventPhase=1;for(a=e.canSicker?m-1:0;a>=0;a--)if(a===0&&e.eventPhase++,q=l[a],e.currentTarget=q,(s=q.eventListener&&q.eventListener[f])&&(h=s.length)){for(g=h-3;g>=0;g-=3)if((s[g+1]||a===0)&&!(s[g+2]!==null&&s[g+2]!==p)){if(c)try{s[g].call(q,e)}catch(u){ovi.warn("Exception in event listener #"+
g/3+", capturing phase for event "+f),ovi.error(String(u)==="[object Error]"?u.message:u)}else s[g].call(q,e);if(e.propagation===2)return!e.defaultPrevented}if(e.propagation===1)return!e.defaultPrevented}e.eventPhase++;if(e.canBubble)for(a=1;a<m;a++)if(q=l[a],e.currentTarget=q,(s=q.eventListener&&q.eventListener[f])&&(h=s.length)){for(g=h-3;g>=0;g-=3)if(!s[g+1]&&!(s[g+2]!==null&&s[g+2]!==p)){if(s[g])if(c)try{s[g].call(q,e)}catch(w){ovi.warn("Exception in event listener #"+g/3+", bubbling phase for event "+
f),ovi.error(w)}else s[g].call(q,e);if(e.propagation===2)return!e.defaultPrevented}if(e.propagation===1)break}return!e.defaultPrevented}}})(nokia.maps.dom);ovi.provide("nokia.maps.dom.DataTransfer");
(function(){if(!nokia.maps.util.getConstructor(nokia.maps.dom.DataTransfer)){var d=!d,k={text:"text/plain",url:"text/uri-list"},h={string:d,number:d,"boolean":d},c={uninitialized:{copy:d,move:d,link:d},none:{},copy:{copy:d},copyLink:{copy:d,link:d},copyMove:{copy:d,move:d},all:{copy:d,move:d,link:d},link:{link:d},linkMove:{move:d,link:d},move:{move:d}},b=ovi.Array.indexOf,g=nokia.maps.util.c,a=nokia.maps.dom.DataTransfer=function(a){var b=-1,f,p;this.types=[];this.data={};this.ndt=a||null;if(a&&(p=
a.types)&&(f=a.types.length))for(;++b<f;)this.types=p[b];this.files=a&&a.files||[]};ovi.extend(a.prototype,{lift:d,realTime:!d,cursor:"pointer",dropEffect:"none",effectAllowed:"uninitialized",clearData:function(a){var l=this.ndt,f,p=ovi.type(a),m=this.types;if(a===void 0)return l&&l.clearData(),this.types={},this.data={},this;h[p]||g("Invalid format supplied!");a=k[a=(""+a).toLowerCase()]||a;l&&l.clearData(a);delete this.data[a];(f=b(m,a))>=0&&m.splice(f,1);return this},setData:function(a,l){var f=
this.ndt,p=ovi.type(a),m=ovi.type(l),c=this.types;h[p]||g("Invalid format supplied!");a=k[a=(""+a).toLowerCase()]||a;f&&(m==="string"?f.setData(a,l):f.clearData(a));this.data[a]=l;b(c,a)<0&&(c[c.length]=a);return this},getData:function(a){var b,f=this.ndt,p=ovi.type(a);h[p]||g("Invalid format supplied!");a=k[a=(""+a).toLowerCase()]||a;if(f&&(b=f.getData(a)))return b;return this.data[a]},hasData:function(a){var b=this.ndt,f=ovi.type(a);h[f]||g("Invalid format supplied!");a=k[a=(""+a).toLowerCase()]||
a;if(b&&b.getData(a))return d;return a in this.data},setDragImage:function(){},addElement:function(){},allows:function(a){return c[this.effectAllowed][a]}})}})(nokia.maps);ovi.provide("nokia.maps.geo.mercator");
(function(d){var k=d.util,h=k.Point,c=k.Strip,b=k.Uint32Array,g=k.Ne,a=d.geo.Coordinate,k=Math,e=k.min,l=k.max,f=k.log,p=k.tan,m=k.atan,r=k.exp,q=k.floor,y=k.pow,s=k.PI,u=s/4,w=s/2,v=180/s,x=function(){for(var a=31,f={};a--;)f[y(2,a)]=a;return f}();d.geo.mercator={id:0,pointToGeo:function(f){var e=f.x,f=f.y;return new a(f<=0?90:f>=1?-90:v*(2*m(r(s*(1-2*f)))-w),(e===1?1:g(e,1))*360-180,void 0,1)},xyToGeo:function(f,e){return new a(e<=0?90:e>=1?-90:v*(2*m(r(s*(1-2*e)))-w),(f===1?1:g(f,1))*360-180,void 0,
1)},mapXYToGeo:function(f,e){return new a(e<=0?90:e>=1073741823?-90:v*(2*m(r(s*(1-2*e/1073741823)))-w),(f===1073741823?1:g(f/1073741823,1))*360-180)},mapPointsToGeo:function(a,f){for(var f=f||c.stencil(c.LAT_LNG),e=f.data,b=a.length,l=0,p=0,q=f.names.length,d=f.offsets.latitude,h=f.offsets.longitude,k,y;l<b;)e[p+h]=((k=a[l++])===1073741823?1:g(k/1073741823,1))*360-180,e[p+d]=(y=a[l++])<=0?90:y>=1073741823?-90:v*(2*m(r(s*(1-2*y/1073741823)))-w),p+=q;return f},geoToPoint:function(a){return new h(a.longitude/
360+0.5,e(1,l(0,0.5-f(p(u+w*a.latitude/180))/s/2)))},latLngToPoint:function(a,b){return new h(b/360+0.5,e(1,l(0,0.5-f(p(u+w*a/180))/s/2)))},latLngToMapPoint:function(a,b){return new h(q((b/360+0.5)*1073741823),q(e(1,l(0,0.5-f(p(u+w*a/180))/s/2))*1073741823))},geoToMapPoints:function(a,m){var c=a.data,g=c.length,r=0,d=0,h=a.names.length,k=a.offsets.latitude,y=a.offsets.longitude;for(m||(m=new b(g/h*2));d<g;)m[r++]=q((c[d+y]/360+0.5)*1073741823),m[r++]=q(e(1,l(0,0.5-f(p(u+w*c[d+k]/180))/s/2))*1073741823),
d+=h;return m},scaleMapXY:function(a,f,e,b){var m=30-x[e];return b?new h(a>>m,f>>m):(b=(e-=1)>>1,new h((a>>m)+((a&e)>b),(f>>m)+((f&e)>b)))},scaleMapPoints:function(a,f,e,m,l){var p=a.length,c=0,g=0,r=0,q=30-x[f],d,h,s,k;e||(e=new b(p));l=!!l;if(m)if(l)for(;c<p;)e[c]=a[c++]>>q;else{for(;g<p;)if(c=a[g++]>>q,h=a[g++]>>q,s!==c||k!==h)e[r++]=s=c,e[r++]=k=h;e.length=r}else{for(m=(f-=1)>>1;g<p;)if(c=((d=a[g++])>>q)+((d&f)>m),h=((d=a[g++])>>q)+((d&f)>m),l||s!==c||k!==h)e[r++]=s=c,e[r++]=k=h;if(!l)e.length=
r}return e}}})(nokia.maps);ovi.provide("nokia.maps.util.Coroutine");
(function(){function d(){var a=r(),e=a;S=0;h();if(da)for(var b=r(),a=b+F.AF_MAX_EXEC_TIME;G.length&&b<a;)b=G.shift().data,b=b.run(),h();else{b=r();for(a=b+F.MAX_EXEC_TIME;E.length&&b<a;)H?(b=N.shift(),b||(b=N,N=Q,Q=b,ba++,b=N.shift()),b=b.data):b=E.shift().data,b=b.run(),h(),H=!H}c(a=r());aa&&f.clearTimeout(aa);aa=f.setTimeout(k,S+75);C+=a-e}function k(){aa&&f.clearTimeout(aa);aa=setTimeout(k,500);r()>S&&d()}function h(){var a,f,e;for(a=a||r();(f=D.j)&&f&&(e=f.data).Lb<=a;)F.resume(e)}function c(a){var f;
G.length&&ea();E.length?I(0):(f=D.j)?(a=f.data.Lb-(a||r()),I(a<0?0:a)):I()}function b(a,f){return f.nice(!0)-a.nice(!0)}function g(a,f){return a.Lb-f.Lb}function a(a,f){s.call(this);l.prototype=A&&A.scope||z&&z.scope||{};var e=-1,b,m=a&&a.ik,p=new l(f);if(a&&a.defaults)for(b in a.defaults)this[b]=a.defaults[b];this.id="ctx#"+v++;this.parent=A||z||null;this.name=(this.coroutine=a)&&a.Jd;this.N={length:0};this.K={length:0};if(f&&f.length)for(;++e<f.length&&e<m.length;)p[m[e]]=f[e];this.scope=p;this.Dc=
new y(this);this.Jc=new y(this);this.Mc=new y(this)}function e(a,f){var e=this,b=e.context;do if(e.has(a))return e[a]=f,this;while((b=b.parent)&&(e=b.scope));z.scope[a]=f;return this}function l(a){this.arguments=a;this.has=this.hasOwn=this.hasOwnProperty;this.set=e}var f=window,p=nokia.maps.util,m={0:{status:"terminated"},1:{status:"running"},2:{status:"blocking"}},r=p.now,q=p.LinkedList,y=q.Element,s=p.OObject,u=Array.prototype.slice,w=ovi.type,v=1,x=!0;a.prototype=new s({status:2,S:0,sb:0,sm:0,
zg:-1,wk:0,priority:50,prioritySetter:function(a){if(w(a)!=="number")return this.priority;a<0&&(a=0);a>100&&(a=100);return a},useAnimationFrame:!1,tc:0,nice:function(a){if(a&&this.sb<this.timeStamp){this.S-=(this.timeStamp-this.sb)/F.SLICE_SIZE/B.length;if(this.S<0)this.S=0;if(this.S>300)this.S=300;this.tc=this.priority-this.S;this.sb=this.timeStamp;this.realtime&&(this.tc+=1E3)}return this.tc},realtime:!1,precede:function(f){f instanceof a&&(this.N[f.id]=f,this.N.length++,f.K[this.id]=this,f.K.length++,
f.N[this.id]&&(delete f.N[this.id],f.N.length--,delete this.K[f.id],this.K.length--));return this},postpone:function(f){f instanceof a&&(this.K[f.id]=f,this.K.length++,f.N[this.id]=this,f.N.length++,f.K[this.id]&&(delete f.K[this.id],f.K.length--,delete this.N[f.id],this.N.length--));return this},clearPrecedence:function(){if(!this.N.length)return null;for(var a=[],f=this.N,e;void 0 in f;)e=f[void 0],delete e.K[this.id],e.K.length--,a.push(e);this.N={length:0};return a},clearPostponement:function(){if(!this.K.length)return null;
for(var a=[],f=this.K,e;void 0 in precedeList;)e=f[void 0],delete e.N[this.id],e.N.length--,a.push(e);this.K={length:0};return a},run:function(a,e){if(!e&&!this.useAnimationFrame&&this.K.length)return r();if(!e&&this.useAnimationFrame&&!da)return r();var b=this.Mc,l=this.Dc,p=this.Jc,c=this.coroutine,g=A,q=this.scope,d,h,s,k=s=r();this.nice(!0);b.list&&b.list.remove(b);l.list&&l.list.remove(l);p.list&&p.list.remove(p);A=this;this.sm++;this.tn=a?1.0E20:s+(da?F.AF_SLICE_SIZE:F.SLICE_SIZE);this.zg=ba;
this.set("status",1);this.timeStamp=this.callTime=s;this.vd=!0;if(x)try{h=c.mb.call(q.that,q,this)}catch(y){d=y}else h=c.mb.call(q.that,q,this);A=g;s=r();this.S+=(b=s-k)/F.SLICE_SIZE;if(this.S<0)this.S=0;if(this.S>300)this.S=300;this.tc=this.priority-this.S;this.wk+=b;this.sb=s;X+=b;C-=b;this.clearPrecedence();if(d&&this.onError)try{d=this.onError(q,this,d)}catch(u){}if(d||this.vd){this.vd=!1;this.set("returnValue",h);F.kill(this);if(this.onTerminated)this.onTerminated(q,this);d&&(ovi.warn("Coroutine '"+
c.Jd+"' aborted abnormally with exception"),ovi.info((d.name?d.name+": ":"")+d.message))}else if(m[this.status]!==h&&!this.$k&&f.console&&f.console.warn)this.$k=!0,console.warn("The coroutine with the name '"+this.coroutine.Jd+"' returned in a blocked state, but didn't return the Coroutine.BLOCK object.\nThe reason may be a bug that the developer of the coroutine forgot a return, which can lead to errors!");return s}});var z=new a,A=null,B={length:0},D=new q,E=new q,G=new q,N=new q,Q=new q,X=0,J=
r(),C=0,H=!0,ba=0,S=0,da=!1,ea=function(){function a(){e=!1;da=!0;if(x)try{d()}catch(b){f&&f.console&&f.console.log&&f.console.log(b)}else d();da=!1}var e=!1,b=f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||f.oRequestAnimationFrame||f.msRequestAnimationFrame||function(a){setTimeout(a,10)};return function(){e||(e=!0,b(a))}}(),I=function(){function a(){k=null;d()}function e(a){a.source!==f&&a.data==="nm.util.Coroutine#postMessageHack"&&d();if(a.source===f&&a.data===
"nm.util.Coroutine#postMessageHack")return a.stopImmediatePropagation?a.stopImmediatePropagation():a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!g&&c?(g=c=!1,d()):g=c=!1,!1}function b(){m=null;d()}var m=null,l=f.setImmediate||f.webkitSetImmediate||f.mozSetImmediate||f.oSetImmediate||f.msSetImmediate||function(a){return setTimeout(a,0)},p=f.clearImmediate||f.webkitClearImmediate||f.mozClearImmediate||f.oClearImmediate||f.msClearImmediate||function(a){return clearTimeout(a)},c=!1,g=!1,q,
h=function(){var a=navigator,e=a.userAgent.toLowerCase(),b=!1;if(q=a.appName==="Microsoft Internet Explorer")+((((e.match(/(?:version|chrome|firefox|msie)[\/ ]([\d.]+)/)||[])[1]||"").match(/([\d]+(?:[.][\d]+){0,1})/)||[])[1]||0)>=9&&+f.document.documentMode>=9&&(b=!0);return b}(),s=q&&!h?!1:f.postMessage&&(f.addEventListener||f.attachEvent),k=null;s&&(f.addEventListener?f.addEventListener("message",e,!1):f.attachEvent("onmessage",e));return function(e,q){var q=q||r(),e=+e,d=q+e;if(d!==d||d<S||!S)k&&
(f.clearTimeout(k),k=null),m&&(p(m),m=null),g=!0,S=0;if(d===d&&!S)if(S=d,e<16)if(s){if(!c||g)c=!0,g=!1,f.postMessage("nm.util.Coroutine#postMessageHack","*")}else m||(m=l(b));else k||(k=f.setTimeout(a,e))}}(),aa,F=nokia.maps.util.Coroutine={TERMINATED:0,RUNNING:1,BLOCKING:2,YIELDED:m[1],BLOCKED:m[2],KILLED:m[0],create:function(f,e){function b(){var f=arguments,e,m=new a(b,e=u.call(f,0));B[m.id]=m;B.length++;m.scope.that=this;m.scope.context=m;e.callee=f.callee;e.caller=f.callee.caller;m.sb=m.createTime=
m.timeStamp=m.callTime=r();F.resume(m);return m}b.ik=u.call(arguments,2);b.Jd=f;b.mb=e;return b},createEx:function(a,f,e){var b=u.call(arguments,0),b=b.splice(2,1)&&this.create.apply(this,b);e&&(b.defaults=e);return b},forName:function(a){var f,e,b=[];for(f in B)if((e=B[f]).name&&e.name.match(a))b[b.length]=e;return b},all:function(){var a,f=[];for(a in B)f.push(B[a]);return f},forId:function(a){return B[a]},wait:function(a,f,e){var b=a.$blocking||(a.$blocking={});if(e=e||A)return b[e.id]=e,e.Yb=
a,F.suspend(e,f)},signal:function(a){var f;if(a=a&&a.$blocking)for(f in a)return F.resume(f=a[f]),f},broadcast:function(a){var f,e=a&&a.$blocking;if(e){for(f in e)F.resume(e[f]);delete a.$blocking}},shallYield:function(){var a=A;return a&&(a.timeStamp=r())&&a.timeStamp>=a.tn},yield:function(a){if(a=a||A)return F.suspend(a,0)},sleep:function(a,f){if(f=f||A)return f.Yb=null,F.suspend(f,a)},kill:function(f){arguments.length===1?f instanceof a||(f=A):f=f||A;if(f){if(f.status===0)return F.KILLED;var e=
f.Dc,b=f.Mc,m=f.Jc;e.list&&e.list.remove(e);b.list&&b.list.remove(b);m.list&&m.list.remove(m);delete B[f.id];B.length--;F.broadcast(f);f.set("status",0);return F.KILLED}},suspend:function(a,f){if((a=a||A)&&a.status!==0){if(f===null)f=Number.NaN;f=+f;a.vd=!1;var e=a.Dc,m=a.Mc,l=a.Jc;e.list&&e.list.remove(e);m.list&&m.list.remove(m);l.list&&l.list.remove(l);a.set("timeStamp",r());if(f<=0)return a.set("status",1),a.useAnimationFrame?(a.nice(!0),G.addSorted(b,null,e)):(Q.push(l),a.nice(!0),E.addSorted(b,
null,e)),F.YIELDED;if(f>0)a.Lb=a.timeStamp+f,D.addSorted(g,null,m);a.set("status",2);return F.BLOCKED}},resume:function(a){if(a&&a.status===2){var f=a.Dc,e=a.Mc,m=a.Jc,l=r();if(a.Yb)delete a.Yb.$blocking[a.id],a.Yb=a.Lb=null;e.list&&D.remove(e);a.set("timeStamp",l);a.nice(!0);a.useAnimationFrame?G.addSorted(b,null,f):(E.addSorted(b,null,f),a.realtime?N.unshift(m):a.zg<ba?N.push(m):Q.push(m));a.set("status",1);c(l)}},MAX_EXEC_TIME:30,AF_MAX_EXEC_TIME:10,SLICE_SIZE:10,AF_SLICE_SIZE:10,count:function(){return B.length},
taskCpuTime:function(){return X},schedulerCpuTime:function(){return C},totalCpuTime:function(){return r()-J},current:function(){return A},scheduler:function(){d()},schedulerNextRuntime:function(){return S},killAll:function(){for(var a in B)F.kill(B[a],"killAll called!")},scope:function(a){eval("fn = "+a.toString());return a},catchException:function(a){x=!!a}};F.ExecutionContext=a;F.Scope=l;z.scope.global=z.scope;d()})();ovi.provide("nokia.maps.ui._packaging.base");ovi.provide("nokia.maps.net._packaging.base");
ovi.provide("nokia.maps.dom.Page");
(function(d){if(!nokia.maps.util.getConstructor(nokia.maps.dom.Page)){var k=nokia.maps.util,h=k.Coroutine,c=k.now,b=Math.pow,g=Math.sqrt,a=ovi.type,e=d.TouchList,l=function(a,f){return f?a===f?!0:l(a,f.parentNode):!1},f=navigator,p=f.userAgent.toLowerCase(),m=f.appVersion,r={windows:/Windows/.test(m),mac:/MacIntel/.test(f.platform),linux:/X11/.test(m)&&!/tablet/.test(p)&&!/armv7/.test(p),maemo:/apple/.test(p)&&/linux/.test(p)&&/armv7/.test(f.platform),iphone:/iphone/.test(p),ipod:/ipod/.test(p),ipad:/ipad/.test(p),
android:/android/.test(p),meego:/meego/.test(p),windowsphone:/windows\ phone/.test(p)},q,y,s={msie:y=f.appName==="Microsoft Internet Explorer",chrome:/chrome/.test(p),safari:/apple/i.test(navigator.vendor)&&!/browserng/.test(p),opera:/opera/.test(p),mozilla:/firefox|fennec/.test(p)&&!/apple/.test(navigator.vendor),konqueror:/konqueror/.test(p),camino:/camino/.test(p),cp:/browserng/.test(p),fullVersion:q=(p.match(/(?:version|chrome|firefox|msie)[\/ ]([\d.]+)/)||[])[1]||"",version:+((q.match(/([\d]+(?:[.][\d]+){0,1})/)||
[])[1]||0),touch:r.android||r.iphone||r.ipad||r.meego||r.maemo,mobile:/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(p||f.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test((p||
f.vendor||window.opera).substr(0,4)),web:!this.mobile,language:f.language||f.userLanguage,webkit:/webkit/.test(p),gecko:/gecko\//.test(p),engineVersion:(p.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],realVersion:y&&(window.console&&console.profile&&9||document.documentMode!=void 0&&8)||Math.floor(+q),dnd:!1},u=s.webkit&&!s.touch?"offsetX":"layerX",w=s.webkit&&!s.touch?"offsetY":"layerY",v=window.MSGesture?new MSGesture:null,x,z=function(m){function p(a){a.pointerType===a.MSPOINTER_TYPE_TOUCH?
a.type.toLowerCase()==="mspointerdown"?X(a):a.type.toLowerCase()==="mspointermove"?z(a):a.type.toLowerCase()==="mspointerup"?y(a):J(a):J(a)}function q(a){C(F(a))}function y(a){for(var f=F(a),e=-1,b,l=f.changedTouches,p,g;++e<l.length;){g=new ta(l[e]);for(b=0;b<ma.length;b++)if(g.id===ma[b].id){p=ma[b];ma.splice(b--,1);break}if(p){p.up=g;p.pressed=!1;if(ga)Y.style.display="none",g.target=m.elementFromPoint(g.pageX,g.pageY),Y.style.display="block";f.target=g.target;f.pageX=g.pageX;f.pageY=g.pageY;f.targetX=
g[u];f.targetY=g[w];C(f);if(!ga&&!f.defaultPrevented&&ma.length===0&&p.down.target===g.target&&!p.tapFired)p.tapFired=!0,C(new fa({type:"tap",target:g.target,pageX:g.pageX,pageY:g.pageY,targetX:g.pageX+a[u],targetY:g.pageY+a[w]})),b=c(),Ua>0&&b<Ua?(Ua=0,C(new fa({type:"dbltap",target:g.target,pageX:g.pageX,pageY:g.pageY}))):Ua=b+A.DOUBLE_TAP_TIME}}ga&&a.preventDefault();h.resume(na)}function z(a){for(var f=F(a),e=-1,b,l=f.changedTouches,p=c(),g,r;++e<l.length;){r=new ta(l[e]);r.timeStamp=p;for(b=
0;b<ma.length;b++)if(g=ma[b],g.id===r.id){g.current=r;if(ga)Y.style.display="none",r.target=m.elementFromPoint(r.pageX,r.pageY),Y.style.display="block";g.preventMoveDefault&&a.preventDefault()}if(!ga)f.target=r.target,f.pageX=r.pageX,f.pageY=r.pageY,f.targetX=r[u],f.targetY=r[w],C(f)}ga?(Y.style.left=ca.current.pageX+"px",Y.style.top=ca.current.pageY+"px",(L.realTime||!ya)&&na.run()):na.run();h.schedulerNextRuntime()<p-10&&h.scheduler();(ga||Aa)&&a.preventDefault()}function X(a){for(var a=F(a),f=
-1,e=a.changedTouches,b=a.timeStamp,m,l,p;++f<e.length;){p=new ia;p.id=(m=new ta(e[f])).id;p.down=m;p.current=m;p.pressed=!0;if(Aa)p.longpressSent=p.tapFired=p.preventDrag=!0;m.timeStamp=b;ma.some(function(a){return p.id===a.id})||ma.push(p);l=p.down.target;try{for(;l;){if(l&&l.isEventTarget&&l.draggable){p.preventMoveDefault=!0;break}l=l.parentNode}}catch(c){}a.target=m.target;a.pageX=m.pageX;a.pageY=m.pageY;a.targetX=m[u];a.targetY=m[w];C(a)}h.resume(na)}function J(a){H(a);C(F(a))}function C(a){var f=
a.type,e=a.button,m=a.touches,l=ha[e],p,c=!1;if(r.android){if(f==="gesturechange")return;if(f==="touchstart"&&Va>=2)return;f==="touchstart"&&(Va++,Wa++);f==="touchend"&&(Va--,Wa--)}if(f==="resizestart"||f==="resize"||f==="resizeend")return Da(a.target,a);if(l&&(!x||Z.MSPointerEvent&&x!==Z.MSPointerEvent.MSPOINTER_TYPE_TOUCH))if(f==="mousedown"&&l)l.down=a.clone(),l.up=null,l.pressed=!0,l.preventClick=l.clickFired=l.longpressSent=!1,gb|=1<<e;else if(f==="mouseup"&&l)l.up=a.clone(),l.pressed=!1,gb&=
~(1<<e);else if(f==="click"){if(l.clickFired||l.preventClick)c=!0,l.preventClick&&a.preventDefault();l.clickFired=!0}else if(f==="longpress")l.longpressSent=!0;if(!Na&&(f==="gesturestart"||Va>=2)){Aa=!0;for(p in ma)e=ma[p],e.tapFired=e.preventDrag=e.longpressSent=!0;if(r.android&&m&&m.length===2)a.type="gesturestart",a.scale=1,hb=g(b(m[0].screenX-m[0].screenY,2)+b(m[1].screenX-m[1].screenY,2)),ib=a.scale,Da(a.target,a,!1),Na=c=!0;h.resume(na)}else if(Wa>1&&Na){if(r.android&&m&&m.length===2)Da(a.target,
a,!1),a.type="gesturechange",a.scale=g(b(m[0].screenX-m[0].screenY,2)+b(m[1].screenX-m[1].screenY,2))/hb,ib=a.scale,Da(a.target,a,!1),c=!0}else if(f==="gestureend"||Wa===1&&Na){Aa=!1;if(r.android)a.type="gestureend",a.scale=m&&m.length===2?Math.sqrt(b(m[0].screenX-m[0].screenY,2)+b(m[1].screenX-m[1].screenY,2))/hb:ib,Da(a.target,a,!1),c=!0,Na=!1;h.resume(na)}ga&&!xb[f]&&(c=!0);if(!c&&(a.shiftKey=jb,a.ctrlKey=Xa,a.altKey=kb,a.metaKey=lb,a.buttonState=gb,Da(a.target,a,f==="mouseout"||f=="mouseleave"?
a.fg:!1),f==="click"&&a.defaultPrevented))l.preventClick=!0}function H(a){if(a){var f=a.target||a.srcElement||null,e=a.type,b="toElement"in a?a.toElement:a.relatedTarget;if(Kb[e])jb=a.shiftKey,Xa=a.ctrlKey,kb=a.altKey,lb=a.metaKey||!1;if(yb[e]){if("pageX"in a&&a.pageX!==void 0&&a.pageX!==null&&a.pageX===a.pageX)qa=a.pageX,ra=a.pageY,Ea=a.clientX,Fa=a.clientY;else if("clientX"in a&&"scrollLeft"in R&&a.clientX!==void 0&&a.clientX!==null&&a.clientX==a.clientX)qa=a.clientX+(m.documentElement.scrollLeft?
m.documentElement.scrollLeft:R.scrollLeft),ra=a.clientY+(m.documentElement.scrollTop?m.documentElement.scrollTop:R.scrollTop),Ea=a.clientX,Fa=a.clientY;else return;if(ga&&ya)Y.style.display="none",f=m.elementFromPoint(a.clientX,a.clientY),Y.style.display="block";if(f&&f.nodeType===3)f=f.parentNode;sa=f||null;e==="mouseout"&&!b&&(sa=null)}}}function ba(f){a(f)==="element"&&Y.appendChild(f)}function S(f,e,b){for(var m=a(f);wa.childNodes.length;)wa.removeChild(wa.childNodes[0]);if(m==="element")e=a(e)===
"number"?e===e?e:0:0,b=a(b)==="number"?b===b?b:0:0,wa.style.left=e+"px",wa.style.top=b+"px",wa.appendChild(f)}function da(){mb[L.effectAllowed]?xa=L.effectAllowed:L.effectAllowed=xa}function ea(){mb[xa]&&mb[xa][L.dropEffect]?ka=L.dropEffect:ka=L.dropEffect="none"}function I(){if(Y){for(Y.parentNode&&Y.parentNode.removeChild(Y);Y.childNodes.length;)Y.removeChild(Y.childNodes[0]);for(;wa.childNodes.length;)wa.removeChild(wa.childNodes[0])}}function aa(){Ba=Z.orientation;nb=m.body.clientWidth;Oa=m.body.clientHeight;
Pa=Z.innerWidth;Ya=Z.innerHeight;ob=Z.outerWidth;pb=Z.outerHeight;if(!r.iphone){if(!s.webkit)nb=null,Pa?Oa||(Oa=m.documentElement.offsetHeight||null):(Pa=m.body.clientWidth,Ya=m.body.clientHeight,Oa=null);ob=Pa;pb=Ya}Ba?Ba===-90?Ba=90:Ba===90&&(Ba=270):Ba=screen.width>screen.height?90:0;T.width=nb;T.height=Oa;T.layoutWidth=Pa;T.layoutHeight=Ya;T.viewportWidth=ob;T.viewportHeight=pb;T.orientation=Ba}function F(a){if(a instanceof fa)return a;var b,p,c,g,r,q;c=(a=a||window.event)&&(a.target||a.srcElement)||
null;if((b=Za)&&Za.nativeEvent===a)return b.currentTarget=a.currentTarget,b.bubbles=a.bubbles,b.eventPhase=a.eventPhase,b.defaultPrevented=a.defaultPrevented,b;b=new fa;(b.nativeEvent=a)||k.c("Invalid or no event object supplied!");(!(b.type=a.type)||!b.type.length)&&k.c("Invalid or no type in event!");b.bubbles=a.bubbles===!0||a.bubbles===!1?a.bubbles:!1;b.cancelable=a.cancelable===!0||a.cancelable===!1?a.cancelable:!0;b.currentTarget=a.currentTarget;b.defaultPrevented=a.defaultPrevented===!0||a.defaultPrevented===
!1?a.defaultPrevented:!1;if(b.eventPhase)b.eventPhase=a.eventPhase;b.namespaceURI=a.namespaceURI;b.page=T;if(b.type==="DOMMouseScroll")b.type="mousewheel";p=b.type;if(b.target=c){if(b.target.nodeType===3)b.target=b.target.parentNode}else return Za=b;if(Lb[b.type]&&f.msPointerEnabled&&(x=a.pointerType,b.pointerId=a.pointerId,b.hwTimestamp=a.hwTimestamp,b.isPrimary=a.isPrimary,b.pointerType=a.pointerType,b.pressure=a.pressure,b.rotation=a.rotation,b.tiltX=a.tiltX,b.tiltY=a.tiltY,g=new ta(a),a.pointerType===
a.MSPOINTER_TYPE_TOUCH)){if(b.type==="MSPointerDown"&&(ua.I(a),Qa[b.pointerId]=b.target,b.type=qb[b.type],ua.length>1)){v.target=b.target;for(q=0;q<ua.length;q++)v.addPointer(ua[q].pointerId)}b.target=c=g.target=Qa[b.pointerId];if(b.type==="MSPointerMove"&&ua.identifiedTouch(b.pointerId))ua.I(a),b.type=qb[b.type];if(b.type==="MSPointerUp")ua.fb(a),Qa[b.pointerId]=null,delete Qa[b.pointerId],b.type=qb[b.type],ua.length<=1&&v.stop();a.touches=new e;a.touches.Wj(ua);a.changedTouches=new e;a.changedTouches.I(g);
a.targetTouches=new e;for(q=0;q<ua.length;q++)l(c,Qa[ua[q].identifier])&&a.targetTouches.I(ua[q])}if(Mb[b.type])b.touches=a.touches,b.targetTouches=a.targetTouches,b.changedTouches=a.changedTouches;if(Nb[p]||zb[p]){if(zb[p])b.type=Ob[p];b.pageX=a.pageX;b.pageY=a.pageY;b.targetX=a[u];b.targetY=a[w];b.scale=a.scale;b.rotation=a.rotation}b.view=void 0;b.relatedTarget="relatedTarget"in a?a.relatedTarget:a.fromElement===c?a.toElement:a.fromElement;b.detail=a.detail;if(a.display)b.display=a.display,b.displayX=
a.displayX,b.displayY=a.displayY;if(yb[p]){b.shiftKey=a.shiftKey;b.altKey=a.altKey;b.ctrlKey=a.ctrlKey;b.metaKey=a.metaKey||!1;b.screenX=a.screenX;b.screenY=a.screenY;b.clientX=a.clientX;b.clientY=a.clientY;"pageX"in a?(b.pageX=a.pageX,b.pageY=a.pageY,"layerX"in a?(b.targetX=s.msie&&s.version==9?a.offsetX:a[u],b.targetY=s.msie&&s.version==9?a.offsetY:a[w]):(b.targetX=a.offsetX,b.targetY=a.offsetY)):(b.pageX=a.clientX+(m.documentElement.scrollLeft||R.scrollLeft),b.pageY=a.clientY+(m.documentElement.scrollTop||
R.scrollTop),b.targetX=a.offsetX,b.targetY=a.offsetY);if(Pb[p]){p==="mousedown"&&(Ma=!1);c=a.button;if(va<=8&&p==="mousedown")for(q=0;q<ha.length;q++)ha[q].pressed&&(c&=~rb[q]);else if(va<=8&&(p==="click"||p==="contextmenu")&&c===0)for(q=r=c=0;q<ha.length;q++)if(g=ha[q],!g.pressed&&g.up&&g.up.timeStamp>r)c=rb[q],r=g.up.timeStamp;b.button=va<=8||s.konqueror?Qb[c]:c}if(Rb[p])b.deltaX=a.deltaX,b.deltaY=a.deltaY,b.deltaZ=a.deltaY,b.deltaMode=a.deltaMode;else if(Sb[p])b.wheelDelta=(a.wheelDelta||-a.detail)<
0?-1:1}if(Tb[p])b.data=a.data,b.inputMode=b.inputMode;if(Ub[p])b.keyIdentifier=a.keyIdentifier,b.keyLocation=a.keyLocation,b.repeat=a.v,b.ctrlKey=a.ctrlKey,b.shiftKey=a.shiftKey,b.altKey=a.altKey,b.metaKey=a.metaKey||!1;return Za=b}function K(a){if(!a||!a.ownerDocument||!a.parentNode||a.parentNode===a)return null;var f,e=s.gecko&&m.getBoxObjectFor&&a.style.position==="absolute"&&(a.style.top===""||a.style.left==="");f=a.offsetParent;var b=a.offsetLeft,l=a.offsetTop,p,c;if(a.getBoundingClientRect)f=
m.documentElement,b=f.pageXOffset?f.pageXOffset:m.body.pageXOffset?m.body.pageXOffset:Z.pageXOffset?Z.pageXOffset:f.scrollLeft,l=f.pageYOffset?f.pageYOffset:m.body.pageYOffset?m.body.pageYOffset:Z.pageYOffset?Z.pageYOffset:f.scrollTop,e=a.getBoundingClientRect(),e={left:e.left+b-f.clientLeft,top:e.top+l-f.clientTop,right:e.right+b-f.clientLeft,bottom:e.bottom+b-f.clientTop,width:e.width,height:e.height};else if(m.getBoxObjectFor&&!e)e=m.getBoxObjectFor(a),f=m.getBoxObjectFor(viewport),e={left:e.screenX-
f.screenX,top:e.screenY-f.screenY},e.right=e.left+a.offsetWidth-1,e.bottom=e.top+a.offsetHeight-1;else{for(;f;){if((p=f.offsetLeft)&&p===p)b+=p;if((c=f.offsetTop)&&c===c)l+=c;if((p=f.clientLeft)&&p===p)b+=p;if((c=f.clientTop)&&c===c)l+=c;b-=f.scrollLeft;if(!s.opera||f.tagName!=="TR")l-=f.scrollTop;f=f.offsetParent}if(s.safari&&a.style.position==="absolute"||s.opera)l-=R.offsetTop;e={left:b,top:l,right:b+a.offsetWidth-1,bottom:l+a.offsetHeight-1}}if(!e.width)e.width=e.right-e.left+1,e.height=e.bottom-
e.top+1;return e}function la(f,e){if(a(f)==="string")return M(m.createElement(f),e);f.tagName||k.c("tagName must be string or object with property 'tagName'");var b=m.createElement(f.tagName),l;for(l in f)Vb[l]||b.setAttribute(l,f[l]);(e||(e=f.style))&&M(b,e);return b}function M(a,f){if(f&&a&&a.style)for(var e in f)!Wb[e]&&e in a.style&&(a.style[e]=f[e]);return a}function ia(){}function ta(a){if(a)for(var f in a)this[f]=a[f];this.id=this.identifier}function pa(){this.pressed=this.longpressSent=this.clickFired=
this.preventClick=!1;this.down=this.up=null}var Z=m.parentWindow||m.defaultView,W=m.documentElement,R=m.getElementsByTagName("BODY")[0],U=m.getElementsByTagName("HEAD")[0],T=this,Ma=!1,wb=r.mac&&s.webkit,va=function(){var a;if(s.msie)a=5,m.documentMode?a=m.documentMode:m.compatMode&&m.compatMode==="CSS1Compat"&&(a=7);return a}(),fa=d.Event,Sa=d.EventTarget,Xb=d.DataTransfer,Ab=Sa.getDispatchPath,Da=Sa.dispatchEvent,O=ovi.dom.addEvent,Bb=ovi.Array.indexOf;ta.prototype={id:null,identifier:null,target:null,
timeStamp:0,pageX:0,pageY:0,screenX:0,screenY:0,clientX:0,clientY:0};ia.prototype={preventMoveDefault:!1,preventDrag:!1,pressed:!1,longpressSent:!1,tapFired:!1,id:null,down:null,current:null,up:null};var Wb={constructor:!0,prototype:!0},Vb={constructor:!0,prototype:!0,tagName:!0,style:!0},Ca=Math.abs,Za=null,qb={MSPointerDown:"touchstart",MSPointerMove:"touchmove",MSPointerUp:"touchend",MSPointerCancel:"touchcancel"},ua=f.msPointerEnabled?new e:null,Qa={},Lb={MSPointerDown:!0,MSPointerMove:!0,MSPointerUp:!0},
zb={MSGestureStart:!0,MSGestureChange:!0,MSGestureEnd:!0},Ob={MSGestureStart:"gesturestart",MSGestureChange:"gesturechange",MSGestureEnd:"gestureend"},Mb={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0},Nb={gesturestart:!0,gesturechange:!0,gestureend:!0},xb={dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0},yb=ovi.extend(ovi.extend({},xb),{mousemove:!0,mouseup:!0,mousedown:!0,mouseover:!0,mouseout:!0,mouseenter:!0,mouseleave:!0,click:!0,dblclick:!0,mousewheel:!0,
contextmenu:!0}),Pb={mousedown:!0,mouseup:!0,contextmenu:!0,click:!0,dblclick:!0},Sb={mousewheel:!0},Rb={wheel:!0},Tb={},Ub={keydown:!0,keypress:!0,keyup:!0},rb={0:1,1:4,2:2,3:8,4:16},Qb={1:0,4:1,2:2,8:3,16:4},Yb=m.compatMode!=="CSS1Compat",nb=0,Oa=0,Pa=0,Ya=0,ob=0,pb=0,Ba=0,$a=function(){var a=0,f=0,e=0,b=0,m=0,l=0,p=la("P",{height:"200px",width:"200px"}),c=la("P",{position:"absolute",top:0,left:0,visibility:"hidden",width:"100px",height:"100px",overflow:"hidden"});try{c.appendChild(p);R.appendChild(c);
f=c.offsetWidth;m=c.offsetHeight;c.style.overflow="scroll";e=c.offsetWidth;l=c.offsetHeight;if(f===e)e=c.clientWidth;if(m===l)l=c.clientHeight;R.removeChild(c);a=f-e;b=m-l}catch(g){b=a=0}return b!==b||a!==a||b<=0||a<=0?{width:17,height:17}:{width:a,height:b}}(),qa=0,ra=0,Ea=0,Fa=0,sa=null,ja=null,Ga=[],ha=[new pa,new pa,new pa,new pa,new pa],gb=0,ma=[],Ua=0,ga=!1,Aa=!1,mb={uninitialized:{copy:!0,move:!0,link:!0},none:{},copy:{copy:!0},copyLink:{copy:!0,link:!0},copyMove:{copy:!0,move:!0},all:{copy:!0,
move:!0,link:!0},link:{link:!0},linkMove:{move:!0,link:!0},move:{move:!0}},ab=!1,bb=0,cb=0,oa=null,ca=null,xa=null,ya=!0,ka=null,Cb={none:s.msie?"not-allowed":"no-drop",link:s.msie||s.safari?"default":"alias",move:s.msie?"hand":"pointer",copy:s.msie||s.safari?"default":"copy"},za=null,$=null,Ha=!1,L=null,Y=null,Ia=null,Db=null,wa=null,jb=!1,Xa=!1,kb=!1,lb=!1,Kb={keydown:!0,keyup:!0,mousedown:!0,mouseup:!0},V=A.browser.mobile,Eb=V?5:150,Zb=V?1:25,na=h.create("nokia.maps.dom.Page#queueCo",function(f,
e){var b,l,p=e.callTime,c=p-A.LONGPRESS_INTERVAL,g=!1,r=p+Eb,q,d,k,y=-1,u,z,w,v,B,x;if(ga){if(ca?(B=(q=ca.current.pageX)-bb,x=(v=ca.current.pageY)-cb,b=ca):(B=(q=qa)-bb,x=(v=ra)-cb,b=ha[oa]),bb=q,cb=v,Y.style.left=q+"px",Y.style.top=v+"px",!b.pressed&&b.up||Aa||ab){if(ya&&!Aa&&!ab&&$&&ka!=="none")b=new fa({type:"drop",target:$,relatedTarget:za,button:oa,pageX:q,pageY:v,deltaX:B,deltaY:x,dataTransfer:L}),C(b),ea(),b.defaultPrevented||(b=L.getData("text/plain"),a($)==="element"&&($.nodeName==="TEXTAREA"||
$.nodeName==="INPUT"&&$.type.toLowerCase()==="text")?ka==="copy"||ka==="move"?b&&b.length&&($.value+=b):ka="none":ka="none");else if(!ya)L.dropEffect=ka="none",b=new fa({type:"dragleave",target:$,relatedTarget:za,button:oa,cancelable:!1,pageX:q,pageY:v,deltaX:0,deltaY:0,dataTransfer:L}),C(b);L.dropEffect=ka;L.effectAllowed=xa;b=new fa({type:"dragend",target:za,relatedTarget:$,button:oa,pageX:q,pageY:v,deltaX:0,deltaY:0,dataTransfer:L});C(b);na.realtime=!1;if(s.msie)R.releaseCapture&&R.releaseCapture(),
R.style.cursor=Db;I();ga=ab=!1;L=ca=oa=null}}else if(!Aa){if(ma.length===1&&(b=ma[0])&&b.current)if(B=b.current.pageX-b.down.pageX,x=b.current.pageY-b.down.pageY,b.pressed&&!b.preventDrag&&Ca(B)+Ca(x)>8)ca=b,q=b.current.pageX,v=b.current.pageY;if(!ca)for(y in ha)if(b=ha[y],b.down&&(B=qa-b.down.pageX,x=ra-b.down.pageY,b.pressed&&Ca(B)+Ca(x)>1)){oa=+y;q=qa;v=ra;break}if((ca||oa!==null)&&b){Ma=!0;d=b.down.target;try{for(;d;){if(d.isEventTarget&&d.draggable)break;d=d.parentNode}}catch(E){d=null}if(d){ca?
(B=(q=ca.current.pageX)-ca.down.pageX,x=(v=ca.current.pageY)-ca.down.pageY,b=ca):(B=(q=qa)-b.down.pageX,x=(v=ra)-b.down.pageY,b=ha[oa]);bb=q;cb=v;if(!Y)Y=la("DIV",{position:"absolute",top:b.down.pageX+"px",left:b.down.pageY+"px",zIndex:65535,overflow:"visible",width:0,height:0}),wa=la("DIV",{position:"absolute",top:0,left:0,zIndex:255,overflow:"visible",width:0,height:0}),Ia=la("DIV",{position:"absolute",top:"-25px",left:"-25px",zIndex:65535,overflow:"visible",width:"50px",height:"50px"}),Ia.innerHTML=
"&nbsp;";Y.appendChild(wa);!s.msie&&!ca&&Y.appendChild(Ia);Y.style.left=q+"px";Y.style.top=v+"px";Ia.style.cursor="default";R.appendChild(Y);L=new Xb;L.setDragImage=S;L.addElement=ba;k=new fa({type:"dragstart",target:d,relatedTarget:null,button:oa,pageX:b.down.pageX,pageY:b.down.pageY,targetX:b.down.targetX,targetY:b.down.targetY,deltaX:0,deltaY:0,dataTransfer:L});C(k);if(k.defaultPrevented)I(),b.preventDrag=!0,ga=!1,L=ca=oa=null;else if(na.realtime=L.realtime,za=b.down.target=d,ga=!0,ya=L.lift!==
!1,$=null,b.longpressSent=b.tapFired=b.preventClick=!0,Ha=!1,da(),L.effectAllowed=xa,L.dropEffect=ka,R.setCapture&&R.setCapture(),s.msie)Db=R.style.cursor||"auto",R.style.cursor="default"}else oa=ca=null}}if(ga){l=ca?ca.current.target:sa;if(ya&&$&&$!==l){d=l;try{for(;d;){if(d===$)break;d=d.parentNode}}catch(G){d=null}if(!d||d===Z||d===m||d===R)b=new fa({type:"dragleave",target:$,relatedTarget:za,button:oa,pageX:q,pageY:v,dataTransfer:L}),C(b),L.effectAllowed=xa,L.dropEffect=ka="none",$=null,Ha=!1}if(ya&&
!$&&l){d=l;try{for(;d;){if(d.isEventTarget)break;d=d.parentNode}}catch(N){d=null}if(d)l=new fa({type:"dragenter",target:$=d,relatedTarget:za,button:oa,pageX:q,pageY:v,dataTransfer:L}),C(l),l.defaultPrevented?(Ha=!0,ea(),L.effectAllowed=xa):(Ha=!1,L.effectAllowed=xa,L.dropEffect=ka="none")}if(ya&&$&&Ha)l=new fa({type:"dragover",target:$,relatedTarget:za,button:oa,pageX:q,pageY:v,deltaX:B,deltaY:x,dataTransfer:L}),C(l),l.defaultPrevented?(ea(),L.effectAllowed=xa):(Ha=!1,L.effectAllowed=xa,L.dropEffect=
ka="none");q=new fa({type:"drag",target:za,relatedTarget:$,button:oa,pageX:q,pageY:v,deltaX:B,deltaY:x,dataTransfer:L});C(q);q.defaultPrevented&&(ab=!0);if(L)if(da(),L.dropEffect=ka,ya){if(Ia.style.cursor=Cb[ka],s.msie)R.style.cursor=Cb[ka]}else s.msie?R.style.cursor=L.cursor==="pointer"?"hand":L.cursor||"hand":Ia.style.cursor=L.cursor==="hand"?"pointer":L.cursor||"pointer";return h.sleep(Zb)}for(y in ha)if(b=ha[y],b.pressed&&(l=b.down))if(g=!0,!b.longpressSent&&l.target&&Ca(qa-l.pageX)+Ca(ra-l.pageY)<=
1&&l.timeStamp<=c){if(b.longpressSent=!0,q=l.clone(),q.type="longpress",q.nativeEvent=null,C(q),q.defaultPrevented)b.preventClick=!0}else!b.longpressSent&&r>l.timeStamp+A.LONGPRESS_INTERVAL&&(r=l.timeStamp+A.LONGPRESS_INTERVAL);for(z in ma)if(b=ma[z],b.pressed&&(u=b.down))if(g=!0,!b.longpressSent&&(w=b.current)&&u.target&&Ca(w.pageX-u.pageX)+Ca(w.pageY-w.pageY)<=8&&u.timeStamp<=c){if(b.longpressSent=!0,q=new fa(ovi.extend({type:"longpress"},u)),C(q),q.defaultPrevented)b.tapFired=!0}else!b.longpressSent&&
r>u.timeStamp+A.LONGPRESS_INTERVAL&&(r=u.timeStamp+A.LONGPRESS_INTERVAL);if(ga)return h.sleep(Eb);if(g){if((q=r-p)<0)q=1;return h.sleep(q)}return h.sleep()})(),Va=0,Wa=0,ib,hb,Na=!1,db=!1,Ja=0,Ka=!1,sb=0,Ra=null,eb=0,fb=h.create("nokia.maps.dom.Page#mouseMoveCo",function(a,f){var e,b,l,p;p=ja;var c=f.callTime;c>=eb&&(Ra&&C(Ra),Ra=null,eb=c+A.MOUSEMOVE_THRESHOLD);if(ja&&ja!==sa)l=new fa({type:"mouseout",target:ja,relatedTarget:sa,pageX:qa,pageY:ra,clientX:Ea,clientY:Fa,fg:f.mouseCurrentOverDispatchPath}),
f.mouseCurrentOverDispatchPath=null,C(l),ja=null;for(l=-1;++l<Ga.length;)if(b=Ga[l],(e=Bb(Ga,b))>=0&&(!b.hitTest||!b.hitTest(qa,ra)))Ga.splice(e,1),e=new fa({type:"mouseleave",target:b,pageX:qa,pageY:ra,clientX:Ea,clientY:Fa,fg:f.mouseCurrentEnterDispatchPath}),f.mouseCurrentEnterDispatchPath=null,C(e),l--;if(sa&&!ja){ja=sa;if(ja!==Z&&ja!==m&&ja!==R&&ja!==W&&Bb(Ga,ja)<0)l=new fa({type:"mouseenter",target:ja,pageX:qa,pageY:ra,clientX:Ea,clientY:Fa}),Ga.push(ja),l=F(l),f.mouseCurrentEnterDispatchPath=
Sa.getDispatchPath(ja,l.type,l.display),C(l);p=new fa({type:"mouseover",target:ja,relatedTarget:p,pageX:qa,pageY:ra,clientX:Ea,clientY:Fa});p=F(p);f.mouseCurrentOverDispatchPath=Sa.getDispatchPath(ja,p.type,p.display);C(p)}if(!Ra||eb<=c)return h.sleep();return h.sleep(eb-c)})(),Fb=!1,V=va<=8?m:Z,P=va<=8?!1:!0;na.onError=fb.onError=function(){};O(m,"touchstart",X,P);O(m,"touchmove",z,P);O(m,"touchend",y,P);O(V,"gesturestart",q,P);O(V,"gesturechange",q,P);O(V,"gestureend",q,P);O(V,"orientationchange",
function(){C(F(event));C(new fa({type:"resize",target:Z}))},P);O(V,"MSPointerDown",p,P);O(V,"MSPointerMove",p,P);O(V,"MSPointerUp",p,P);O(V,"MSGestureStart",q,P);O(V,"MSGestureChange",q,P);O(V,"MSGestureEnd",q,P);O(V,"resize",function(){h.resume(B)},P);O(V,"mouseover",function(a){H(a)},P);O(V,"mouseout",function(a){var f=F(a),e,b;H(a);if(!s.msie&&(e=a.relatedTarget)&&e.nodeName==="IFRAME")for(b in ha)if(ha[b].pressed)a=f.clone(),a.target=sa,a.type="mouseup",a.button=b,C(a);h.resume(fb)},P);O(V,"click",
function(a){var f;H(a);f=F(a);if(!(s.opera&&a.button===2)){if(s.opera&&a.button===2)(time=c())-Ja<A.DOUBLE_CLICK_TIME?(doubleClickEvent=f.clone(),doubleClickEvent.type="dblclick",C(doubleClickEvent),Ja=0):Ja=time;C(f)}},P);O(V,"wheel",J,P);O(V,"mousewheel",J,P);O(V,"DOMMouseScroll",J,P);O(V,"dblclick",J,P);O(V,"mousedown",function(a){var f=F(a),e;e=f.target;var b=f.pageX,m=f.pageY,l,p;H(a);f.target=sa;if(va<=8&&f.button===0&&e&&e.style&&(e.style.overflow==="auto"||e.style.overlfow==="scroll"))if(a=
K(e),l=a.right-$a.width,p=a.bottom-$a.height,e.clientHeight<e.scrollHeight&&b>=l&&b<=a.right||e.clientWidth<e.scrollWidth&&m>=p&&m<=a.bottom)return;db=f.button===2?!0:!1;C(f);if(s.opera&&s.version<11&&f.button===2)db=!1,f=f.clone(),f.type="mouseup",C(f),e=f.clone(),e.type="click",C(e),(f=c())-Ja<A.DOUBLE_CLICK_TIME?(f=e.clone(),f.type="dblclick",C(f),Ja=0):Ja=f;h.resume(na)},P);O(V,"mouseup",function(a){var f=F(a),e,b=ha[f.button];if(!s.opera||!(s.version<11&&a.button===2)){H(a);f.target=sa;if(va<=
8&&!b.pressed)Ka=!0,e=f.clone(),e.type="mousedown",C(e);if(b.pressed){!ga&&!Aa&&na.run();C(f);if(e&&Ka)a=f.clone(),a.type="click",C(a),e.button!==2&&(Ka=!1);h.resume(na)}}},P);O(V,"contextmenu",function(a){var f=F(a),e;H(a);if(ga)f.preventDefault();else{if(db&&!s.gecko&&!Ka&&(a=f.clone(),a.type="click",C(a),a.button===2&&(s.chrome||s.safari||s.opera||va>=9)))(e=c())-sb<A.DOUBLE_CLICK_TIME?(a=a.clone(),a.type="dblclick",C(a),sb=0):sb=e;if(Ka)a=f.clone(),a.type="dblclick",C(a);f.target.isEventTarget&&
(ha[2].pressed||ha[0].pressed&&Xa&&wb)?(setTimeout(function(){if(!Ma)f.defaultPrevented=!1,C(f)},250),f.preventDefault()):Ma?f.preventDefault():C(f);db=Ka=!1}},P);O(V,"mousemove",function(a){var f,e,b,m=-1,l=c();H(a);f=F(a);f.target=sa;ga?(Y.style.left=qa+"px",Y.style.top=ra+"px",(L.realTime||!ya)&&na.run()):(Ra=f,h.resume(fb),na.run());if(va<=8){for(;++m<ha.length;)if(b=ha[m],b.pressed&&!(a.button&rb[m])&&(b=b.down.target,e=f.clone(),e.type="mouseup",e.button=m,C(e),!ga&&!e.defaultPrevented))e=f.clone(),
e.type="click",e.button=m,e.target=b,C(e);h.schedulerNextRuntime()<l-10&&h.scheduler()}},P);O(V,"keydown",J,P);O(V,"keypress",J,P);O(V,"keyup",J,P);O(V,"focus",J,P);O(V,"blur",J,P);O(m,"selectstart",function(a){for(var a=F(a),f=Ab(a.target),e=-1,b=f.length;++e<b;)if(f[e].draggable)return a.preventDefault(),!1},P);O(m,"dragstart",function(a){if(!s.dnd)for(var f=Ab(a.target),e=f.length,b=-1;++b<e;)if(f[b].isEventTarget&&f[b].draggable)return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},
P);O(m,"drag",function(a){var f=sa;H(a);sa=f||null},P);O(m,"dragover",function(a){if(a&&a.target&&a.target.droppable)a.preventDefault?a.preventDefault():a.returnValue=!1},P);O(m,"dragenter",function(a){var a=F(a),f;if($)f=a.target,a.target=$,a.type="dragleave",C(a),a.type="dragenter",a.target=f;C(a)},P);O(m,"drop",function(a){C(a=F(a));if(a.defaultPrevented)a.type="dragleave",a.target=$,C(a);if(Fb)a.type="dragend",a.target=za,C(a)},P);O(m,"dragend",function(a){Fb=!0;!$&&C(F(a))},P);O(Z,"beforeunload",
J,!1);aa();m.$jslPage=T;T.window=Z;T.document=m;T.html=W;T.head=U;T.body=R;T.documentMode=va;T.quirksMode=Yb;T.scrollbarsWidth=$a.width;T.scrollbarsHeight=$a.height;T.parseEvent=F;T.update=aa;T.processEvent=C;T.$=function(a){return this.document.getElementById(a)};T.setStyle=M;T.createElement=la;T.getClientRect=K;T.destroy=function(){h.kill(B);h.kill(na);h.kill(fb)};T.bv=function(a){eval("fn = "+a.toString());return a};T.ctrlKeyDown=function(){return Xa};T.shiftKeyDown=function(){return jb};T.altKeyDown=
function(){return kb};T.metaKeyDown=function(){return lb}},A=d.Page=function(f){var e=document,b;if(!f){if(e.$jslPage)return e.$jslPage;return new z(e)}if(f.$jslPage)return f.$jslPage;if((b=a(f))!=="document"){if(b==="window")e=f.document;else if(f.ownerDocument)e=f.ownerDocument;else if(f.parentNode)for(e=null;f&&f.parentNode;){if((b=a(f))==="document"){e=f;break}if(b==="window"){e=f.document;break}if(f.ownerDocument){e=f.ownerDocument;break}f=f.parentNode}e||k.c("Invalid node given!")}else e=f;
if(e.$jslPage)return e.$jslPage;return new z(e)},p={parseEvent:function(a){if(a instanceof d.Event)return event;var f=(a=a||window.event)&&(a.target||a.srcElement)||null,f=f&&f.ownerDocument||document;if(!f)return A().parseEvent(a);if(f.$jslPage)return f.$jslPage.parseEvent(a);return(new z(f)).parseEvent(a)},LONGPRESS_INTERVAL:500,MOUSEMOVE_THRESHOLD:0,DOUBLE_TAP_TIME:500,DOUBLE_CLICK_TIME:300,RESIZE_IDL_TIME:1E3,RESIZE_SLEEP_MIN_TIME:125,RESIZE_SLEEP_MAX_TIME:500,platform:r,browser:s,Df:[],ae:[]},
B=h.create("nokia.maps.dom.Page#resizeCo",function(f,e){var b=d.Event,m=A.ae,l=m.length,p=e.callTime,c,g,r;switch(f.ip){default:f.ip=0;case 0:f.resizeData=[],f.ip++;case 1:f.i=-1,f.resizesRunning=0,f.ip++;case 2:for(;++f.i<l;){l=m[f.i];r=l.node;m=!1;l.mode=l.mode||0;if((c=a(r))==="window"){if(g=A(r),g.update(),g.layoutWidth!==l.layoutWidth||g.layoutHeight!==l.layoutHeight)l.layoutWidth=g.layoutWidth,l.layoutHeight=g.layoutHeight,m=!0}else if(c==="element"&&(g=A(r),l.offsetWidth!==r.offsetWidth||l.offsetHeight!==
r.offsetHeight))l.offsetWidth=r.offsetWidth,l.offsetHeight=r.offsetHeight,m=!0;if(m){if(l.mode===0)l.mode=1,g.processEvent(new b({type:"resizestart",target:r}));l.lastResizeTime=p;g.processEvent(new b({type:"resize",target:r}));f.resizesRunning++}else if(l.mode===1)p>l.lastResizeTime+A.RESIZE_IDL_TIME?(l.mode=0,g.processEvent(new b({type:"resizeend",target:r}))):f.resizesRunning++;return h.yield()}f.ip++;case 3:if(f.ip=1,f.resizesRunning)return h.sleep(A.RESIZE_SLEEP_MIN_TIME)}return h.sleep(A.RESIZE_SLEEP_MAX_TIME)})();
ovi.extend(A,p);B.onError=function(){};if(r.ipad||r.iphone)h.MAX_EXEC_TIME=10,h.AF_MAX_EXEC_TIME=10,h.SLICE_SIZE=5,h.AF_SLICE_SIZE=5}})(nokia.maps.dom);ovi.provide("nokia.maps.gfx.IDL");
(function(){var d=nokia.maps.dom.Page.browser,k=d.mozilla&&!d.fullVersion.indexOf("3.6"),h=nokia.maps.util.c,c=[],b={},g=function(){var a={BEGIN_2D_IMAGE:["-","begin2dImage"],BEGIN_PATH:["@","beginPath"],MOVE_TO:["M","moveTo"],LINE_TO:["L","lineTo"],BEZIER_CURVE_TO:["C","bezierCurveTo"],STROKE_TEXT:["t","strokeText"],FILL_TEXT:["T","fillText"],CLOSE_PATH:["x","closePath"],FILL:["f","fill"],STROKE:["s","stroke"],SAVE:[">","save"],RESTORE:["<","restore"],SET:["#","set"],DRAW_IMAGE:["I","drawImage"],
END:["X","end"]},f;for(f in a)a[f]=a[f][0].charCodeAt(0),b[a[f]]=f;return a}(),a=[["strokeColor",255,1],["fillColor",255,2],["lineWidth",1,3],["lineCap","round",4],["lineJoin","miter",5],["miterLimit",10,6],["font","10px sans-serif",7],["textAlign","start",8],["textBaseline","middle",9],["opacity",1,10]],e=nokia.maps.util.Matrix3D,l=function(){for(var f=-1,e=a.length,b=[];++f<e;)b.push(a[f][0]);return b}(),f=nokia.maps.gfx.IDL=new ovi.Class({initialize:function(a){this.data=a&&a.length>3?a:a=[];this.width=
a[1];this.height=a[2];this.description=a[3];this.resetState()},Statics:{attributeToIdentifier:{},identifierToAttribute:{},opcodes:g},resetState:function(){var f=-1,b=a.length;this.Wa=[];for(this.matrix=new e;++f<b;)this[a[f][0]]=a[f][1]},saveState:function(a){var f=this.Wa,e=l.length,b=-1;f.push(a);for(f.push(this.matrix.clone());++b<e;)f.push(this[l[b]])},restoreState:function(){var a=this.Wa,f=l.length;if(!a.length)return this.resetState();for(;f;)this[l[--f]]=a.pop();this.matrix=a.pop();return a.pop()},
push:function(){for(var a=this.data,f=this.matrix.rows,e=f[0],f=f[1],l,c,d,u,w,v,x,z=-1,A=arguments,B=A.length;++z<B;)l=A[z],l===g.BEGIN_2D_IMAGE?a.push(l,this.width=+A[++z],this.height=+A[++z],this.description=""+A[++z]):l===g.MOVE_TO||l===g.LINE_TO?(v=+A[++z],x=+A[++z],a.push(l,e[0]*v+e[1]*x+e[3],f[0]*v+f[1]*x+f[3])):l===g.STROKE_TEXT||l===g.FILL_TEXT?(c=A[++z],v=+A[++z],x=+A[++z],d=+A[++z],u=+A[++z],a.push(l,c,e[0]*v+e[1]*x+e[3],f[0]*v+f[1]*x+f[3],e[0]*d+e[1]*u+e[3],f[0]*d+f[1]*u+f[3])):l===g.BEZIER_CURVE_TO?
(c=+A[++z],d=+A[++z],u=+A[++z],w=+A[++z],v=+A[++z],x=+A[++z],a.push(l,e[0]*c+e[1]*d+e[3],f[0]*c+f[1]*d+f[3],e[0]*u+e[1]*w+e[3],f[0]*u+f[1]*w+f[3],e[0]*v+e[1]*x+e[3],f[0]*v+f[1]*x+f[3])):l===g.SET?a.push(l,A[++z],A[++z]):l===g.DRAW_IMAGE?a.push(l,A[++z],A[++z],A[++z],A[++z],A[++z],A[++z],A[++z],A[++z],A[++z],this.matrix.clone()):b[l]?(l===g.CLOSE_PATH&&k&&a.push(l),a.push(l)):h('Invalid opcode "'+l+'" found in IDL')},concat:function(a){var e=new f,b;for(b in this)e[b]=this[b];e.data=this.data.concat(a.data.slice(4));
e.Wa=this.Wa.concat(c);return e},append:function(a){this.data=this.data.concat(a.data.slice(4));return this},clone:function(){var a=new f,e;for(e in this)a[e]=this[e];a.data=this.data.concat(c);a.Wa=this.Wa.concat(c);return a}});(function(){for(var e=-1,b=a.length,l,c;++e<b;)l=a[e],c=l[0],l=l[2],f.attributeToIdentifier[c]=l,f.identifierToAttribute[l]=c})()})();ovi.provide("nokia.maps.dom.imgLoader");
(function(){function d(a,f,e,b,m,l,c){r.push(m);delete b.Dh;delete e.hh;a&&a.call(f,e,l,c)}function k(){m=h(self,!0);k=!1}function h(a,f){a=g.Qa(a.document.body,"iframe",!1,f?"display:none":!1).contentWindow;g.Qa(a.document.head,"base").href=document.baseURI;return a}function c(a){a.onerror?a.onerror.call(a,p,!0):a.onload=a.onerror=null;a.removeAttribute("src")}function b(a,e,b,m){var l,c=!0;a||(a=new Image);a.onload=a.onerror=function(f,e){a.onload=a.onerror=null;l=(f||a.ownerDocument.parentWindow.event).type===
"load";b&&b.call(m,a,e?void 0:l,e||c)};a.src=e;l===void 0&&(a.complete&&a.onload.call(a,a.naturalWidth!==0?f:p),c=!1);return l}var g=nokia.maps.dom,a=g.Page.browser,e=a.msie,l=a.webkit,f={type:"load"},p={type:"error"},m,r=[],q=g.loadImg=l?function(a,f,e,l){var c,p;k&&k();c=r.pop()||h(m);p=a.hh=new c.Image;p.Dh=c;a.ce=b(p,f,function(m,p,g){p?a.ce=b(a,f,function(a,f,b){d(e,l,a,m,c,f,b&&g)}):d(e,l,a,m,c,p,g)});p=a.ce;delete a.ce;return p}:b,y=g.cancelImg=l?function(a){if(a=a.hh)a.Dh.stop(),c(a)}:c,s=
g.imgLoader={maxRequests:a.mobile?6:34,Gc:[],Db:0,request:function(a,f,e,b){s.Gc.push([a,f,e,b]);return s.dh(!1)},cancel:function(a){for(var f,e=s.Gc,b,m=0,l=s.Gc.length;m<l;m++)if(e[m][0]===a){f=e.splice(m,1)[0];break}f?(b=f[2])&&b.call(f[3],a,void 0,!0):y(a)},Xd:function(){s.dh(!0)},dh:function(a){var f=s.maxRequests,b,m=s.Gc,l=m.splice(0,f-s.Db),c=l.length,p;for(p=0;p<c;p++)b=l[p],++s.Db,b=q(b[0],b[1],function(b,l){return function(c,p,g){--s.Db<f&&m.length&&(g&&!a?setTimeout(s.Xd,0):e?setTimeout(s.Xd,
0):s.Xd());b&&b.call(l,c,p,g)}}(b[2],b[3]),s);return!a?b:void 0}}})();ovi.provide("nokia.maps.gfx.Graphics");
(function(){var d=ovi.type,k=1/(180/Math.PI),d=ovi.type,h=nokia.maps.gfx,c=nokia.maps.util,b=h.Color.parseCss,g=h.IDL,a=g.opcodes,e=g.attributeToIdentifier;nokia.maps.gfx.Graphics=new ovi.Class({initialize:function(a){if(a instanceof g)this.e=a},beginImage:function(e,f,b){(this.e=new g).push(a.BEGIN_2D_IMAGE,e,f,""+b);return this},getIDL:function(){return this.e},setIDL:function(a){this.e=a instanceof g?a:c.c("idl must be an instance of nokia.maps.gfx.IDL");return this},getWidth:function(){return this.e.width},
getHeight:function(){return this.e.height},getMatrix:function(){return this.e.matrix},getDescription:function(){return this.e.description},save:function(){this.e&&(this.e.push(a.SAVE),this.e.saveState());return this},restore:function(){this.e&&(this.e.push(a.RESTORE),this.e.restoreState());return this},set:function(l,f){var c=this.e;if(l==="width"||l==="height"){if((f=+f)<0)f=0;c[l]=f;this.beginImage(c.width,c.height,c.description)}else if(l==="description")c.data[3]=c.description=f;else{l==="fillStyle"&&
(l="fillColor");l==="strokeStyle"&&(l="strokeColor");if((l==="fillColor"||l==="strokeColor")&&d(f)==="string")f=b(f);c[l]=f;e[l]&&c.data.push(a.SET,e[l],f)}return this},fill:function(){this.e.data.push(a.FILL);return this},stroke:function(){this.e.data.push(a.STROKE);return this},scale:function(a,f){this.e.matrix=this.e.matrix.scale(a,f,1);return this},rotate:function(a){this.e.matrix=this.e.matrix.rotateZ(a*k);return this},translate:function(a,f){this.e.matrix=this.e.matrix.translate(a,f,0);return this},
drawRect:function(e,f,b,m,c,g){var d=this.e,h,k,c=+c||0,g=+g||c;c===0&&g===0?d.push(a.BEGIN_PATH,a.MOVE_TO,e,f,a.LINE_TO,h=e+b,f,a.LINE_TO,h,k=f+m,a.LINE_TO,e,k,a.CLOSE_PATH):(h=0.5522847498*c,k=0.5522847498*g,b=e+b,m=f+m,d.push(a.BEGIN_PATH,a.MOVE_TO,e+c,f,a.LINE_TO,b-c,f,a.BEZIER_CURVE_TO,b-c+h,f,b,f+g-k,b,f+g,a.LINE_TO,b,m-g,a.BEZIER_CURVE_TO,b,m-g+k,b-c+h,m,b-c,m,a.LINE_TO,e+c,m,a.BEZIER_CURVE_TO,e+h,m,e,m-g+k,e,m-g,a.LINE_TO,e,f+g,a.BEZIER_CURVE_TO,e,f+g-k,e+h,f,e+c,f,a.CLOSE_PATH));return this},
drawImage:function(e,f,b,m,c,g,d,h,k){this.e.push(a.DRAW_IMAGE,e,f,b,m,c,g,d,h,k);return this},drawEllipse:function(e,f,b,m){var c=this.e,g=e,d=e+b,h=f,k=f+m;b/=2;var w=m/2,v=0.5522847498*b,m=0.5522847498*w;e+=b;f+=w;b=e-v;v=e+v;w=f-m;m=f+m;c.push(a.BEGIN_PATH,a.MOVE_TO,e,k,a.BEZIER_CURVE_TO,v,k,d,m,d,f,a.BEZIER_CURVE_TO,d,w,v,h,e,h,a.BEZIER_CURVE_TO,b,h,g,w,g,f,a.BEZIER_CURVE_TO,g,m,b,k,e,k,a.CLOSE_PATH)},beginPath:function(){this.e.push(a.BEGIN_PATH);return this},moveTo:function(e,f){this.e.push(a.MOVE_TO,
e,f);return this},closePath:function(){this.e.push(a.CLOSE_PATH);return this},lineTo:function(e,f){this.e.push(a.LINE_TO,e,f);return this},polylineTo:function(e){for(var f=e.length,b=0,m=[];b<f;)m.push(a.LINE_TO,e[b++],e[b++]);this.e.push.apply(this.e,m);return this},quadraticCurveTo:function(a,f,e,b){return this.bezierCurveTo(a,f,a,f,e,b)},bezierCurveTo:function(e,f,b,m,c,g){this.e.push(a.BEZIER_CURVE_TO,e,f,b,m,c,g);return this},fillText:function(e,f,b,m,c){var g=this.e,m=d(m)==="number"?m:f+1,
c=d(c)==="number"?c:b;g.push(a.FILL_TEXT,e,f,b,m,c);return this},strokeText:function(e,f,b,m,c){var g=this.e,m=d(m)==="number"?m:f+1,c=d(c)==="number"?c:b;g.push(a.STROKE_TEXT,e,f,b,m,c);return this}})})();ovi.provide("nokia.maps.gfx.SvgParser");
(function(){function d(a){for(var a=a.replace(/[\,]/g," ").replace(/\s+/g," ").replace(/([0-9])(\-|\+)([0-9])/g,"$1 $2$3").replace(/^\s+/g,"").replace(/\s+$/g,"").split(" "),f=0,e=a.length;f<e;f++)a[f]=+a[f];return a}function k(f){f=a.FontHelper.Mg(f);return+f.substr(0,f.length-2)}function h(a,f){var e=a.getAttribute(f);return e?k(e):0}function c(a,f,e){for(;a&&a.nodeType===1;){if(a.getAttribute(f))return a.getAttribute(f);a=a.parentNode}return e}var b=Math.PI,g=nokia.maps,a=g.util,e=a.Matrix3D,l=
a.FontHelper.toString,f=nokia.maps.gfx,p=f.Graphics,m=f.Color.parseCss,r=f.IDL.opcodes,f=document.documentElement,q=g.dom.getStyle(f,"fontFamily"),y=g.dom.getStyle(f,"fontSize");nokia.maps.gfx.SvgParser=new ovi.Class({svg:function(a){var f=this.F,b=f&&f.getIDL(),m=b?f.getWidth():h(a,"width"),l=b?f.getHeight():h(a,"height"),c=a.getAttribute("viewBox"),p=c?c.split(" "):[0,0,m,l],c=m/p[2],g=l/p[3],r=-p[0]*c,p=-p[1]*g;b||f.beginImage(m+0,l+0);f.getIDL().matrix=f.getIDL().matrix.concat(new e([[c,0,0,r],
[0,g,0,p],[0,0,1,0]]));this.eh(a)},rect:function(a){var f=h(a,"x"),e=h(a,"y"),b=h(a,"width"),m=h(a,"height"),l=h(a,"rx"),c=h(a,"ry")||l;this.F.drawRect(f,e,b,m,l,c);this.qa(a,!0)},circle:function(a){var f=h(a,"cx"),e=h(a,"cy"),b=h(a,"r");this.F.drawEllipse(f-b,e-b,2*b,2*b);this.qa(a,!0)},ellipse:function(a){var f=h(a,"cx"),e=h(a,"cy"),b=h(a,"rx"),m=h(a,"ry");this.F.drawEllipse(f-b,e-m,2*b,2*m);this.qa(a,!0)},line:function(a){var f=this.F,e=h(a,"x1"),b=h(a,"y1"),m=h(a,"x2"),l=h(a,"y2");f.beginPath();
f.moveTo(e,b);f.lineTo(m,l);this.qa(a,!0)},polyline:function(a){var f=this.F,e=d(a.getAttribute("points")),b=e.length,m=2;f.beginPath();for(f.moveTo(e[0],e[1]);m<b;m+=2)f.lineTo(e[m],e[m+1]);this.qa(a,!0)},polygon:function(a){var f=this.F,e=d(a.getAttribute("points")),b=e.length,m=2;f.beginPath();for(f.moveTo(e[0],e[1]);m<b;m+=2)f.lineTo(e[m],e[m+1]);f.closePath();this.qa(a,!0)},path:function(a){var f=this.F,e=f.getIDL(),b;b=a.getAttribute("d").replace(/[\,]/g," ").replace(/\s+/g," ").replace(/([0-9])\-/g,
"$1 -").replace(/([0-9])\+/g,"$1 ").replace(/([a-zA-Z])([a-zA-Z])/g,"$1 $2").replace(/([a-df-zA-DF-Z])([0-9]|\.|\-|\+)/g,"$1 $2").replace(/([0-9])([a-df-zA-DF-Z])/g,"$1 $2").replace(/^\s+/g,"").replace(/\s+$/g,"").split(" ");b=b.length===1&&b[0]===""?[]:b;var m=this.qa(a,!1),a=m&1;m&=2;var l=0,c=0,p=-1,g,q,d,h,k,y,J,C,H,ba,S,da;for(e.push(r.BEGIN_PATH);;){if(!H){C=b[++p];if(!C)break;H=C.toLowerCase();C=C.toUpperCase()===C}ba=H;if(H==="m")S=l=g=+b[++p]+(C?0:l),da=c=q=+b[++p]+(C?0:c),e.push(r.MOVE_TO,
g,q),H=(J=+b[p+1])===J?"l":null;else if(H==="l")l=g=+b[++p]+(C?0:l),c=q=+b[++p]+(C?0:c),e.push(r.LINE_TO,g,q),H=(J=+b[p+1])===J?H:null;else if(H==="h")l=g=+b[++p]+(C?0:l),q=c,e.push(r.LINE_TO,g,q),H=(J=+b[p+1])===J?H:null;else if(H==="v")g=l,c=q=+b[++p]+(C?0:c),e.push(r.LINE_TO,g,q),H=(J=+b[p+1])===J?H:null;else if(H==="z")e.push(r.CLOSE_PATH),H=null,l=S,c=da;else if(H==="c"||H==="q")d=+b[++p]+(C?0:l),h=+b[++p]+(C?0:c),H==="q"?(k=d,y=h):(k=+b[++p]+(C?0:l),y=+b[++p]+(C?0:c)),l=g=+b[++p]+(C?0:l),c=
q=+b[++p]+(C?0:c),e.push(r.BEZIER_CURVE_TO,d,h,k,y,g,q),H=(J=+b[p+1])===J?H:null;else if(H==="s"||H==="t")d==="c"||d==="q"||d==="s"||d==="t"?(k=l-k,y=c-y,d=l+=k,h=c+=y):h=d=l,H==="q"?(k=d,y=h):(k=+b[++p]+(C?0:l),y=+b[++p]+(C?0:c)),l=g=+b[++p]+(C?0:l),c=q=+b[++p]+(C?0:c),e.push(r.BEZIER_CURVE_TO,d,h,k,y,g,q),H=(J=+b[p+1])===J?H:null;else{ovi.warn("SvgParser hit unknown command '"+H+"' at path element!");break}d=ba}a&&f.stroke();m&&f.fill()},text:function(a){var f=this.F;f.getIDL();var e=this.qa(a,
!1),b=c(a,"font",null),m,b=b?this.Zl(b):{};b.style=c(a,"font-style",null)||b.style;b.variant=c(a,"font-variant",null)||b.variant;b.weight=c(a,"font-weight",null)||b.weight;b.size=k(c(a,"font-size",null)||b.size||y)+"px";b.family=c(a,"font-family",null)||b.family||q;f.set("font",l(b));f.set("textAlign",c(a,"text-anchor","start").replace("middle","center"));if(e&&(m=a.textContent||a.text))b=h(a,"x"),a=h(a,"y"),e&1&&f.strokeText(m,b,a),e&2&&f.fillText(m,b,a)},image:function(){},linearGradient:function(){},
radialGradient:function(){},use:function(){},g:function(a){this.eh(a)},Zl:function(f){var e=a.FontHelper.parse;this.wd||(this.wd={});var b=this.wd[f];b||(b=this.wd[f]=e(f));return b},Sd:function(f,e){var b,m=ovi.type(f),l;if(m==="string")b=(l=nokia.maps.util.Xe(f)).documentElement;else if(m==="document"&&f.documentElement)b=(l=f).documentElement;ovi.type(b)!=="element"&&a.c("svgMarkup needs to be a valid SVG string or XML document!");this.F=e||new p;this.fh(b);return l},parseSvg:function(a){this.Sd(a);
return this.F.getIDL()},parseSvgInfo:function(a){return(a=this.Sd(a))?{width:this.F.getWidth(),height:this.F.getHeight(),document:a}:null},parseSvgToGraphics:function(a,f){this.Sd(a,f);return this.F},fh:function(a){var f=this.F,e,b=this[a.nodeName];this.bn(a);f.save();(e=a.getAttribute("transform"))&&this.hk(e);b&&b.call(this,a);f.restore()},eh:function(a){for(a=a.firstChild;a;a=a.nextSibling)a.nodeType===1&&this.fh(a)},bn:function(a){var f=a.getAttribute("style"),e,b=/([^:\s*]+)\s*:\s*([^;]+?)\s*(;|$)/g;
if(f){for(;e=b.exec(f);)a.setAttribute(e[1],e[2]);a.removeAttribute("style")}},hk:function(a){for(var f,m=/([a-zA-Z]*)\s*\(([^\)]*)\)/g,l,c=this.F.getIDL(),p=c.matrix;f=m.exec(a);)switch(l=d(f[2]),f[1].toLowerCase()){case "matrix":p=p.concat(new e([[l[0],l[2],0,l[4]],[l[1],l[3],0,l[5]],[0,0,1,0]]));break;case "translate":p=p.translate(l[0],l.length>1?l[1]:0,0);break;case "scale":p=p.scale(l[0],l.length>1?l[1]:l[0],0);break;case "rotate":l.length>1&&(p=p.translate(l[1],l[2],0));p=p.rotateZ(-(l[0]/
180)*b);l.length>1&&(p=p.translate(-l[1],-l[2],0));break;case "skewx":p=p.skewX(l[0]);break;case "skewy":p=p.skewY(l[0])}c.matrix=p},qa:function(a,f){var e=this.F,b=e.getIDL().matrix,l=0,p=c(a,"fill","#000"),g=c(a,"stroke","none");e.set("opacity",+c(a,"opacity","1"));p!=="none"&&(l|=2,e.set("fillColor",m(p,+c(a,"fill-opacity","1"))),f&&e.fill());if(g!=="none"){l|=1;var r,b=b.getScale();e.set("strokeColor",m(g,+c(a,"stroke-opacity","1")));(r=c(a,"stroke-width",0))&&e.set("lineWidth",k(r)*0.5*(b.x+
b.y));e.set("lineCap",c(a,"stroke-linecap","flat").replace("flat","butt"));e.set("lineJoin",c(a,"stroke-linejoin","miter"));e.set("miterLimit",+c(a,"stroke-miterlimit",4));f&&e.stroke()}return l}})})();ovi.provide("nokia.maps.geo.Strip");
(function(d){var k=d.geo.Coordinate,h=d.util,c=h.Coroutine,b=h.c,g=d.geo.Strip=new ovi.Class({initialize:function(a,e){this.internalArray=[];this.addAll(a,0,e)},destroy:function(){this.Pa&&c.kill(this.Pa)},internalArray:null,Pa:null,Statics:{fromObject:function(a){if(a instanceof g)return a;if(ovi.type(a)!=="array")return new g;return new g(a.length&&ovi.type(a[0])==="string"?g.convertToArray(a.slice(1),a[0]):g.convertToArray(a,"auto"),"values lat lng alt")},convertToArray:function(a,e){if(!a)return[];
if(a.length===0||e==="unsafe values lat lng alt")return a;if(a instanceof g)return a.asArray();var l=e?e.split(" "):["auto"],f=[],c=!1,m,r,q=l.length,d=0;l[0]==="unsafe"&&(c=!0,l.splice(0,1),q--);for(q>4&&b("convertToArray: i > 4");q--;)m=l[q],(m=this.Sm[m])?(l[q]=m[0],d+=m[1]):b("convertToArray: no member found");(d!==100||!l.length)&&b("convertToArray: counter does not match 100");(r=this.rd[l[0]])?r.call(this,c,a,f,l.slice(1)):b("convertToArray: function expected");return f},Sm:{lat:["latitude",
1],lng:["longitude",2],alt:["altitude",0],unsafe:["unsafe",0],coords:["coords",100],auto:["auto",100],arrays:["arrays",97],values:["values",97]},vk:{latitude:0,longitude:1,altitude:2},rd:{auto:function(a,e,b){h.isNumber(e[0])?g.rd.values(a,e,b,["latitude","longitude"]):g.rd.coords(a,e,b)},coords:function(a,e,l){var f=e.length,c,m;for(c=0;c<f;c++)a?m=e[c]:(m=k.fromObject(e[c]))||b("coords: expected geo.Coordinate"),l.splice(l.length,0,m.latitude,m.longitude,m.altitude)},values:function(a,e,b,f){g.Vf(!1,
a,e,b,f)},arrays:function(a,e,b,f){g.Vf(!0,a,e,b,f)}},Vf:function(a,e,l,f,c){var m=a?l[0].length:l.length,r=c.length,q=a?l.length:0,d,h;if(a)for(;q--;)l[q].length!==m&&b("_convertValues index out of bound");else m%r&&b("_convertValues members length is incorrect"),m/=r;for(q=0;q<m;q++){h=[q*3,0,void 0,void 0,void 0];for(d=0;d<r;d++)h[g.vk[c[d]]+2]=a?l[d][q]:l[q*r+d];e||k.isValid.apply(this,h.slice(2))?f.splice.apply(f,h):b("_convertValues: expected coords")}}},add:function(a,e){var l=this.getLength(),
a=k.fromObject(a),e=~~(e===0||e>0?e:l);e>l&&b("add: index out of bound");a&&this.oa(this,e,1,this.internalArray.splice(e*3,0,a.latitude,a.longitude,a.altitude))},addAll:function(a,e,l){var f=this.getLength(),e=~~(e===0||e>0?e:f);e>f?b("addAll: index out of bound"):this.splice(e,0,a,l)},addAllAsync:function(a,e,l,f){var p=this,m=p.getLength(),g,q=a[0]instanceof k?1:l?l.match("alt")?3:2:2,e=~~(e===0||e>0?e:m);e>m?b("addAll: index out of bound"):g=c.create("nokia.maps.geo.Strip#addAllAsyncCo",function(a){for(var f,
e,b=a.idx,m=a.coords,l=a.multiplier;(f=m.length)>0;)if(f=m.splice(0,(e=300*l)<f?e:f),p.splice(b,0,f,a.mode),b=a.idx=b+300,c.shallYield())return c.yield();a.callback&&a.callback()},"coords","idx","mode","multiplier","callback");p.Pa=g(a,e,l,q,f);p.Pa.onTerminated=function(){p.Pa=null};p.Pa.run()},set:function(a,e){a=+a;(a<0||a>this.getLength()||isNaN(a))&&b("geo.Strip#set: index out of bounds");(e=k.fromObject(e))&&this.oa(this,a=~~a,1,this.internalArray.splice(a*3,3,e.latitude,e.longitude,e.altitude))},
remove:function(a){a=+a;a<0||a>=this.getLength()||isNaN(a)?b("geo.Strip#remove: index out of bound"):this.oa(this,a=~~a,0,this.internalArray.splice(a*3,3))},splice:function(a,e,l,f){(a=+a)>=0&&a<=this.getLength()&&(e=+e)>=0||b("splice: arguments out of bound, idx="+a+", remove="+e);l=g.convertToArray(l,f);if(e||l.length)this.oa(this,a=~~a,l.length/3,this.internalArray.splice.apply(this.internalArray,[a*3,~~e*3].concat(l)))},get:function(a){var e=this.internalArray;!(a>=0&&a<e.length/3)&&b("get: index out of bound");
a=~~a*3;return new k(e[a],e[a+1],e[a+2],1)},getLatLng:function(a,e){var l=[],f,c=0;f=this.getLength();var m,a=+a;m=e<0?f+e:e?e+a>f?f:e+a:a+1;(isNaN(a)||a<0||(m=~~m)<a)&&b("getLatLng: index and count combination out of bounds");for(f=~~a;f<m;f++)l[c++]=this.internalArray[f*3],l[c++]=this.internalArray[f*3+1];return l},getLength:function(){return this.internalArray.length/3>>>0},asArray:function(){return[].concat(this.internalArray)},oa:function(){var a=this.ga,e;if(a)for(e=0;e in a;)a[e++].apply(a[e++],
arguments)},addObserver:function(a,e){typeof a!=="function"&&h.c("addObserver: callback is not a function");var b=this.ga||(this.ga=[]),f=b.length;b[f++]=a;e&&(b[f]=e);b.length=++f},removeObserver:function(a,e){var b,f,c=0;if(b=this.ga)for(f=b.length;c<f;)b[c]===a&&b[c+1]===e&&(b.splice(c,2),f===2&&delete this.ga),c+=2;return this}})})(nokia.maps);ovi.provide("nokia.maps.util._packaging.base");ovi.provide("nokia.maps.dom.Event");
(function(d){if(!nokia.maps.util.getConstructor(nokia.maps.dom.Event)){var k=!k,h=!k,c=nokia.maps.util.now,b=nokia.maps.util.c,g=d.Event=function(a){if(a)for(var e in a)this[e]=a[e];if(!this.timeStamp)this.timeStamp=c()};ovi.extend(g.prototype,{CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3,bubbles:k,canBubble:k,canSicker:k,cancelable:k,defaultPrevented:h,PROPAGATION_OK:0,PROPAGATION_STOP:1,PROPAGATION_STOP_IMMEDIATE:2,propagation:0,stopPropagation:function(){var a=this.nativeEvent;if(this.propagation===
0&&(this.propagation=1,a))try{a.stopPropagation?a.stopPropagation():a.cancelBubble=k}catch(e){}return this},cancel:function(){return this.stopImmediatePropagation().preventDefault()},stopImmediatePropagation:function(){var a=this.nativeEvent;if(this.propagation!==2&&(this.propagation=2,a))try{a.stopImmediatePropagation?a.stopImmediatePropagation():a.cancelBubble=k}catch(e){}return this},preventDefault:function(){var a=this.nativeEvent;if(!this.defaultPrevented&&(this.defaultPrevented=k,a))try{a.preventDefault?
a.preventDefault():a.returnValue=h}catch(e){}return this},DOM_INPUT_METHOD_UNKNOWN:0,DOM_INPUT_METHOD_KEYBOARD:1,DOM_INPUT_METHOD_PASTE:2,DOM_INPUT_METHOD_DROP:3,DOM_INPUT_METHOD_IME:4,DOM_INPUT_METHOD_OPTION:5,DOM_INPUT_METHOD_HANDWRITING:6,DOM_INPUT_METHOD_VOICE:7,DOM_INPUT_METHOD_MULTIMODAL:8,DOM_INPUT_METHOD_SCRIPT:9,DOM_KEY_LOCATION_STANDARD:0,DOM_KEY_LOCATION_LEFT:1,DOM_KEY_LOCATION_RIGHT:2,DOM_KEY_LOCATION_NUMPAD:3,DOM_KEY_LOCATION_MOBILE:4,DOM_KEY_LOCATION_JOYSTICK:5,getModifierState:function(){b("NOT IMPLEMENTED!")},
DOM_DELTA_PIXEL:0,DOM_DELTA_LINE:1,DOM_DELTA_PAGE:2,deltaMode:0,preventUnload:function(a){if(this.type==="beforeunload")this.nativeEvent.returnValue=a;return this},clone:function(){return new g(this)}})}})(nokia.maps.dom);ovi.provide("nokia.maps.gfx.BitmapImage");
(function(){var d=ovi.browser.msie&&ovi.browser.version<=9,k=ovi.browser.version>=8,h=nokia.maps.dom,c=ovi.type,b=h.setStyle,g=nokia.maps.gfx.Image,a=nokia.maps.util.c,e=nokia.maps.gfx.BitmapImage=new ovi.Class({Extends:nokia.maps.gfx.Image,initialize:function(e,f,b,m,r,q){var d=c(e),h;this.d=g.d++;this.B=f||document;this.width=b||0;this.height=m||0;this.opacity=1;this.offsetX=c(r)==="number"?r:void 0;this.offsetY=c(q)==="number"?q:void 0;if(d==="string")this.src=e;else if(d==="element"){if(this.src=
e.src,e.complete&&e.ownerDocument===this.B){try{this.ea=h=e.clone()}catch(k){this.ea=h=null}if(h)this.state=1,this.width=this.width||h.naturalWidth||h.width,this.height=this.height||h.naturalHeight||h.height,this.naturalWidth=h.naturalWidth||h.width,this.naturalHeight=h.naturalHeight||h.height}}else a("IllegalArgument 'image'")},isBitmap:1,getDocument:function(){return this.B},Ng:function(){var a=-1,f=this.ub,e=f&&f.length||0,b;for(this.ub=null;++a<e;){b=f[a];try{b[0].apply(b[1],b[2])}catch(c){ovi.warn("Exception in user defined callback within gfx.BitmapImage!"),
ovi.debug(c)}}},Rl:function(a,f){var e=-1,b=this.Ud,c=b&&b.length||0;this.state=f?1:-1;if(this.state===1){this.naturalWidth=a.naturalWidth||a.width;this.naturalHeight=a.naturalHeight||a.height;this.width=this.width||a.naturalWidth||a.width;for(this.height=this.height||a.naturalHeight||a.height;++e<c;)this.V(b[e]);this.Ud=null}this.Ng()},prepare:function(a,f){var e,b,g=!1,q,f=f||this;if(c(a)==="function"){e=this.ub||(this.ub=[]);q=[].concat(arguments);q.splice(0,2,this);for(b=e.length;b--;)if(e[b][0]===
a&&e[b][1]===f){g=!0;break}!g&&e.push([a,f,q])}if(this.state===1)this.Ng();else if(this.state!==0)this.state=0,this.ea=this.ea||this.B.createElement("IMG"),h.imgLoader.request(this.ea,this.src,this.Rl,this)},V:function(a){var f=this.width&&this.height,e;if(c(this.state)!=="number"||this.state<=0)if(this.prepare(),this.state<=0)return a=a||this.B.createElement("DIV"),b(a,{position:"relative",overflow:"hidden",width:f?this.width+"px":"0",height:f?this.height+"px":"0"}),(this.Ud||(this.Ud=[])).push(a),
a;f=c(this.offsetX)==="number"&&c(this.offsetY)==="number";try{e=this.ea.cloneNode(!0)}catch(m){e=this.B.createElement("IMG"),e.src=this.src}f&&b(e,{position:"absolute",left:-this.offsetX+"px",top:-this.offsetY+"px"});if(f||d){a=a||this.B.createElement("DIV");b(a,{position:"relative",overflow:"hidden",width:this.width+"px",height:this.height+"px"});a.appendChild(e);if(d)e.style.position="absolute";return a}e.style.width=this.width+"px";e.style.height=this.height+"px";if(a)return a.style.width=this.width+
"px",a.style.height=this.height+"px",a.appendChild(e),a;return e},createElement:function(a){var f=this.V();this.setOpacity(f,a);return f},setOpacity:function(e,f){var p=c(f)==="number"&&f>=0&&f<=1?f:this.opacity,m=e.ownerDocument,g,q=Math.round(p*100);((p=+p)!==p||p<0||p>1)&&a("Invalid opacity!");e.$n$opacity=p;if(d){if(p<1&&!e.$n$opacityHack){for(e.$n$opacityHack=!0;e.firstChild;)e.removeChild(e.firstChild);g=m.createElement("DIV");if(!k)g.style.filter="alpha(opacity="+q+")";b(g,{position:"relative",
width:this.width+"px",height:this.height+"px",overflow:"hidden"});e.$n$alphaImageLoader="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod='scale', src='"+this.src+"')";m=m.createElement("DIV");m.style.filter=e.$n$alphaImageLoader+(k?"progid:DXImageTransform.Microsoft.Alpha(opacity="+q+")":"");b(m,{position:"absolute",top:(this.offsetX||0)+"px",left:(this.offsetY||0)+"px",width:this.width+"px",height:this.height+"px"});g.appendChild(m);e.appendChild(g)}if(p<1||e.$n$opacityHack)if(e.firstChild.firstChild.style.filter=
e.$n$alphaImageLoader+(k?"progid:DXImageTransform.Microsoft.Alpha(opacity="+q+")":""),!k)e.firstChild.style.filter="alpha(opacity="+q+")"}else e.style.opacity=p;return this},clone:function(a,f,b,m,g){a=a||this.B;f=c(f)==="number"?f:this.width;b=c(b)==="number"?b:this.height;m=c(m)==="number"?m:this.offsetX;g=c(g)==="number"?g:this.offsetY;if(a===this.B)return a=new e(this.src,a,f,b,m,g),this.state>0&&ovi.extend(a,{state:this.state,ea:this.ea,naturalWidth:this.naturalWidth,naturalHeight:this.naturalHeight,
width:f,height:b,offsetX:m,offsetY:g}),a;return new e(this.src,a,this.width,this.height,this.offsetX,this.offsetY)}});g.fromObjectListener.push(function(a,f){if(a instanceof e)return a;var b=c(a);if(b==="element"&&c(a.src)==="string"&&a.ownerDocument)return new e(a,f);if(b==="string"&&a.length)return new e(a,f)})})();ovi.provide("nokia.maps.gfx.GraphicsImage");
(function(){var d=Array.prototype.slice,k=nokia.maps.gfx,h=nokia.maps.util,c=h.c,b=ovi.type,g=k.IDL,a=k.Painter,e=k.Image,l=k.Graphics,f=new k.SvgParser,c=nokia.maps.util.c,p=nokia.maps.gfx.GraphicsImage=new ovi.Class({Extends:nokia.maps.gfx.Image,initialize:function(f,p,q,k){var s=d.call(arguments,0),u=f,w=f;this.d=e.d++;if(b(f)!=="function")w instanceof l&&(u=w.getIDL()),u instanceof g?(this.e=u,this.width=u.width,this.height=u.height,this.state=1,f=h.J):c("GraphicsImage: Illegal render function or IDL!");
this.B=q||document;this.mb=f;this.Ak=p||this;this.opacity=1;s.splice(0,4,null);this.jk=s;this.Rd=k instanceof a?k:new a.defaultPainter},isGraphics:1,getDocument:function(){return this.B},getIDL:function(){return this.e},prepare:function(a,f){var e,c;if(!this.state)e=new l,c=this.jk,c[0]=e,this.mb.apply(this.Ak,c),this.e=e.getIDL(),this.width=this.e.width,this.height=this.e.height,this.state=1;if(b(a)==="function")this.ub||(this.ub=[]),c=[].concat(arguments),c.splice(0,2,this),a.apply(f||this,c)},
createElement:function(a){this.state||this.prepare();return this.Rd.createElement(this.e,this.B,typeof a==="number"?a:this.opacity)},setOpacity:function(a,f){this.Rd.setOpacity(a,f);return this},clone:function(a){var f,e;f=new p(this.mb);for(e in this)f[e]=this[e];if(a)f.B=a;return f}});e.fromObjectListener.unshift(function(a){if(a instanceof p)return a;if(a instanceof g)return new p(g);if(typeof a==="string"&&a.indexOf("<svg")>=0)return new p(f.parseSvg(a))})})();ovi.provide("nokia.maps.geo.BoundingBox");
(function(d){function k(a,f){var e=a+f/2;e-=e>180?360:0;return e}function h(a,f){var e=f-a;e+=e<0?360:0;return e}var c=Math,b=c.min,g=c.max,a=c.abs,e=d.geo,l=d.util.c,f=e.Coordinate,p=e.BoundingBox=function(a,e,b){var a=f.fromObject(a),c;if(!a||e&&!(c=f.fromObject(e)))l(a?"bottomRight":"topLeft");this.topLeft=a;c?b||a.latitude<c.latitude&&l("BoundingBox top latitude < bottom latitude"):c=a;if((this.bottomRight=c)&&a.longitude>c.longitude)this.isCDB=!0};ovi.extend(p.prototype,{isCDB:!1,pn:void 0,bl:void 0,
$b:void 0,equals:function(a){return a&&this.topLeft.equals(a.topLeft)&&this.bottomRight.equals(a.bottomRight)},contains:function(a){var e,b;a instanceof f&&(a=new p(a,a));a=this.merge(a);b=a.getCenter();e=this.getCenter();return b.latitude===e.latitude&&b.longitude===e.longitude&&this.getHeight()===a.getHeight()&&this.getWidth()===a.getWidth()},intersects:function(a){var f=this.topLeft,e=this.bottomRight,b=a.topLeft,a=a.bottomRight,c=f.longitude<=e.longitude,l=b.longitude<=a.longitude,p=f.longitude<
a.longitude,g=b.longitude<e.longitude;return e.latitude<=b.latitude&&a.latitude<=f.latitude&&(!c&&(!l||p||g)||!l&&(p||g)||p&&g)},isEmpty:function(){return this.topLeft.longitude===this.bottomRight.longitude&&this.topLeft.latitude===this.bottomRight.latitude},getCenter:function(){var a=this.$b;if(a===void 0)var a=this.topLeft.longitude,e=this.bottomRight.latitude,a=new f(e+(this.topLeft.latitude-e)/2,k(a,h(a,this.bottomRight.longitude)));return a},getWidth:function(){var a=this.pn;a===void 0&&(a=h(this.topLeft.longitude,
this.bottomRight.longitude));return a},getHeight:function(){var a=this.bl;a===void 0&&(a=this.topLeft.latitude-this.bottomRight.latitude);return a},resizeToCenter:function(a){a instanceof f||l("Parameter center must be an instance of nokia.maps.geo.Coordinate");var e=this.topLeft.longitude,b=this.topLeft.latitude,c=this.bottomRight.longitude,g=this.bottomRight.latitude,d=k(e,h(e,c)),w=a.latitude-g-(b-g)/2,v=a.longitude-d,v=v>180||v<-180?-(d+a.longitude):v,a=e+(v<0?2*v:0);c+=v>0?2*v:0;c=c>180?c-360:
c;b=w>0?b+2*w:b;b>=90&&(b=90);g=w<0?g+2*w:g;g<=-90&&(g=-90);return new p(new f(b,a<-180?360+a:a),new f(g,c))},merge:function(a){a&&a.push?a.push(this):a=[this,a];return p.merge(a)}});ovi.extend(p,{fromObject:function(a,e){var b;if(a&&(b=a.length)!==void 0){if(b===2&&a[0]instanceof f&&a[1]instanceof f)return new p(a[0],a[1],e);if(b===4)return new p(new f(a[0],a[1],void 0,e),new f(a[2],a[3],void 0,e),e)}return a instanceof p?a:null},coverAll:function(a){(!a||a.length===void 0)&&l("no argument was given, array is expected");
!a.length&&l("empty array was given");for(var f=a[0],e=f.latitude,b=f.longitude,c=[e,b,e,b],g=a.length;--g;)f=a[g],c=p.Sb(c,[e=f.latitude,b=f.longitude,e,b]);return p.fromObject(c)},fromPath:function(a,f){!a&&l("no argument was given, geo strip is expected");!(a instanceof e.Strip)&&l("geo strip is expected");var b=null,c,g,d=a.getLength(),h;if(d)if(d===1)c=a.get(0),b=[c.latitude,c.longitude,c.latitude,c.longitude];else if(d===2)c=a.getLatLng(0),c.push(c[0]),c.push(c[1]),g=a.getLatLng(1),g.push(g[0]),
g.push(g[1]),b=p.fromObject(p.Sb(c,g),f);else{c=a.getLatLng(0);g=a.getLatLng(1);p.mg(c=[c[0],c[1],g[0],g[1]]);b=c;for(h=2;h<d;h++)c=a.getLatLng(h-1),g=a.getLatLng(h),p.mg(c=[c[0],c[1],g[0],g[1]]),b=p.Sb(b,c)}return p.fromObject(b,f)},merge:function(a){(!a||!a.length||!(a[0]instanceof p))&&l("array of bounding boxes is expected");for(var f=a[0],e=f.topLeft,b=f.bottomRight,c=[e.latitude,e.longitude,b.latitude,b.longitude],g=a.length;--g;)(f=a[g])instanceof p?c=p.Sb(c,[(e=f.topLeft).latitude,e.longitude,
(b=f.bottomRight).latitude,b.longitude]):l("it is possible to merge bounding boxes only");return p.fromObject(c)},Sb:function(a,f){var e,c,l=a[1],p=a[3],d=f[1],v=f[3],x,z,A,B,D;e=b(a[2],f[2]);c=g(a[0],f[0]);x=h(l,p);z=k(l,x);A=h(d,v);D=k(d,A)-z;D+=D-1.0E-6<0?360:0;D-1.0E-6<180?(z=l,B=v):(D=360-D,z=d,B=p);D=D+x/2+A/2;D+5.0E-7>=360?(z=-180,B=180):D-5.0E-7<x?(z=l,B=p):D-5.0E-7<A&&(z=d,B=v);return[c,z,e,B]},mg:function(f){var e=f[1],b=f[3],c=f[0],l=f[2];if(e>b&&b-e>180||e<b&&e-b<-180||b<e&&a(b-e)<180)f[1]=
b,f[3]=e;c<l&&(f[0]=l,f[2]=c)}})})(nokia.maps);ovi.provide("nokia.maps.geo.QuadTree");
(function(d){function k(a,e){if(Array.prototype.indexOf){var b=e.length,f;if(b)for(;b--;)a.indexOf(f=e[b])===-1&&a.push(f)}else{var c=a.length,b=e.length,m={};if(b){for(;c--;)m[a[c].id]=1;for(;b--;)(f=e[b]).id in m||a.push(f)}}}var h=d.geo,c=d.util,b=h.BoundingBox,d=c.QuadTree,g=d.Entry,d=h.QuadTree=new ovi.Class({initialize:function(a){this.D=new c.QuadTree(a,180,90,0,0);this.Zb=ovi.Array()},isCDB:!1,getBoundingBox:function(){var a;if(!this.T&&!this.isCDB&&(a=this.D.getExtremes()))this.T=new b([-a["4"],
a["7"]],[-a["6"],a["5"]]);return this.T||null},insertBoundingBox:function(a){var e=a.topLeft,b=a.bottomRight,f=e.longitude,c=b.longitude,m;this.T=null;if(a.isCDB)this.Zb.push(m=new g(null,f,-e.latitude,c+360,-b.latitude)),this.isCDB=!0;return m||this.D.insertSorted(f,-e.latitude,c,-b.latitude)},insertCoordinate:function(a){var e=a.longitude,a=-a.latitude;this.T=null;return this.D.insertSorted(e,a,e,a)},insertLine:function(a,e,b,f){var c,m;this.T=null;e<f?c=e:(c=f,f=e);a<b?(e=-b,a=-a):(e=-a,a=-b);
if(f-c>180)this.Zb.push(m=new g(null,f,e,c+360,a)),this.isCDB=!0;return m||this.D.insertSorted(c,e,f,a)},insertLineAlt:function(a,e,b,f,c){return this.insertLine(a,e,f,c)},remove:function(a){var e;if(a.aa)this.D.remove(a);else if((a=(e=this.Zb).indexOf(a))>=0)e.splice(a,1),this.isCDB=e.length>0;this.T=null},Bd:function(a,e,b,f,c){for(var m=this.Zb,g=m.length,d,h=[],k=a+360,u=b+360;g--;)d=m[g],this.xg(d,a,e,b,f,c)?h.push(d):this.xg(d,k,e,u,f,c)&&h.push(d);return h},xg:function(a,e,b,f,c,m){var g=a[7],
d=a[4],h=a[5],a=a[6];return!(g>f||h<e||d>c||a<b)&&(m||g>=e&&h<=f&&d<=c&&a>=b)},intersectBoundingBox:function(a,e){var b=this.D,f=a.topLeft,c=a.bottomRight,m=-f.latitude,f=f.longitude,g=-c.latitude,c=c.longitude,d;a.isCDB?(d=b.intersect(-180,m,c,g,e),k(d,b.intersect(f,m,180,g,e)),k(d,this.Bd(c,m,f+360,g,e))):(d=b.intersect(f,m,c,g,e),k(d,this.Bd(f,m,c,g,e)));return d},intersectCoordinate:function(a){var e=-a.latitude,a=a.longitude,b=this.D.intersect(a,e,a,e,1);k(b,this.Bd(a,e,a,e,1));return b}})})(nokia.maps);
ovi.provide("nokia.maps.geo.Shape");
(function(d){function k(a,f){return a/f<0&&g(f-a)>180}var h=Math,c=h.min,b=h.max,g=h.abs,a=h.pow,e=h.sqrt,l=h.round,f=d.geo,p=d.util,m=p.Point,r=p.math.clipping.clipStrips,q=p.math.clipping.clip,y=f.Coordinate,s=f.BoundingBox,u=p.Coroutine,w=[],v=!v,x=!v;f.Shape=new ovi.Class({Extends:f.Strip,initialize:function(a,e){this.D=new f.QuadTree(+e||10);this._super(w);this.$a=!!a;this.Kh=[];this.ab=0;this.addObserver(this.Uk,this)},Statics:{wn:w,ng:function(a,e){var b=0,c=a.arr,m,l,g,p,d,q,r,h,s=c.length;
a.shape?(p=+c[a.i-2],h=+c[a.i-1]):(a.shape=new f.Shape(a.closed),a.i=0,s>2&&(p=+c[a.i++],h=+c[a.i++],a.shape.internalArray.push(p,h,0)));l=a.shape;g=l.D;d=l.Kh;for(m=l.internalArray;a.i<s;)if(q=+c[a.i++],r=+c[a.i++],m.push(q,r,0),(p=g.insertLine(p,h,q,r)).Oa=d.length,d.push(p),l.ab+=k(r,h),p=q,h=r,!(++b&15)&&u.shallYield())return u.yield();if(l.closed&&c.length>=2)q=+c[0],r=+c[1],m.push(q,r,0),(p=g.insertLine(p,h,q,r)).Oa=d.length,p.$closing=1,d.push(enty),l.ab+=k(r,h);if(e&&a.callback)return u.kill(e),
a.callback.call(a.ctx,l);return l},fromLatLngArray:function(a,f,e,b){var c;if(p.isFunction(e))return c=u.create("nokia.maps.geo.Shape#fromLatLngArrayCo",this.ng,"arr","closed","callback","ctx"),this.og=c(a,f,e,b||void 0),null;return this.ng({arr:a,closed:f},null)}},destroy:function(){this.og&&u.kill(this.og);this._super()},getBoundingBox:function(){var a,f,e=this.T;if(!e)e=this.D.getBoundingBox()||s.fromPath(this),this.$a&&this.ab&&(a=this.get(0),f=this.get(this.getLength()-1),e=e.merge(s.coverAll([a,
f]))),this.T=e;return this.T},ho:function(a){var f=this.internalArray;this.internalArray=a.internalArray;this.oa(this,0,a.internalArray.length/3,f)},Uk:function(a,f,e,m){var a=this.$a,l=this.D,g=this.Kh,p=g.length,d=m.length/3,m=b(f-1,0),q;this.T=null;a&&p&&l.remove(g.splice(--p,1)[0]);if(d){p=c(f-1+d,p-1);for(q=m;q<=p;q++)l.remove(g[q]);d=[m,p-m+1]}else p>0&&f<=p&&f>0?(l.remove(g[m]),d=[m,1]):d=[m,0];m=b(f-1,0);p=c(f-1+e,this.getLength()-2);for(q=m;q<=p;q++)d.push(l.insertLineAlt.apply(l,this.internalArray.slice(q*
3,q*3+6)));g.splice.apply(g,d);p=g.length;a&&p&&((g[p++]=l.insertLine.apply(l,this.getLatLng(this.getLength()-1).concat(this.getLatLng(0)))).$closing=1);for(q=p;q--;)g[q].Oa=q;this.ab=this.Wf(this.internalArray,3)},Xf:function(a,f,e){if(!this.$a)return!1;for(var m=f.length,l=1,g=0,p=f[0],d,q;l<m;l++)d=f[l],q=p.y+(d.y-p.y)*((a.x-p.x)/(d.x-p.x)),c(p.x,d.x)<=a.x&&b(p.x,d.x)>=a.x&&(e?q>a.y:q<a.y)&&g++,p=d;return!!(g%2)},Wf:function(a,f){var e=this.$a?0:f,b=0,c=a.length,m=a[e?1:c-f+1],l;for(++e;e<c;e+=
f)b+=k(l=a[e],m),m=l;return b},dl:function(a,f){return a.Oa-f.Oa},hc:function(a,f,e,b){function c(a,f){l&&g(l-f)>180&&(f+=l<0?-360:360);l=f;return e.latLngToPixel(a,f+(b?b:0))}var m=[],l,p=a.length,d,q=0;for(d=0;d<p;d+=2)m[q++]=c(a[d],a[d+1]);f&&(m[q]=c(a[0],a[1]));return m},rh:function(a,f){for(var e=[],b=Infinity,c=-1,m,e=0;e<a.length;e+=2)m=g(a[e+1]-f),m+=m>180?360-m:m,m<b&&(b=m,c=e);if(e>0)return e=a.splice(c,a.length-c),e.concat(a);return a},Zj:function(a){var f=a.length,e,b=0,c,m,l,p=[],d;m=
x;for(e=0;e<f;e+=2)p[b++]=a[e],p[b++]=a[e+1],l=new y(a[e],a[e+1],void 0,v),c=a[e+2]!==void 0?new y(a[e+2],a[e+3],void 0,v):new y(a[0],a[1],void 0,v),l=s.coverAll([l,c]),!m&&g(a[e+1])!==180&&g(c.longitude)!==180&&l.contains(new y(l.topLeft.latitude,180,void 0,v))&&(m=g(c.latitude-a[e]),l=g(c.longitude-a[e+1]),l+=l>180?-360:0,d=g(180-c.longitude),d+=d>180?-360:0,m/=g(l)/g(d),c=c.latitude+(c.latitude>a[e]?-m:m),m=a[e+1]>0?180:-180,p[b++]=c,p[b++]=m,p[b++]=c,p[b++]=-m,m=v);return p.length?p:a},Qk:function(a,
f,e,b){var c=[],m=a.length,l,p,d,q,r,h,k=x;for(l=0;l<m;l+=b)if(p=a[l],d=a[l+1],l==0||((h=g(r-d))>180?360-h:h)>e||g(q-p)>f)!k&&g(d)==180&&(c.push(p),c.push(d),c.push(p),c.push(-d),k=v),c.push(p),c.push(d),q=p,r=d;return c},sg:function(f){var b=[],c,p=f,g,d;do{g=l((p.origx?p.origx:p.x)*100)/100;d=l((p.origy?p.origy:p.y)*100)/100;if(!c||e(a(c.x-g,2)+a(c.y-d,2))>0.01)c=new m(g,d),b.push(c);p=p.next}while(p&&p!=f);return b},clip:function(a,e,b,c,l,p,d){var h=this.$a,u=this.internalArray,x=e.topLeft,C=
e.bottomRight,H=x.y,ba=C.y,S=x.x,da=C.x,ea=e.getCenter(),e=new m(da,H),I=new m(S,ba),e=[x,e,C,I],I=a.pixelToGeo(x),C=a.pixelToGeo(C),aa=a.pixelToGeo(ea),C=s.fromPath(new f.Strip([I.latitude,I.longitude,I.latitude,aa.longitude,I.latitude,C.longitude,C.latitude,C.longitude,C.latitude,aa.longitude,C.latitude,I.longitude],"unsafe values lat lng")),aa=!1,F=0,K,la=-2,I=[],M,F=[],ia,ta,pa=0,Z=0,W;K=[];var R=[],U;if(b)b/=2,Z=ea.x,pa=ea.y,F=a.xyToGeo(Z-b,pa-b),K=a.xyToGeo(Z+b,pa+b),pa=g(F.latitude-K.latitude),
Z=g(F.longitude-K.longitude);if(h){I=[[]];K=this.Qk(u,pa,Z,3);U=s.fromPath(new nokia.maps.geo.Strip(K,"unsafe values lat lng"),v);U=U.merge((new s(new y(K[K.length-2],K[K.length-1],void 0,v),void 0,v)).merge(new s(new y(K[0],K[1],void 0,v),void 0,v)));if((F=U.getWidth())<360&&U.topLeft.longitude==-180)U=new s(new y(U.topLeft.latitude,180,void 0,v),U.bottomRight,v);F<360&&U.bottomRight.longitude==180&&(U=new s(U.topLeft,new y(U.bottomRight.latitude,-180,void 0,v),v));M=C;if(F<360&&p>0)M=U.getCenter().longitude,
W=a.geoToPixel(U.topLeft),W.x-=d,W.y-=d,W=a.pixelToGeo(W),p=a.geoToPixel(U.bottomRight),p.x+=d,W.y+=d,p=a.pixelToGeo(p),M=s.fromPath(new f.Strip([W.latitude,W.longitude,W.latitude,M,W.latitude,p.longitude,p.latitude,p.longitude,p.latitude,M,p.latitude,W.longitude],"unsafe values lat lng"),v);K=this.rh(this.Zj(K),U.topLeft.longitude);I[0]=this.hc(K,h,a);if(U.getWidth()==360&&this.Wf(K,2)%2==1){I[0][1].x>I[0][I[0].length-1].x&&(I[0]=I[0].reverse());R=[];F=I[0].length-1;for(b=0;b<F;b++)u=I[0][b],R[b]=
new m(u.x-2*a.w,u.y),R[b+F]=new m(u.x-a.w,u.y),R[b+2*F]=new m(u.x,u.y),R[b+3*F]=new m(u.x+a.w,u.y),R[b+4*F]=new m(u.x+2*a.w,u.y);I[0]=R;W=a.latLngToPixel(c?90:-90,0);W.y=c?W.y-51:W.y+51;p=W.clone();W.x=I[0][I[0].length-1].x+1;p.x=I[0][0].x-1;I[0].push(W,p)}aa=this.Xf(x,I[0],c);R=r(I,H,S,da,ba);W=R.length;F=I;U.getWidth()<360&&U.contains(new y(U.topLeft.latitude,180,void 0,v))&&(I=[],K=this.rh(K,U.bottomRight.longitude),I[0]=this.hc(K,h,a),aa=!!(aa^this.Xf(x,I[0],c)),R=r(I,H,S,da,ba),W+=R.length,F=
F.concat(I));U.getWidth()<360&&!U.contains(new y(U.topLeft.latitude,180,void 0,v))&&M.contains(new y(U.topLeft.latitude,180,void 0,v))&&(p=U.getCenter().longitude>0?-360:360,M=this.hc(K,h,a,p),I=[M],R=r(I,H,S,da,ba),W+=R.length,F.push(M))}else{d=this.D.intersectBoundingBox(C,v).sort(this.dl);F=d.length;for(c=0;c<F;c++)if(ea=d[c],x=ea.Oa,K=x*3,la+1!==x&&I.push(M=[ia=u[K],ta=u[K+1]]),la=x,K=ea.$closing?0:K+3,ea=u[K],K=u[K+1],!b||c===F-1||d[c+1].Oa!==x+1||g(ta-K)>Z||g(ia-ea)>pa)M.push(ia=ea,ta=K);if(this.ab){x=
[];for(c=0;c<I.length;c++)if(M=I[c],F=M.length){u=[];for(b=0;b<F;b+=2)b==0||b>0&&!k(M[b+1],M[b-1])?u.push(M[b],M[b+1]):(u.push(M[b],M[b+1]),x.push(u),u=[],M[b-1]+=M[b-1]<0?360:-360,u.push(M[b-2],M[b-1],M[b],M[b+1]));x.push(u)}I=x}K=[];c=u=0;for(F=I.length;c<F;c++)M=I[c],M.length&&(K[u++]=this.hc(M,h,a));F=p?r(K,H,S,da,ba):K}if(!h||!W)if(h)if(aa){if(l)return F=[e],F.fullfilled=1,F;return w}else return[];else return F;if(C.contains(U))return F;I=[];for(c=F.length;c--;)if(a=q(e,F[c])){M=this.sg(a);for(I.push(M);a.nextPoly;)a=
a.nextPoly,M=this.sg(a),I.push(M)}return I}})})(nokia.maps);ovi.provide("nokia.maps.dom._packaging.base");ovi.provide("nokia.maps.gfx._packaging.base");ovi.provide("nokia.maps.geo._packaging.base");var Gb=nokia.maps,Hb=Gb.config.params.language||"auto";delete Gb.config.params;Gb.loadPath=Gb.config.baseUrl;Gb.Config.setDefaults(nokia.maps.config);Gb.util.getRootNameSpace("nokia.maps").Settings.set("defaultLanguage",Hb);window.nokia.maps=nokia.maps;})();
